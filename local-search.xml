<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ä» Obsidian åˆ° Hexoï¼šæ‰“é€ å®Œç¾çš„æ•°å­¦å…¬å¼ä¸å›¾ç‰‡å‘å¸ƒæµ</title>
    <link href="/2025/06/24/blog/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/"/>
    <url>/2025/06/24/blog/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<p>å¯¹äºè®¸å¤šæŠ€æœ¯çˆ±å¥½è€…å’Œç ”ç©¶è€…æ¥è¯´ï¼ŒObsidianæ˜¯æ— ä¸ä¼¦æ¯”çš„ä¸ªäººçŸ¥è¯†ç®¡ç†ï¼ˆPKMï¼‰ç¥å™¨ï¼Œè€Œ Hexoåˆ™æ˜¯æ­å»ºé™æ€åšå®¢çš„ç»ä½³é€‰æ‹©ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬è¯•å›¾å°†ä¸¤è€…ç»“åˆï¼Œæ‰“é€ ä¸€ä¸ªä»â€œç¬”è®°â€åˆ°â€œå‘å¸ƒâ€çš„æµç•…å·¥ä½œæµæ—¶ï¼Œå¸¸å¸¸ä¼šé‡åˆ°ä¸€ä¸ªå·¨å¤§çš„éšœç¢ï¼šObsidianä¸­ä¾¿æ·çš„è¯­æ³•ï¼ˆå°¤å…¶æ˜¯æ•°å­¦å…¬å¼å’Œå›¾ç‰‡é“¾æ¥ï¼‰ä¸ Hexoçš„æ ‡å‡†æ¸²æŸ“æµç¨‹å­˜åœ¨ä¸¥é‡å†²çªã€‚</p><p>æœ¬æ–‡å°†è®°å½•ä¸€æ¬¡å®Œæ•´çš„â€œè¸©å‘â€ä¸â€œå¡«å‘â€è¿‡ç¨‹ï¼Œæœ€ç»ˆå½¢æˆä¸€å¥—å¼ºå¤§ã€å¯é çš„è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œè®©ä½ åªéœ€ä¸€æ¡å‘½ä»¤ï¼Œå³å¯å°†Obsidian ç¬”è®°å®Œç¾å‘å¸ƒåˆ° Hexo åšå®¢ã€‚</p><p>å¯¹äºç½‘ç«™çš„æ­å»ºå¯ä»¥å‚è€ƒ<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><spanclass="hint--top hint--rounded"aria-label="https://zhuanlan.zhihu.com/p/392994381">[1]</span></a></sup></p><h3id="é—®é¢˜æ‰€åœ¨ä¾¿åˆ©æ€§ä¸æ ‡å‡†åŒ–çš„å†²çª">é—®é¢˜æ‰€åœ¨ï¼šä¾¿åˆ©æ€§ä¸æ ‡å‡†åŒ–çš„å†²çª</h3><p>æˆ‘ä»¬çš„æ ¸å¿ƒç—›ç‚¹åœ¨äºï¼ŒObsidian ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œä½¿ç”¨äº†è®¸å¤šéæ ‡å‡†çš„Markdown è¯­æ³•ï¼Œè€Œ Hexo ä¾èµ–äºæ ‡å‡†çš„æ¸²æŸ“å™¨ã€‚</p><table><thead><tr><th style="text-align: left;">åŠŸèƒ½</th><th style="text-align: left;">ä½ åœ¨ Obsidian ä¸­çš„å†™æ³•</th><th style="text-align: left;">æ ‡å‡† Markdown / HTML</th><th style="text-align: left;">å†²çªç‚¹</th></tr></thead><tbody><tr><td style="text-align: left;"><strong>ä¸‹æ ‡</strong></td><td style="text-align: left;"><code>$x\_i$</code></td><td style="text-align: left;"><code>&lt;em&gt;</code> æ ‡ç­¾</td><td style="text-align: left;"><code>_</code> è¢« Markdowné”™è¯¯åœ°è§£æä¸ºæ–œä½“ã€‚</td></tr><tr><td style="text-align: left;"><strong>å›¾ç‰‡åµŒå…¥</strong></td><tdstyle="text-align: left;"><code>![my_image.png](/images/my_image.png)</code></td><tdstyle="text-align: left;"><code>![alt](/path/to/image.png)</code></td><td style="text-align: left;">Hexo å®Œå…¨ä¸è®¤è¯†<code>![...](/images/...)</code> è¿™ç§ Wikilink è¯­æ³•ã€‚</td></tr><tr><td style="text-align: left;"><strong>å›¾ç‰‡ç²˜è´´</strong></td><td style="text-align: left;"><code>![](/images/image.png)</code></td><td style="text-align: left;"><code>![](/web/path/image.png)</code></td><td style="text-align: left;">Obsidianå¯èƒ½ä¼šç”ŸæˆæŒ‡å‘ä½ æœ¬åœ°ç¡¬ç›˜çš„ç»å¯¹è·¯å¾„ï¼Œè¿™åœ¨ç½‘ç«™ä¸Šæ— æ•ˆã€‚</td></tr><tr><td style="text-align: left;"><strong>LaTeX å‘½ä»¤</strong></td><td style="text-align: left;"><code>\frac</code>,<code>\begin&#123;aligned&#125;</code></td><td style="text-align: left;"><code>\</code></td><td style="text-align: left;"><code>\</code>æ˜¯ç‰¹æ®Šè½¬ä¹‰ç¬¦ï¼Œåœ¨å¤„ç†ä¸­å¯èƒ½è¢«â€œåƒæ‰â€ã€‚</td></tr><tr><td style="text-align: left;"><strong>å…¬å¼æ¢è¡Œ</strong></td><td style="text-align: left;"><code>\\</code></td><td style="text-align: left;"><code>\</code></td><td style="text-align: left;">ä¸¤ä¸ª <code>\</code>å¯èƒ½åœ¨å¤„ç†ååªå‰©ä¸€ä¸ªï¼Œå¯¼è‡´æ¢è¡Œå¤±è´¥ã€‚</td></tr></tbody></table><p>æ‰‹åŠ¨å»ä¿®æ”¹æ¯ä¸€ç¯‡æ–‡ç« ä¸­çš„è¿™äº›é—®é¢˜ï¼Œæ— ç–‘æ˜¯ä¸€åœºç¾éš¾ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š<strong>åœ¨Obsidian ä¸­è‡ªç”±å†™ä½œï¼Œç”¨ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·å¤„ç†æ‰€æœ‰å…¼å®¹æ€§é—®é¢˜ã€‚</strong></p><h3 id="ç¬¬ä¸€æ­¥é…ç½®-hexoä¸ºæ•°å­¦å…¬å¼æä¾›æœ€ä½³æ¸²æŸ“ç¯å¢ƒ">ç¬¬ä¸€æ­¥ï¼šé…ç½®Hexoï¼Œä¸ºæ•°å­¦å…¬å¼æä¾›æœ€ä½³æ¸²æŸ“ç¯å¢ƒ</h3><p>åœ¨è§£å†³å…¼å®¹æ€§é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç¡®ä¿ Hexoæœ¬èº«å…·å¤‡æ¸²æŸ“é«˜è´¨é‡æ•°å­¦å…¬å¼çš„èƒ½åŠ›ã€‚æ”¾å¼ƒåœ¨å„ç§ Hexoæ’ä»¶ä¹‹é—´æŒ£æ‰çš„æ›²æŠ˜é“è·¯ï¼Œæˆ‘ä»¬ç›´æ¥é‡‡ç”¨ä¸šç•Œæœ€ç¨³å®šã€è´¨é‡æœ€é«˜çš„æ–¹æ¡ˆï¼š<strong>å®¢æˆ·ç«¯MathJax</strong>ã€‚</p><ol type="1"><li><p><strong>å®‰è£…ä¸€ä¸ªçº¯ç²¹çš„ Markdown æ¸²æŸ“å™¨</strong>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸ä¼šâ€œè‡ªä½œä¸»å¼ â€ç ´åæˆ‘ä»¬ LaTeXä»£ç çš„æ¸²æŸ“å™¨ã€‚<code>hexo-renderer-marked</code> æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-renderer-marked<br></code></pre></td></tr></table></figure></p></li><li><p><strong>é…ç½® <code>_config.yml</code></strong>åœ¨ä½ çš„åšå®¢æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œä»¥é˜»æ­¢ <code>marked</code>æ¸²æŸ“å™¨å¤„ç†æ•°å­¦å…¬å¼ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼š <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">marked:</span><br>  <span class="hljs-attr">gfm:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">pedantic:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">sanitize:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">tables:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">breaks:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">smartLists:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">smartypants:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">mangle:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure></p></li><li><p><strong>åœ¨ä¸»é¢˜ä¸­å¼•å…¥ MathJax</strong>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­åŠ è½½ MathJaxçš„å®˜æ–¹è„šæœ¬ã€‚ç¼–è¾‘ä½ ä¸»é¢˜çš„ <code>head</code> æ¨¡æ¿æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼Œå¯¹äº<code>landscape</code> ä¸»é¢˜ï¼Œæ˜¯<code>themes/landscape/layout/_partial/head.ejs</code>ï¼‰ï¼Œåœ¨<code>&lt;/head&gt;</code> æ ‡ç­¾å‰åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;%# MathJax Client-side Rendering Script with AMS package %&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">MathJax</span> = &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">tex</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">packages</span>: &#123;<span class="hljs-string">&#x27;[+]&#x27;</span>: [<span class="hljs-string">&#x27;ams&#x27;</span>]&#125;, <span class="hljs-comment">// åŠ è½½ AMS å®åŒ…ï¼Œä»¥æ”¯æŒ aligned ç­‰é«˜çº§ç¯å¢ƒ</span></span><br><span class="language-javascript">      <span class="hljs-attr">inlineMath</span>: [[<span class="hljs-string">&#x27;$&#x27;</span>, <span class="hljs-string">&#x27;$&#x27;</span>], [<span class="hljs-string">&#x27;\\(&#x27;</span>, <span class="hljs-string">&#x27;\\)&#x27;</span>]],</span><br><span class="language-javascript">      <span class="hljs-attr">displayMath</span>: [[<span class="hljs-string">&#x27;$$&#x27;</span>, <span class="hljs-string">&#x27;$$&#x27;</span>], [<span class="hljs-string">&#x27;\\[&#x27;</span>, <span class="hljs-string">&#x27;\\]&#x27;</span>]],</span><br><span class="language-javascript">      <span class="hljs-attr">processEscapes</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">processEnvironments</span>: <span class="hljs-literal">true</span></span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">options</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">skipHtmlTags</span>: [<span class="hljs-string">&#x27;script&#x27;</span>, <span class="hljs-string">&#x27;noscript&#x27;</span>, <span class="hljs-string">&#x27;style&#x27;</span>, <span class="hljs-string">&#x27;textarea&#x27;</span>, <span class="hljs-string">&#x27;pre&#x27;</span>]</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;MathJax-script&quot;</span> <span class="hljs-attr">async</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;[https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js](https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js)&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></p></li></ol><p>å®Œæˆè¿™ä¸€æ­¥ï¼Œä½ çš„ Hexo åšå®¢å°±å·²ç»æ‹¥æœ‰äº†æ¸²æŸ“ä»»ä½•æ ‡å‡† LaTeXå…¬å¼çš„èƒ½åŠ›ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥è§£å†³å¦‚ä½•å°† Obsidiançš„â€œæ–¹è¨€â€è½¬æ¢æˆâ€œæ ‡å‡†æ™®é€šè¯â€ã€‚</p><h3id="ç¬¬äºŒæ­¥æ‰“é€ ä½ çš„ä¸“å±æ™ºèƒ½ç¿»è¯‘å®˜-python-è‡ªåŠ¨åŒ–è„šæœ¬">ç¬¬äºŒæ­¥ï¼šæ‰“é€ ä½ çš„ä¸“å±â€œæ™ºèƒ½ç¿»è¯‘å®˜â€â€”â€”Python è‡ªåŠ¨åŒ–è„šæœ¬</h3><p>æˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ª Pythonè„šæœ¬ï¼Œå®ƒå°†ä½œä¸ºæˆ‘ä»¬å·¥ä½œæµçš„æ ¸å¿ƒã€‚å®ƒçš„ä»»åŠ¡æ˜¯è¯»å–æˆ‘ä»¬ä» Obsidian å†™å¥½çš„Markdown æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å®Œæˆæ‰€æœ‰å¿…éœ€çš„ä¿®å¤å’Œè½¬ä¹‰ã€‚</p><p>åœ¨ä½ çš„åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>converter.py</code>çš„æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç ç²˜è´´è¿›å»ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># converter.py (Production-ready version of the script)</span><br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> shutil<br><span class="hljs-keyword">import</span> argparse<br><span class="hljs-keyword">import</span> urllib.parse<br><br><span class="hljs-comment"># --- CONFIGURATION ---</span><br><span class="hljs-comment"># åœ¨è¿™é‡Œè®¾ç½®ä½ çš„å›¾ç‰‡æ–‡ä»¶å¤¹åœ¨ç½‘ç«™ä¸Šçš„ç»å¯¹è·¯å¾„ã€‚</span><br><span class="hljs-comment"># - å¦‚æœä½ çš„å›¾ç‰‡å­˜æ”¾åœ¨ Hexo é¡¹ç›®çš„ `source/images/` ç›®å½•ä¸‹ï¼Œå°±ä½¿ç”¨ &quot;/images/&quot;</span><br><span class="hljs-comment"># - å¦‚æœä½ çš„å›¾ç‰‡å­˜æ”¾åœ¨ `source/assets/` ç›®å½•ä¸‹ï¼Œå°±æŠŠå®ƒæ”¹æˆ &quot;/assets/&quot;</span><br><span class="hljs-comment"># - è¯·ç¡®ä¿è·¯å¾„ä»¥ &quot;/&quot; å¼€å¤´å’Œç»“å°¾ã€‚</span><br>IMAGE_FOLDER_PATH = <span class="hljs-string">&quot;/images/&quot;</span><br><span class="hljs-comment"># --- END CONFIGURATION ---</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_image_links</span>(<span class="hljs-params">content, image_prefix</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fix_local_path</span>(<span class="hljs-params"><span class="hljs-keyword">match</span></span>):<br>        alt_text = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)<br>        local_path_raw = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>)<br>        local_path = urllib.parse.unquote(local_path_raw)<br>        filename = os.path.basename(local_path)<br>        encoded_filename = urllib.parse.quote(filename)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;![<span class="hljs-subst">&#123;alt_text&#125;</span>](<span class="hljs-subst">&#123;image_prefix&#125;</span><span class="hljs-subst">&#123;encoded_filename&#125;</span>)&quot;</span><br><br>    local_path_regex = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;!\[(.*?)\]\(((?:[a-zA-Z]:|file:)[\\/].*?)\)&#x27;</span>)<br>    content = local_path_regex.sub(fix_local_path, content)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">replace_wikilink</span>(<span class="hljs-params"><span class="hljs-keyword">match</span></span>):<br>        filename = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>).strip()<br>        encoded_filename = urllib.parse.quote(filename)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;![<span class="hljs-subst">&#123;filename&#125;</span>](<span class="hljs-subst">&#123;image_prefix&#125;</span><span class="hljs-subst">&#123;encoded_filename&#125;</span>)&quot;</span><br><br>    wikilink_regex = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;!\[\[(.*?)\]\]&#x27;</span>)<br>    content = wikilink_regex.sub(replace_wikilink, content)<br>    <span class="hljs-keyword">return</span> content<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_blank_lines_in_env</span>(<span class="hljs-params"><span class="hljs-keyword">match</span></span>):<br>    env_content = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">0</span>)<br>    lines = env_content.split(<span class="hljs-string">&#x27;\n&#x27;</span>)<br>    non_blank_lines = [line <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines <span class="hljs-keyword">if</span> line.strip()]<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\n&#x27;</span>.join(non_blank_lines)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">escape_latex_math_part</span>(<span class="hljs-params">content</span>):<br>    content = content.replace(<span class="hljs-string">&#x27;\\&#x27;</span>, <span class="hljs-string">&#x27;\\\\&#x27;</span>)<br>    content = content.replace(<span class="hljs-string">&#x27;_&#x27;</span>, <span class="hljs-string">r&#x27;\_&#x27;</span>)<br>    content = content.replace(<span class="hljs-string">&#x27;*&#x27;</span>, <span class="hljs-string">r&#x27;\*&#x27;</span>)<br>    content = content.replace(<span class="hljs-string">&#x27;[&#x27;</span>, <span class="hljs-string">r&#x27;\[&#x27;</span>)<br>    content = content.replace(<span class="hljs-string">&#x27;]&#x27;</span>, <span class="hljs-string">r&#x27;\]&#x27;</span>)<br>    <span class="hljs-keyword">return</span> content<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_math_content</span>(<span class="hljs-params">content</span>):<br>    aligned_regex = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&quot;(\\begin\&#123;aligned\&#125;.*?\\end\&#123;aligned\&#125;)&quot;</span>, re.DOTALL)<br>    content = aligned_regex.sub(remove_blank_lines_in_env, content)<br>    text_block_regex = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;(\\text\&#123;.*?\&#125;)&#x27;</span>)<br>    parts = text_block_regex.split(content)<br>    new_parts = []<br>    <span class="hljs-keyword">for</span> part <span class="hljs-keyword">in</span> parts:<br>        <span class="hljs-keyword">if</span> part.startswith(<span class="hljs-string">&#x27;\\text&#123;&#x27;</span>):<br>            new_parts.append(part.replace(<span class="hljs-string">&#x27;\\&#x27;</span>, <span class="hljs-string">&#x27;\\\\&#x27;</span>, <span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">else</span>:<br>            new_parts.append(escape_latex_math_part(part))<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>.join(new_parts)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_math_match</span>(<span class="hljs-params"><span class="hljs-keyword">match</span></span>):<br>    delimiter = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)<br>    content = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>)<br>    escaped_content = process_math_content(content)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;delimiter&#125;</span><span class="hljs-subst">&#123;escaped_content&#125;</span><span class="hljs-subst">&#123;delimiter&#125;</span>&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_file_content</span>(<span class="hljs-params">text, image_prefix</span>):<br>    text = convert_image_links(text, image_prefix)<br>    math_block_regex = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&quot;(\&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\$\\|\\\\&lt;/span&gt;)(.\*?)\\1&quot;</span>, re.DOTALL)<br>    converted\_text = math\_block\_regex.sub(process\_math\_<span class="hljs-keyword">match</span>, text)<br>    <span class="hljs-keyword">return</span> converted\_text<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process</span>\_single\_file(filepath, create\_backup, image\_prefix):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Checking: <span class="hljs-subst">&#123;filepath&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>            original\_content = f.read()<br>        fm\_<span class="hljs-keyword">match</span> = re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r&#x27;---\\s\*?\\n(.\*?)\\n---\\s\*?\\n&#x27;</span>, original\_content, re.DOTALL)<br>        <span class="hljs-keyword">if</span> fm\_<span class="hljs-keyword">match</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;escaped: true&#x27;</span> <span class="hljs-keyword">in</span> fm\_<span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;  -&gt; Skipping: Already marked as converted.&quot;</span>)<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-keyword">if</span> create\_backup:<br>            backup\_path = filepath + <span class="hljs-string">&quot;.bak&quot;</span><br>            shutil.copy2(filepath, backup\_path)<br>        converted\_content = convert\_file\_content(original\_content, image\_prefix)<br>        <span class="hljs-keyword">if</span> fm\_<span class="hljs-keyword">match</span>:<br>            front\_matter\_content = fm\_<span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)<br>            new\_front\_matter = front\_matter\_content.strip() + <span class="hljs-string">&quot;\\nescaped: true\\n&quot;</span><br>            main\_content\_start\_index = fm\_<span class="hljs-keyword">match</span>.end()<br>            final\_content = original\_content\[:main\_content\_start\_index\].replace(front\_matter\_content, new\_front\_matter) + converted\_content\[main\_content\_start\_index:\]<br>        <span class="hljs-keyword">else</span>:<br>            new\_front\_matter = <span class="hljs-string">&quot;escaped: true\\n&quot;</span><br>            final\_content = <span class="hljs-string">f&quot;---\\n<span class="hljs-subst">&#123;new\_front\_matter&#125;</span>---\\n\\n<span class="hljs-subst">&#123;converted\_content&#125;</span>&quot;</span><br>        <span class="hljs-keyword">if</span> original\_content != final\_content:<br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f: f.write(final\_content)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;  -&gt; File converted and marked as &#x27;escaped&#x27;.&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;  -&gt; No changes needed.&quot;</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;  -&gt; Error processing file <span class="hljs-subst">&#123;filepath&#125;</span>: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>, file=sys.stderr)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process</span>\_path(path, create\_backup, image\_prefix):<br>    <span class="hljs-keyword">if</span> os.path.isfile(path):<br>        <span class="hljs-keyword">if</span> path.endswith(<span class="hljs-string">&quot;.md&quot;</span>): process\_single\_file(path, create\_backup, image\_prefix)<br>        <span class="hljs-keyword">else</span>: <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Skipping non-markdown file: <span class="hljs-subst">&#123;path&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">elif</span> os.path.isdir(path):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Processing directory: <span class="hljs-subst">&#123;path&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">for</span> root, \_, files <span class="hljs-keyword">in</span> os.walk(path):<br>            <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:<br>                <span class="hljs-keyword">if</span> file.endswith(<span class="hljs-string">&quot;.md&quot;</span>):<br>                    file\_path = os.path.join(root, file)<br>                    process\_single\_file(file\_path, create\_backup, image\_prefix)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error: Path does not exist: <span class="hljs-subst">&#123;path&#125;</span>&quot;</span>, file=sys.stderr)<br><br><span class="hljs-keyword">if</span> \_\_name\_\_ == <span class="hljs-string">&quot;\_\_main\_\_&quot;</span>:<br>    parser = argparse.ArgumentParser(description=<span class="hljs-string">&quot;Convert Obsidian/Hexo Markdown for publishing.&quot;</span>)<br>    parser.add\_argument(<span class="hljs-string">&quot;paths&quot;</span>, metavar=<span class="hljs-string">&quot;PATH&quot;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">str</span>, nargs=<span class="hljs-string">&#x27;+&#x27;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;One or more paths to markdown files or directories to process.&quot;</span>)<br>    parser.add\_argument(<span class="hljs-string">&quot;--image-prefix&quot;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">str</span>, default=<span class="hljs-string">&quot;/images/&quot;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;The absolute path prefix for image links from the site root. Default: /images/&quot;</span>)<br>    parser.add\_argument(<span class="hljs-string">&quot;--no-backup&quot;</span>, action=<span class="hljs-string">&quot;store\_false&quot;</span>, dest=<span class="hljs-string">&quot;create\_backup&quot;</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&quot;Disable the creation of .bak backup files.&quot;</span>)<br>    args = parser.parse\_args()<br>    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> args.paths:<br>        process\_path(path, args.create\_backup, args.image\_prefix)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\\nConversion process finished.&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥å°è£…ä¸€åˆ‡çš„æ€»æŒ‡æŒ¥-shell-è„šæœ¬">ç¬¬ä¸‰æ­¥ï¼šå°è£…ä¸€åˆ‡çš„â€œæ€»æŒ‡æŒ¥â€â€”â€”Shell è„šæœ¬</h3><p>ä¸ºäº†å®ç°â€œä¸€é”®å‘å¸ƒâ€ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ª shell è„šæœ¬æ¥è°ƒç”¨ Pythonè„šæœ¬ï¼Œå¹¶æ‰§è¡Œæ‰€æœ‰ Hexo å‘½ä»¤ã€‚</p><p>åœ¨ä½ çš„åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>publish.sh</code>çš„æ–‡ä»¶ï¼Œå¹¶ç²˜è´´ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># publish.sh - A smart script to convert, clean, generate, and deploy the Hexo blog.</span><br><br><span class="hljs-comment"># Stop the script immediately if any command fails.</span><br><span class="hljs-built_in">set</span> -e<br><br><span class="hljs-comment"># --- Configuration ---</span><br>PYTHON\_SCRIPT=<span class="hljs-string">&quot;converter.py&quot;</span> <span class="hljs-comment"># ç¡®ä¿è¿™ä¸ªæ–‡ä»¶åå’Œä½ çš„Pythonè„šæœ¬æ–‡ä»¶åä¸€è‡´</span><br>SOURCE\_DIR=<span class="hljs-string">&quot;source/\_posts/&quot;</span><br>IMAGE\_PREFIX=<span class="hljs-string">&quot;/images/&quot;</span><br><br><span class="hljs-comment"># --- ANSI Color Codes ---</span><br>GREEN=<span class="hljs-string">&#x27;\\033\[0;32m&#x27;</span><br>YELLOW=<span class="hljs-string">&#x27;\\033\[1;33m&#x27;</span><br>CYAN=<span class="hljs-string">&#x27;\\033\[0;36m&#x27;</span><br>NC=<span class="hljs-string">&#x27;\\033\[0m&#x27;</span> <span class="hljs-comment"># No Color</span><br><br><span class="hljs-comment"># --- Argument Parsing Logic ---</span><br><span class="hljs-keyword">while</span> \[\[ <span class="hljs-variable">$#</span> -gt 0 ]]; <span class="hljs-keyword">do</span><br>    key=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-variable">$key</span> <span class="hljs-keyword">in</span><br>        -s|--<span class="hljs-built_in">source</span>) SOURCE_DIR=<span class="hljs-string">&quot;<span class="hljs-variable">$2</span>&quot;</span>; <span class="hljs-built_in">shift</span>; <span class="hljs-built_in">shift</span> ;;<br>        -i|--image-prefix) IMAGE\_PREFIX=<span class="hljs-string">&quot;<span class="hljs-variable">$2</span>&quot;</span>; <span class="hljs-built_in">shift</span>; <span class="hljs-built_in">shift</span> ;;<br>        *) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Unknown option: &lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;1&quot;</span>; <span class="hljs-built_in">exit</span> 1 ;;<br><span class="hljs-keyword">esac</span><br><span class="hljs-keyword">done</span><br>\# \-\-\- Main Script Logic \-\-\-<br><span class="hljs-built_in">echo</span> \-e <span class="hljs-string">&quot;&lt;/span&gt;&#123;YELLOW&#125;&gt;&gt;&gt; Step 1: Converting Markdown files...&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\&#123;NC\&#125;&quot;</span><br><span class="hljs-built_in">echo</span> \-e <span class="hljs-string">&quot;&lt;/span&gt;&#123;CYAN&#125;Source:           &lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\&#123;SOURCE\_DIR\&#125;&lt;/span&gt;&#123;NC&#125;&quot;</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;CYAN&#125;</span>Image Prefix:     &lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;IMAGE\\\_PREFIX\\&#125;&lt;/span&gt;&#123;NC&#125;&quot;</span><br><br><span class="hljs-keyword">if</span> \[ ! -f <span class="hljs-string">&quot;<span class="hljs-variable">$PYTHON_SCRIPT</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;Error: Python script &#x27;<span class="hljs-variable">$PYTHON</span>\_SCRIPT&#x27; not found.&quot;</span><br>    <span class="hljs-built_in">exit</span> 1<br><span class="hljs-keyword">fi</span><br>python <span class="hljs-string">&quot;<span class="hljs-variable">$PYTHON_SCRIPT</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$SOURCE</span>\_DIR&quot;</span> --image-prefix <span class="hljs-string">&quot;&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;IMAGE\\\_PREFIX&quot;</span><br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;&lt;/span&gt;&#123;GREEN&#125;--- Markdown conversion complete.&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;NC\\&#125;&quot;</span><br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;\\\\n&lt;/span&gt;&#123;YELLOW&#125;&gt;&gt;&gt; Step 2: Cleaning old Hexo files...&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;NC\\&#125;&quot;</span><br>hexo clean<br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;&lt;/span&gt;&#123;GREEN&#125;--- Clean complete.&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;NC\\&#125;&quot;</span><br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;\\\\n&lt;/span&gt;&#123;YELLOW&#125;&gt;&gt;&gt; Step 3: Generating new site files...&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;NC\\&#125;&quot;</span><br>hexo g<br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;&lt;/span&gt;&#123;GREEN&#125;--- Generation complete.&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;NC\\&#125;&quot;</span><br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;\\\\n&lt;/span&gt;&#123;YELLOW&#125;&gt;&gt;&gt; Step 4: Deploying to GitHub Pages...&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;NC\\&#125;&quot;</span><br>hexo d<br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;&lt;/span&gt;&#123;GREEN&#125;--- Deployment complete.&lt;span class=&quot;</span>math-inline<span class="hljs-string">&quot;&gt;\\&#123;NC\\&#125;&quot;</span><br><span class="hljs-built_in">echo</span> \\-e <span class="hljs-string">&quot;\\\\n&lt;/span&gt;&#123;GREEN&#125;âœ… All steps completed successfully! Your blog has been published.<span class="hljs-variable">$&#123;NC&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure><p><strong>åˆ«å¿˜äº†</strong>ç»™è¿™ä¸ªè„šæœ¬èµ‹äºˆæ‰§è¡Œæƒé™ï¼ˆåªéœ€åšä¸€æ¬¡ï¼‰ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x publish.sh<br></code></pre></td></tr></table></figure></p><h3 id="ä½ çš„ç»ˆæå·¥ä½œæµ">ä½ çš„ç»ˆæå·¥ä½œæµ</h3><p>ç°åœ¨ï¼Œä»å†™ä½œåˆ°å‘å¸ƒçš„å®Œæ•´æµç¨‹è¢«ç®€åŒ–ä¸ºäº†ä¸‰ä¸ªç®€å•æ­¥éª¤ï¼š 1.<strong>å†™ä½œ</strong>ï¼šåœ¨ Obsidian ä¸­è‡ªç”±åœ°å†™ä½œï¼Œä½¿ç”¨ä½ æœ€å–œæ¬¢çš„<code>![...](/images/...)</code> è¯­æ³•æ’å…¥å›¾ç‰‡ï¼Œç”¨æ ‡å‡† LaTeX ä¹¦å†™å…¬å¼ã€‚2. <strong>åŒæ­¥</strong>ï¼šå°†å†™å¥½çš„ <code>.md</code>æ–‡ä»¶å’Œç›¸å…³å›¾ç‰‡åˆ†åˆ«æ”¾å…¥ä½  Hexo é¡¹ç›®çš„ <code>source/_posts/</code> å’Œ<code>source/images/</code> ç›®å½•ã€‚ 3.<strong>å‘å¸ƒ</strong>ï¼šåœ¨ä½ çš„åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./publish.sh<br></code></pre></td></tr></table></figure>ä¸€åˆ‡éƒ½å°†è‡ªåŠ¨å®Œæˆã€‚å¦‚æœä½ æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œæ¯”å¦‚å¤„ç†è‰ç¨¿ç®±æˆ–ä½¿ç”¨ä¸åŒçš„å›¾ç‰‡ç›®å½•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å‚æ•°ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./publish.sh -s <span class="hljs-built_in">source</span>/_drafts/ -i /assets/<br></code></pre></td></tr></table></figure></p><h3 id="ç»“è¯­">ç»“è¯­</h3><p>é€šè¿‡ç»“åˆ Hexo çš„æ­£ç¡®é…ç½®ã€ä¸€ä¸ªæ™ºèƒ½çš„ Python è½¬æ¢è„šæœ¬å’Œä¸€ä¸ªè‡ªåŠ¨åŒ–çš„Shell å‘å¸ƒè„šæœ¬ï¼Œæˆ‘ä»¬æœ€ç»ˆæ‰“é€šäº† Obsidian å’Œ Hexoä¹‹é—´çš„â€œä»»ç£äºŒè„‰â€ã€‚è¿™å¥—å·¥ä½œæµå°†æ‰€æœ‰å¤æ‚æ€§éƒ½å°è£…åœ¨äº†å·¥å…·èƒŒåï¼Œè®©æˆ‘ä»¬å¯ä»¥é‡æ–°ä¸“æ³¨äºæœ€é‡è¦çš„äº‹â€”â€”æ€è€ƒä¸åˆ›ä½œã€‚</p><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1"class="footnote-text"><span>https://zhuanlan.zhihu.com/p/392994381<a href="#fnref:1" rev="footnote" class="footnote-backref">â†©ï¸</a></span></span></li></ol></div></section>]]></content>
    
    
    
    <tags>
      
      <tag>#Hexo</tag>
      
      <tag>#Obsidian</tag>
      
      <tag>#MathJax</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-1</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-1/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-1/</url>
    
    <content type="html"><![CDATA[<p><strong>äººå·¥æ™ºèƒ½</strong>ï¼šæ¨¡æ‹Ÿäººç±»çš„æ™ºèƒ½<strong>æœºå™¨å­¦ä¹ </strong>ï¼šä¸æ˜¾å¼ç¼–ç¨‹æ¥å®ç°<strong>æ·±åº¦å­¦ä¹ </strong>ï¼šä½¿ç”¨ç¥ç»ç½‘ç»œ</p><p>å¯¹äºæ·±åº¦å­¦ä¹ æ€»æ˜¯èƒ½æ‰¾åˆ°ä¸€äº›amazingçš„ä¾‹å­ï¼ŒåŒæ—¶ä¹Ÿæœ‰ä¸€äº›å¤±è´¥çš„ä¾‹å­ã€‚</p><p>æ·±åº¦å­¦ä¹ æ˜¯åœ¨æ•°æ®ä¸­<strong>è·å–é«˜åº¦æŠ½è±¡</strong>çš„ç‰¹å¾ï¼Œä¸»è¦ä½¿ç”¨ç¥ç»ç½‘ç»œã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­å®ç°çš„åŠŸèƒ½ç±»ä¼¼äºåæ ‡ç³»å˜æ¢ã€‚å¯¹äºåŒä¸€ä¸ªé—®é¢˜è¿›è¡Œå˜æ¢å¯ä»¥è¿›è¡Œä¸åŒçš„å¤„ç†ã€‚åœ¨æœºå™¨å­¦ä¹ è¿‡ç¨‹ä¸­çš„è§„åˆ™ç³»ç»Ÿä»ç„¶æ˜¯å¾ˆé‡è¦çš„ã€‚</p><p>æ·±åº¦å­¦ä¹ çš„è¡¨ç¤ºä¸ºè®¡ç®—å›¾</p><h3 id="framework">Framework</h3><p>åœ¨å­¦ä¹ ç®—æ³•ä¸­ä¸€å®šè¦æŒ‡å®šå‡½æ•°æ—ï¼Œç„¶åä½¿ç”¨æ•°æ®æ¥æ‹Ÿåˆå‡½æ•°æ—ã€‚è¦æ‰¾å‡º<strong>æœ€ä¼˜çš„å‡½æ•°æ—</strong>ã€‚ä¸åŒçš„æœºå™¨å­¦ä¹ æ¨¡å‹çš„åŒºåˆ«ä¸»è¦åœ¨äº<strong>å‡è®¾ç©ºé—´</strong>ï¼ˆå€™é€‰å‡½æ•°æ—ï¼‰çš„ä¸åŒã€‚</p><p>è¿‡æ‹Ÿå’Œåœ¨æŒ‡å®šå‡½æ•°æ—æ—¶å·²ç»ç¡®å®šã€‚</p><p>æ³›åŒ–è¯¯å·®å…¬å¼ï¼š <span class="math display">$$\varepsilon_{test} \leq \hat{\varepsilon}_{train} +\sqrt{\frac{complexity}{n}}$$</span> è¦æ±‚ï¼šè®­ç»ƒè¯¯å·®å°ï¼Œæ¨¡å‹å¤æ‚åº¦å°ï¼Œæ•°æ®é‡å¤§<strong>å½“ä¸”ä»…å½“éœ€è¦çš„æ—¶å€™æ‰å¢åŠ æ¨¡å‹å¤æ‚åº¦</strong></p><h3 id="model">Model</h3><p><span class="math display">$$\arg \min O(D;\theta) = \sum_{i=1}^{N} L(y_i, f(x_i);\theta) +\Omega(\theta)$$</span> ä¸Šè¿°å…¬å¼è¦æ±‚ï¼šåœ¨è®­ç»ƒæ ·æœ¬ä¸Šé¢„æµ‹å€¼ä¸çœŸå®å€¼çš„è¯¯å·®å°½å¯èƒ½å°ã€‚</p><p>å¯¹äºåˆ†ç±»é—®é¢˜è€Œè¨€ï¼Œç»å¸¸ä½¿ç”¨çš„æ˜¯äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼ˆlogisticï¼‰å’ŒhingeæŸå¤±å‡½æ•°ã€‚</p><p><spanclass="math inline"><em>Î©</em>(<em>Î¸</em>)</span>æ˜¯æƒ©ç½šé¡¹ï¼Œå¸Œæœ›æ¨¡å‹å°½é‡ç®€å•ã€‚åœ¨ä½¿å¾—<spanclass="math inline"><em>Î¸</em></span>å°½é‡å°çš„è¿‡ç¨‹ä¸­ï¼ŒæŸäº›ç‰¹å¾çš„æƒé‡ä¼šå˜ä¸º0ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ç‰¹å¾é€‰æ‹©ã€‚åŒæ—¶ä¹Ÿå¯ä»¥å‡å°‘æ¨¡å‹çš„å¤æ‚æ€§ã€‚</p><p><strong>å­¦ä¹ ç±»ä¼¼äºç»Ÿè®¡ä¸­çš„å‚æ•°ä¼°è®¡</strong></p><p>![[{65C91395-95B8-4EF2-8AF6-3F86705FD81B}.png]]</p><p>æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•ã€‚</p><p>å…·ä½“ä¾‹å­ï¼šçº¿æ€§å›å½’</p><p><span class="math display">$$O(D;\theta) = \sum_{i=1}^{N} (y_i - \theta^T x_i)^2 + \lambda \theta^T\theta = (Y - X\theta)^T (Y - X\theta) + \lambda \theta^T \theta$$</span> ä¸Šè¿°å…¬å¼æ˜¯å…³äº<spanclass="math inline"><em>Î¸</em></span>çš„äºŒæ¬¡å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡æ±‚å¯¼å¾—åˆ°æœ€ä¼˜è§£ã€‚[[matrixcookbook.pdf]]<span class="math display">$$\frac{\partial O(D;\theta)}{\partial \theta} = -2 X^T (Y - X\theta) + 2\lambda \theta = 0$$</span> <spanclass="math display"><em>Î¸Ì‚</em>â€„=â€„(<em>X</em><sup><em>T</em></sup><em>X</em>â€…+â€…<em>Î»</em><em>I</em>)<sup>âˆ’1</sup><em>X</em><sup><em>T</em></sup><em>Y</em></span>ä½†æ˜¯ä¸Šè¿°ç®—æ³•çš„å¤æ‚æ€§ä¸º<spanclass="math inline"><em>O</em>(<em>n</em><sup>3</sup>)</span>ï¼Œä¸é€‚ç”¨äºå¤§æ•°æ®é›†ã€‚åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œé€šå¸¸ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•ã€‚</p><p><strong>Logistic Regression</strong></p><p><span class="math display">$$O(D;\theta) = \sum_{i=1}^{n} \log(1 + \exp(-y_i \theta^T x_i)) + \lambda||\theta||_{1} = F(D;\theta) + \lambda ||\theta||_{1}$$</span> è¿™é‡Œä½¿ç”¨çš„æ˜¯è¿‘ç«¯æ¢¯åº¦ä¸‹é™æ³• <em>proximal gradientdescent</em>ã€‚å…¶ä¸­çš„1-èŒƒæ•°æ˜¯å„ä¸ªåˆ†é‡çš„ç»å¯¹å€¼ä¹‹å’Œã€‚<ahref="https://www.zhihu.com/tardis/zm/art/82622940?source_id=1005">æœºå™¨å­¦ä¹ | è¿‘ç«¯æ¢¯åº¦ä¸‹é™æ³• (proximal gradient descent)</a>åœ¨ä¸€äº›ä¸å¯å¯¼çš„æƒ…å†µä¸‹å¦‚hingeæŸå¤±å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨æ¬¡æ¢¯åº¦ã€‚</p><p><strong>Softmax Regression</strong></p><p>å®ç°å¤šåˆ†ç±»é—®é¢˜ï¼Œè®¡ç®—æ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡å³å¯ï¼Œå¯¹äºæŸä¸ªæ ·æœ¬è¿›è¡Œå¤šæ¬¡æ‰“åˆ†ï¼Œå–æœ€é«˜åˆ†å¯¹åº”çš„ç±»åˆ«ã€‚</p><p>Softmax Function: [[Deep Learning Lecture-2#^b5bcbb]] <spanclass="math display">$$P(y|x,\theta) = \frac{\exp(\theta_y^T x)}{\sum_{r=1}^{C}\exp(\theta_{r}^T x)}$$</span>çº¿æ€§æ¨¡å‹ï¼Œç”¨è¶…å¹³é¢å¯¹æ ·æœ¬è¿›è¡Œæ‰“åˆ†ï¼Œç„¶åä½¿ç”¨softmaxå‡½æ•°è¿›è¡Œå½’ä¸€åŒ–ã€‚</p><p><span class="math display">$$O(D;\theta) = -\sum_{i=1}^{n} \log P(y_i|x_i;\theta) + \lambda||\theta||_{1}$$</span>ä¸Šè¿°å¼å­å…¶å®æ˜¯å¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼Œæœ€å¤§åŒ–å¯¹æ•°ä¼¼ç„¶å‡½æ•°ç­‰ä»·äºæœ€å°åŒ–äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚</p><h4 id="aproximation-and-estimation">Aproximation and Estimation</h4><p>å‡è®¾ç©ºé—´åªèƒ½è¡¨ç°ä¸€ä¸ªæœ‰é™çš„å‡½æ•°é›†åˆï¼Œæœ‰æ—¶å€™çœŸå€¼å‡½æ•°ä¸ä¸€å®šåœ¨å‡è®¾ç©ºé—´ä¸­ã€‚è¿™æ—¶å€™å‡è®¾ç©ºé—´ä¸­æœ€å¥½çš„å‡½æ•°ä¸çœŸå€¼å‡½æ•°ä¹‹é—´çš„å·®è·ç§°ä¸º<strong>è¿‘ä¼¼è¯¯å·®</strong><em>ApproximationError</em>ã€‚å­¦ä¹ å¾—åˆ°çš„å‡½æ•°ä¸ç©ºé—´ä¸­æœ€å¥½çš„å‡½æ•°çš„è¯¯å·®ä¸º<strong>ä¼°è®¡è¯¯å·®</strong><em>Estimation Error</em>ã€‚</p><h3 id="model-selection">Model Selection</h3><p><em>All models are wrong but some are useful.</em></p><p>CASH: Combined Algorithm Selection and Hyperparameter optimizationç›®æ ‡æ˜¯ï¼šé€‰æ‹©æœ€å¥½çš„æ¨¡å‹å’Œè¶…å‚æ•° <spanclass="math display"><em>A</em><sub><em>Î»</em><sup>*</sup></sub><sup>*</sup>â€„=â€„argâ€†min<sub><em>A</em>â€„âˆˆâ€„ğ’œ</sub>min<sub><em>Î»</em>â€„âˆˆâ€„<em>Î›</em><sup>(<em>i</em>)</sup></sub>â„’(<em>A</em><sub><em>Î»</em></sub><sup>(<em>i</em>)</sup>,â€†<em>D</em><sub><em>t</em><em>r</em><em>a</em><em>i</em><em>n</em></sub>,â€†<em>D</em><sub><em>v</em><em>a</em><em>l</em><em>i</em><em>d</em></sub>)</span></p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-3</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-3/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-3/</url>
    
    <content type="html"><![CDATA[<h2 id="convolutional-neural-networks">Convolutional NeuralNetworks</h2><p>å·ç§¯ç½‘ç»œæœ€æ—©æ˜¯ç”¨æ¥å¤„ç†å›¾åƒçš„é—®é¢˜ã€‚ç›®å‰è¾ƒä¸ºæˆåŠŸçš„ç ”ç©¶æ˜¯ç‰©ä½“è¯†åˆ«é—®é¢˜ï¼Œå¯¹äºç‰©ä½“ä¹‹é—´çš„å…³ç³»æ¨æ–­ä¾ç„¶æ˜¯è®¡ç®—æœºè§†è§‰çš„å‰æ²¿é¢†åŸŸã€‚</p><p>åœ¨ç”Ÿç‰©çš„ç ”ç©¶ä¸­ï¼Œå­˜åœ¨<strong>æ„Ÿå—é‡</strong><em>receptivefield</em>çš„æ¦‚å¿µï¼Œè¿™æ˜¯æŒ‡ç¥ç»å…ƒå¯¹äºè¾“å…¥çš„å±€éƒ¨åŒºåŸŸçš„æ•æ„Ÿç¨‹åº¦ã€‚åœ¨å·ç§¯ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¼•å…¥äº†è¿™ä¸ªæ¦‚å¿µã€‚ç›¸é‚»çš„ç¥ç»å…ƒå¤„ç†çš„æ˜¯ç›¸é‚»çš„å›¾åƒåŒºåŸŸï¼Œè¿™æ ·çš„è®¾è®¡ä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ•æ‰åˆ°å›¾åƒçš„ç©ºé—´ç»“æ„ã€‚åœ¨æ¨¡æ‹Ÿäººç±»çš„è§†è§‰ç³»ç»Ÿä¸­ï¼Œé‡è¦çš„æ˜¯<strong>æå–ä¸åŒç¨‹åº¦çš„ç‰¹å¾</strong>ï¼Œè¿™å°±æ˜¯å·ç§¯ç½‘ç»œçš„æ ¸å¿ƒæ€æƒ³ã€‚</p><p>åœ¨MLPä¸­ï¼Œç”±äºå¯¹äºåŸå›¾åƒåƒç´ è¿›è¡Œå±•å¼€ï¼Œä¼šæŸå¤±éƒ¨åˆ†çš„ç©ºé—´ä¿¡æ¯ã€‚åœ¨å¤„ç†è§†è§’ã€å…‰ç…§çš„å˜åŒ–æ—¶ï¼ŒMLPçš„æ•ˆæœä¼šå˜å·®ã€‚</p><p>![[{71895E3A-0EFA-438D-8E6C-EDBD4A337F5A}.png]]</p><p>ä»å·¦åˆ°å³ï¼Œé€æ­¥æå–çš„æ˜¯ä»è¾ƒä½åˆ°è¾ƒé«˜çš„å±‚æ¬¡ç‰¹å¾ã€‚åœ¨ä¸åŒçš„ä»»åŠ¡ä¸­ä½¿ç”¨ä¸åŒçš„ç‰¹å¾ã€‚åœ¨è¯†åˆ«äººç‰©ä¸­ï¼Œåº”è¯¥ä½¿ç”¨è¾ƒé«˜å±‚æ¬¡çš„ç‰¹å¾ã€‚</p><h5 id="local-connectivity">Local Connectivity</h5><p>æ¯ä¸€å±‚çš„ç¥ç»å…ƒåªè¿æ¥åˆ°ä¸Šä¸€å±‚çš„å±€éƒ¨åŒºåŸŸã€‚å…·ä½“çš„è¿æ¥æ–¹å¼ä¸ºï¼šæ¯ä¸€ä¸ªç¥ç»å…ƒåªå…³æ³¨ä¸Šä¸€å±‚å¯¹åº”åŒºåŸŸçš„éƒ¨åˆ†ç¥ç»å…ƒã€‚</p><h5 id="parameter-sharing">Parameter Sharing</h5><p>ä¸€ä¸ªç¥ç»å…ƒå¯¹åº”çš„æŸç»„å‚æ•°ä»£è¡¨çš„æ˜¯æŸç§ç‰¹å¾ï¼Œæˆ‘ä»¬è®¤ä¸ºæå–çš„ç‰¹å¾çš„åœ¨ä¸åŒçš„ä½ç½®æ˜¯ä¸€æ ·çš„ã€‚æ˜¯ä¸€ç§<strong>å¹³ç§»ä¸å˜æ€§</strong>ã€‚</p><h4 id="convolution">Convolution</h4><p><span class="math inline"><em>f</em></span>æ˜¯è¾“å…¥çš„å›¾åƒï¼Œ<spanclass="math inline"><em>g</em></span>æ˜¯å·ç§¯æ ¸ï¼Œå·ç§¯æ“ä½œå®šä¹‰ä¸ºï¼š<em>Continuous function</em> : <spanclass="math display">(<em>f</em>â€…*â€…<em>g</em>)(<em>t</em>)â€„=â€„âˆ«<sub>âˆ’âˆ</sub><sup>âˆ</sup><em>f</em>(<em>Ï„</em>)<em>g</em>(<em>t</em>â€…âˆ’â€…<em>Ï„</em>)<em>d</em><em>Ï„</em></span><em>Discrete function</em> : <span class="math display">$$(f*g)[n] = \sum_{m=-\infty}^{\infty} f[m]g[n-m]$$</span> ä¸Šè¿°æ“ä½œçš„ç›®çš„ä¸ºå¯¹äºè¾“å…¥å‡½æ•°</p><h5 id="cross-correlation">Cross Correlation</h5><p>äº’ç›¸å…³ç”¨æ¥åˆ†æä¸¤ä¸ªä¿¡å·çš„ç›¸ä¼¼æ€§ï¼Œå®šä¹‰ä¸ºï¼š <em>Continous function</em>: <span class="math display">$$(f\star g)(t) = \int_{-\infty}^{\infty} \overline{f(\tau)}g(t+\tau)d\tau$$</span> <em>Discrete function</em> : <span class="math display">$$(f\star g)[n] = \sum_{m=-\infty}^{\infty} \overline {f[m]}g[n+m]$$</span> å¯¹äºå·ç§¯å’Œäº’ç›¸å…³çš„å…³ç³»ä¸ºï¼š <span class="math display">$$[f(t) \star g(t)] (t) = [\overline{f(-t)} * g(t)](t)$$</span> äº‹å®ä¸Šï¼Œåœ¨å·ç§¯ç½‘ç»œä¸­ä½¿ç”¨çš„æ˜¯äº’ç›¸å…³æ“ä½œã€‚</p><h5 id="notation">Notation</h5><ul><li>è¾“å…¥çš„å›¾ç‰‡ä¸€èˆ¬ä¸ºä¸‰å±‚ï¼Œåˆ†åˆ«ä¸ºRGBã€‚è¿™ä¸ª<em>Volume</em>æ˜¯ä¸€ä¸ªå¼ é‡<em>Tensor</em>ã€‚</li><li>å·ç§¯æ ¸çš„å¤§å°ä¸º<spanclass="math inline">5â€…Ã—â€…5â€…Ã—â€…3</span>ï¼ˆä¸¾ä¾‹ï¼‰ï¼Œå³3ä¸ªé€šé“ï¼Œæ¯ä¸ªé€šé“å¤§å°ä¸º<spanclass="math inline">5â€…Ã—â€…5</span>ã€‚ç„¶ååœ¨æ•´ä¸ªå›¾ç‰‡ä¸Šè¿›è¡Œå¹³ç§»ï¼Œè®¡ç®—å·ç§¯æ“ä½œã€‚ï¼ˆç±»ä¼¼äºå·ç§¯çš„å®šä¹‰ï¼‰</li><li>å·ç§¯çš„è®¡ç®—æ“ä½œä¸ºï¼šå·ç§¯æ ¸åœ¨å›¾ç‰‡ä¸Šå¹³ç§»ï¼Œè®¡ç®—å¯¹åº”ä½ç½®çš„ä¹˜ç§¯å’Œã€‚![[{7AC9125F-FA2D-42F9-B0CF-085ABFFB668F}.png]]ä¸Šé¢çš„å…¬å¼æ˜¯åœ¨ç§»åŠ¨åˆ°æŸä¸ªä½ç½®<spanclass="math inline">(<em>w</em>,â€†<em>h</em>)</span>çš„æ—¶å€™ï¼Œè®¡ç®—å¯¹åº”ä½ç½®çš„ä¹˜ç§¯å’Œã€‚ç„¶åå°†ç»“æœå­˜å‚¨åœ¨ä¸€ä¸ªæ–°çš„çŸ©é˜µä¸­ã€‚</li></ul><p><em>åœ¨å®é™…æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸è¦å°†å·ç§¯æ ¸åœ¨å›¾ç‰‡ä¸Šâ€œæ»‘åŠ¨â€ï¼ˆè¿™æ˜¯ä¸€ä¸ªä¸²è¡Œç®—æ³•ï¼‰ï¼Œå¯ä»¥ä¸ºæ¯ä¸€ä¸ªä¸ºæ¯ä¸€ä¸ªå±€åŸŸæ¥åˆ†é…ä¸€ä¸ªç¥ç»å…ƒï¼Œè¿™æ ·çš„æ“ä½œæ˜¯å¹¶è¡Œçš„ï¼Œå¯ä»¥åŠ é€Ÿè®¡ç®—ã€‚</em></p><p>å¾—åˆ°çš„æ˜¯ä¸€ä¸ªFeature Mapï¼Œè¿™ä¸ªFeatureMapæ˜¯ä¸€ä¸ªæ–°çš„å¼ é‡ï¼Œä½¿ç”¨6ä¸ªå·ç§¯æ ¸å¾—åˆ°çš„å›¾ç‰‡çš„ç‰¹å¾å›¾çš„å¤§å°ä¸º<spanclass="math inline">28â€…Ã—â€…28â€…Ã—â€…6</span>ã€‚<em>å¦‚ä½•è®¡ç®—çš„ï¼Ÿå‚æ•°é‡æ˜¯å¤šå°‘ï¼Ÿ</em>ä½¿ç”¨çš„å·ç§¯æ ¸æ•°é‡æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œå¯ä»¥è°ƒæ•´ã€‚</p><p>å¯¹äºä¸€ä¸ª<spanclass="math inline"><em>w</em>â€…*â€…<em>h</em>â€…*â€…<em>c</em></span>çš„è¾“å…¥ï¼Œä½¿ç”¨<spanclass="math inline"><em>k</em>â€…*â€…<em>k</em>â€…*â€…<em>c</em>â€…*â€…<em>d</em></span>ä¸ªå·ç§¯æ ¸ï¼Œå¾—åˆ°çš„è¾“å‡ºçš„ç‰¹å¾å›¾çš„å¤§å°ä¸º<spanclass="math inline">(<em>w</em>â€…âˆ’â€…<em>k</em>â€…+â€…1)â€…*â€…(<em>h</em>â€…âˆ’â€…<em>k</em>â€…+â€…1)â€…*â€…<em>d</em></span>ï¼Œå‚æ•°é‡ä¸º<spanclass="math inline">(<em>k</em>â€…*â€…<em>k</em>â€…*â€…<em>c</em>â€…+â€…1)â€…*â€…<em>d</em></span>ã€‚ä½†æ˜¯CNNåœ¨å®è·µè¿‡ç¨‹ä¸­çš„æ˜¾å­˜å ç”¨æ˜¯è¾ƒå¤§çš„ï¼Œå› ä¸ºéœ€è¦å­˜å‚¨ç‰¹å¾å›¾ã€‚</p><p>![[{7202EECA-CD25-4EE1-A5C9-02F0263C968C}.png]] #### Dilated&amp;Stride Convolution</p><p>åœ¨å·ç§¯æ“ä½œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ­¥é•¿æ¥è¿›è¡Œå·ç§¯æ“ä½œï¼Œè¿™æ ·çš„æ“ä½œä¼šæ”¹å˜è¾“å‡ºçš„å¤§å°ã€‚åœ¨DilatedConvolutionä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ‰©å¼ ç‡æ¥è¿›è¡Œå·ç§¯æ“ä½œã€‚æ‰©å¼ ç‡ä¸º1çš„æ—¶å€™<em>1-dilated</em>æ˜¯æ­£å¸¸çš„å·ç§¯æ“ä½œï¼Œæ‰©å¼ ç‡ä¸º2çš„æ—¶å€™ï¼Œå·ç§¯æ ¸çš„é—´éš”ä¸º2<em>2-dilated</em>ã€‚è¿™æ ·çš„æ“ä½œå¯ä»¥<strong>å¢åŠ å·ç§¯æ ¸çš„æ„Ÿå—é‡</strong>ï¼Œä½†æ˜¯å‡å°‘äº†è¾“å‡ºçš„å¤§å°ã€‚</p><p><em>Stride</em>æ˜¯å·ç§¯æ ¸çš„æ­¥é•¿ï¼Œå¯ä»¥è®©è¾“å‡ºçš„ç‰¹å¾å›¾è¿…é€Ÿå˜å°ã€‚å¯èƒ½å‡ºç°ä¸åŒ¹é…çš„æƒ…å†µï¼Œè¿™æ ·å¯ä»¥è¿›è¡Œ<em>Padding</em>æ˜¯åœ¨è¾¹ç¼˜å¡«å……0ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥ä¿æŒè¾“å‡ºçš„å¤§å°ã€‚</p><h5 id="activation-functions">Activation Functions</h5><p>åœ¨å·ç§¯ç½‘ç»œä¸­ï¼Œæ¿€æ´»å‡½æ•°å¯ä»¥ä½¿ç”¨ReLUå‡½æ•°ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥é¿å…æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ã€‚æœ‰æ—¶å€™ä½¿ç”¨çš„æ˜¯LeakyReLUå‡½æ•°ï¼Œè¿™æ ·çš„æ“ä½œåœ¨æŸäº›æ¨¡å‹ä¸­å¯ä»¥å‡å°‘ç¥ç»å…ƒæ­»äº¡çš„é—®é¢˜ã€‚ <spanclass="math display">$$LeakyReLU(x) = \begin{cases} x &amp; x&gt;0 \\ 0.01x &amp; x \leq 0\end{cases}$$</span></p><p>![[{CFAAFBDA-A81C-4931-9C2C-CBD64F40E29C}.png]]</p><h5 id="pooling">Pooling</h5><p>æ± åŒ–æ“ä½œä¸€èˆ¬æ˜¯ç”¨æ¥å‡å°‘ç©ºé—´å°ºå¯¸ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥å‡å°‘å‚æ•°é‡ï¼Œå‡å°‘è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚</p><ul><li>Max Poolingï¼šå–å±€éƒ¨åŒºåŸŸçš„æœ€å¤§å€¼</li><li>Average Poolingï¼šå–å±€éƒ¨åŒºåŸŸçš„å¹³å‡å€¼![[{01688551-C69C-4B62-8660-637A51409678}.png]]</li></ul><p><strong>Spatial PyramidPooling</strong>ï¼šå¯¹äºä¸åŒçš„é€šé“è¿›è¡Œæ± åŒ–æ“ä½œï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥å¢åŠ ç‰¹å¾çš„å¤šæ ·æ€§ã€‚è¿™æ˜¯ç”¨æ¥å‡å°‘å¤šå°ºåº¦é—®é¢˜çš„ã€‚åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå¤šå°ºåº¦æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç‰¹å¾ï¼Œä¾‹å¦‚åœ¨å¤§æ°”ç³»ç»Ÿã€æ°”å€™ç³»ç»Ÿä¸­ï¼Œæœ‰è¾ƒå¤§çš„æ°”æµå’Œè¾ƒå°éƒ¨åˆ†çš„æ¹æµã€‚</p><h3 id="back-propagation">Back Propagation</h3><p><ahref="https://www.youtube.com/watch?v=Ilg3gGewQ5U">Backpropagation,step-by-step | DL3</a></p><p>![[{1197B7EA-3F5B-40C9-8ADF-861B8AACBDC2}.png]]</p><p>åœ¨å·ç§¯ç½‘ç»œçš„å‰å‘ä¼ æ’­ä¸­æ¯ä¸€å±‚çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š <spanclass="math display"><em>z</em><sub><em>d</em></sub><sup>(<em>l</em>â€…+â€…1)</sup>â€„=â€„<em>a</em><sup>(<em>l</em>)</sup>â€…â‹†â€…<em>Î¸</em><sub><em>d</em></sub><sup>(<em>l</em>)</sup>â€…+â€…<em>b</em><sub><em>d</em></sub><sup>(<em>l</em>)</sup></span></p><p>åœ¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥è®¡ç®—ä¸€ä¸ª<spanclass="math inline">3â€…Ã—â€…3â€…Ã—â€…1</span>çš„å›¾åƒåœ¨ç»è¿‡ä¸€ä¸ª<spanclass="math inline">2â€…Ã—â€…2â€…Ã—â€…1</span>çš„å·ç§¯æ ¸å¾—åˆ°çš„<spanclass="math inline">2â€…Ã—â€…2â€…Ã—â€…1</span>çš„ç‰¹å¾å›¾çš„è®¡ç®—è¿‡ç¨‹ã€‚</p><ul><li>Consider single input channel <spanclass="math inline"><em>c</em>â€„=â€„1</span> : <spanclass="math display">$$\left[\begin{array}{ll}z_{11}^{(l+1)} &amp; z_{12}^{(l+1)} \\z_{21}^{(l+1)} &amp; z_{22}^{(l+1)}\end{array}\right]=\left[\begin{array}{lll}a_{11}^{(l)} &amp; a_{12}^{(l)} &amp; a_{13}^{(l)} \\a_{21}^{(l)} &amp; a_{22}^{(l)} &amp; a_{23}^{(l)} \\a_{31}^{(l)} &amp; a_{32}^{(l)} &amp; a_{33}^{(l)}\end{array}\right] \star\left[\begin{array}{ll}\theta_{11}^{(l)} &amp; \theta_{12}^{(l)} \\\theta_{21}^{(l)} &amp; \theta_{22}^{(l)}\end{array}\right]$$</span></li><li>Expand above to be clearer: <span class="math display">$$\left\{\begin{array}{l}z_{11}^{(l+1)}=a_{11}^{(l)} \theta_{11}^{(l)}+a_{12}^{(l)}\theta_{12}^{(l)}+a_{21}^{(l)} \theta_{21}^{(l)}+a_{22}^{(l)}\theta_{22}^{(l)} \\z_{12}^{(l+1)}=a_{12}^{(l)} \theta_{11}^{(l)}+a_{13}^{(l)}\theta_{12}^{(l)}+a_{22}^{(l)} \theta_{21}^{(l)}+a_{23}^{(l)}\theta_{22}^{(l)} \\z_{21}^{(l+1)}=a_{21}^{(l)} \theta_{11}^{(l)}+a_{22}^{(l)}\theta_{12}^{(l)}+a_{31}^{(l)} \theta_{21}^{(l)}+a_{32}^{(l)}\theta_{22}^{(l)} \\z_{22}^{(l+1)}=a_{22}^{(l)} \theta_{11}^{(l)}+a_{23}^{(l)}\theta_{12}^{(l)}+a_{32}^{(l)} \theta_{21}^{(l)}+a_{33}^{(l)}\theta_{22}^{(l)}\end{array}\right.$$</span></li></ul>å¯¹äºä¸Šè¿°çš„ä¾‹å­è®¡ç®—æ®‹å·®ç½‘ç»œçš„è¿‡ç¨‹ä¸ºï¼š $$<p>$$</p><p>ä¸å…¨è¿æ¥å±‚çš„è®¡ç®—å…¬å¼çš„ä¸åŒåœ¨äºï¼ŒCNNæ˜¯ä¸€ä¸ªå±€éƒ¨çš„è®¡ç®—è¿‡ç¨‹ï¼Œå³æ¯ä¸€ä¸ªç¥ç»å…ƒçš„è¾“å‡ºå€¼å¹¶ä¸ä¼šå¯¹åä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒäº§ç”Ÿå½±å“ã€‚</p><p>å¯¹äºä¸Šè¿°è®¡ç®—å¾—åˆ°çš„æ®‹å·®ï¼Œå¯ä»¥å†™æˆä¸€ä¸ªçŸ©é˜µï¼š <spanclass="math display">$$\delta^{(l)} = \left[\begin{array}{lll}\delta_{11}^{(l)} &amp; \cdots &amp; \delta_{1n}^{(l)} \\\vdots &amp; \ddots &amp; \vdots \\\delta_{m1}^{(l)} &amp; \cdots &amp; \delta_{mn}^{(l)}\end{array}\right]$$</span> åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å¾—åˆ°ï¼š <spanclass="math display">$$\left[\begin{array}{lll}\delta_{11}^{(l)} &amp; \delta_{12}^{(l)} &amp; \delta_{13}^{(l)} \\\delta_{21}^{(l)} &amp; \delta_{22}^{(l)} &amp; \delta_{23}^{(l)} \\\delta_{31}^{(l)} &amp; \delta_{32}^{(l)} &amp; \delta_{33}^{(l)}\end{array}\right]=\left[\begin{array}{cccc}0 &amp; 0 &amp; 0 &amp; 0 \\0 &amp; \delta_{11}^{(l+1)} &amp; \delta_{12}^{(l+1)} &amp; 0 \\0 &amp; \delta_{21}^{(l+1)} &amp; \delta_{22}^{(l+1)} &amp; 0 \\0 &amp; 0 &amp; 0 &amp; 0\end{array}\right] \star\left[\begin{array}{cc}\theta_{22}^{(l)} &amp; \theta_{21}^{(l)} \\\theta_{12}^{(l)} &amp; \theta_{11}^{(l)}\end{array}\right] \odot g^{\prime}\left(z^{(l)}\right)$$</span> æ¯”è¾ƒç´§å‡‘åœ°å†™å‡ºï¼š <spanclass="math display"><em>Î´</em><sup>(<em>l</em>)</sup>â€„=â€„<em>Î´</em><sup>(<em>l</em>â€…+â€…1)</sup>â€…â‹†â€…<em>r</em><em>o</em><em>t</em>180(<em>Î¸</em><sup>(<em>l</em>)</sup>)â€…âŠ™â€…<em>g</em><sup>â€²</sup>(<em>z</em><sup>(<em>l</em>)</sup>)</span>å…¶ä¸­<spanclass="math inline"><em>r</em><em>o</em><em>t</em>180</span>æ˜¯å¯¹å·ç§¯æ ¸è¿›è¡Œæ—‹è½¬180åº¦çš„æ“ä½œã€‚<span class="math inline">âŠ™</span>å¯¹åº”çš„æ˜¯ä¸¤ä¸ªçŸ©é˜µçš„é€ä¸ªå…ƒç´ ä¹˜</p><p>åœ¨æœ‰å¤šå¼ ç‰¹å¾å›¾çš„æƒ…å†µä¸‹ï¼ˆè¾“å‡ºæœ‰<spanclass="math inline"><em>d</em></span>ä¸ªé€šé“ï¼‰ï¼Œè¾“å…¥çš„å›¾åƒæœ‰<spanclass="math inline"><em>c</em></span>é€šé“ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°çš„è®¡ç®—è¿‡ç¨‹è¿›è¡Œæ‰©å±•ï¼Œå¾—åˆ°ï¼š<spanclass="math display"><em>Î´</em><sup>(<em>l</em>)</sup>â€„=â€„âˆ‘<sub><em>d</em></sub><em>Î´</em><sub><em>d</em></sub><sup>(<em>l</em>â€…+â€…1)</sup>â€…â‹†â€…<em>r</em><em>o</em><em>t</em>180(<em>Î¸</em><sup>(<em>l</em>)</sup>)â€…âŠ™â€…<em>g</em><sup>â€²</sup>(<em>z</em><sup>(<em>l</em>)</sup>)</span>åœ¨è®¡ç®—ç›®æ ‡å‡½æ•°å¯¹äºå‚æ•°çš„å¯¼æ•°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š <spanclass="math display">$$\frac{\partial J(\theta,b)}{\partial \theta_d^{(l)}} = \frac{\partialJ(\theta,b)}{\partial z_d^{(l+1)}} \frac{\partial z_d^{(l+1)}}{\partial\theta_d^{(l)}}= \delta_d^{(l+1)} \star a^{(l)}_d$$</span> å¯ä»¥æ›´åŠ è¯¦ç»†åœ°è®¡ç®—ï¼š <span class="math display">$$\begin{aligned}\frac{\partial J(\theta,b)}{\partial \theta_{i,j,k,d}^{(l)}} &amp;=\sum_{m,n} \frac{\partial J(\theta,b)}{\partial z_{m,n}^{(l+1)}}\frac{\partial z_{m,n}^{(l+1)}}{\partial \theta_{i,j,k,d}^{(l)}} \\&amp;= \sum_{m,n} \delta_{m,n}^{(l+1)} a_{m+i-1,n+j-1,k}^{(l)} \\&amp;= \delta_d^{(l+1)} \star a^{(l)}_d\end{aligned}$$</span> å¯¹äºåç½®é¡¹çš„è®¡ç®—è¿‡ç¨‹ä¸º <span class="math display">$$\frac{\partial J(\theta,b) }{\partial b_d^{(l)}} = \sum_{m,n}\frac{\partial J(\theta,b)}{\partial z_{m,n}^{(l+1)}} \frac{\partialz_{m,n}^{(l+1)}}{\partial b_d^{(l)}} = \sum_{m,n} \delta_{m,n}^{(l+1)}$$</span></p><p>ä»è€Œå¯ä»¥ä½¿ç”¨<strong>åŠ¨é‡çš„æ¢¯åº¦</strong>ä¸‹é™çš„æ–¹æ³•æ¥è¿›è¡Œå‚æ•°çš„æ›´æ–°ã€‚</p><h3 id="invariance-and-equivariance">Invariance and Equivariance</h3><p>å¯¹äºä¸åŒçš„ä»»åŠ¡ï¼Œæœ‰æ—¶å€™éœ€è¦ä¸å˜æ€§å’Œç­‰å˜æ€§ã€‚åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œå¯¹äºå›¾åƒçš„æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ç­‰æ“ä½œï¼Œç¥ç»ç½‘ç»œçš„è¾“å‡ºåº”è¯¥æ˜¯ä¸å˜çš„ã€‚åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œå¯ä»¥é€šè¿‡æ•°æ®å¢å¼ºçš„æ–¹æ³•æ¥è¿›è¡Œå¤„ç†ã€‚å¯¹äºç­‰å˜æ€§ï¼Œå¯ä»¥é€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œæ¥è¿›è¡Œå¤„ç†ã€‚CNNåœ¨è®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œå¼•å…¥æ± åŒ–å±‚<em>pooling</em>å¸Œæœ›è·å¾—ä¸å˜æ€§ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰è·å¾—å¾ˆå¥½çš„æ•ˆæœã€‚- <strong>Invariance</strong>ï¼šå¯¹äºè¾“å…¥çš„å˜åŒ–ï¼Œè¾“å‡ºä¸å˜ <spanclass="math display"><em>f</em>(<em>T</em>(<em>X</em>))â€„=â€„<em>f</em>(<em>x</em>)</span>- <strong>Equivariance</strong>ï¼šå¯¹äºè¾“å…¥çš„å˜åŒ–ï¼Œè¾“å‡ºä¹Ÿä¼šå‘ç”Ÿç›¸åº”çš„å˜åŒ–<spanclass="math display"><em>f</em>(<em>T</em>(<em>X</em>))â€„=â€„<em>T</em>(<em>f</em>(<em>x</em>))</span>åœ¨å®è·µä¸­ï¼Œæœ‰æ—¶å€™ä¼šæœ‰å™ªå£°ã€å½¢å˜ã€ç¿»è½¬ã€å…‰ç…§æ¡ä»¶ã€è§†è§’å˜åŒ–ã€é®æŒ¡ã€å°ºåº¦å˜åŒ–ã€ç±»å†…ç±»é—´å·®è·ã€å¥‡å¼‚ç­‰é—®é¢˜ã€‚</p><h4 id="data-augmentation">Data Augmentation</h4><p>åœ¨å®è·µä¸­ï¼Œå¯ä»¥é€šè¿‡æ•°æ®å¢å¼ºçš„æ–¹æ³•æ¥è¿›è¡Œå¤„ç†ã€‚å¯¹äºå›¾åƒçš„æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ã€ç¿»è½¬ç­‰æ“ä½œï¼Œå¯ä»¥å¢åŠ æ•°æ®çš„å¤šæ ·æ€§ã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®å¢å¼ºçš„æ–¹æ³•æ¥è¿›è¡Œè®­ç»ƒã€‚ç”¨è¿™æ ·çš„æ–¹æ³•æœŸæœ›è·å¾—ä¸€ç§ä¸å˜æ€§ã€‚</p><p>å¸¸ç”¨çš„æ–¹æ³•æœ‰ï¼šè£å‰ªã€æ—‹è½¬ã€ç¿»è½¬ã€ç¼©æ”¾ã€å¹³ç§»ã€ä»¿å°„å˜æ¢ã€å¼¹æ€§å˜æ¢ã€é¢œè‰²å˜æ¢ç­‰ã€‚CNNè¯†åˆ«ä¸»è¦ä½¿çš„æ˜¯çº¹ç†çš„è¯†åˆ«æ–¹æ³•ï¼Œå¸Œæœ›å°†äººç±»çš„å¯¹äºå½¢çŠ¶è¯†åˆ«çš„èƒ½åŠ›èå…¥åˆ°CNNä¸­ã€‚å¯ä»¥ä½¿ç”¨çš„æ•°æ®é›†ä¸º<em>Augmentationby Stylization</em>ï¼Œå¸Œæœ›è·å¾—æ¨¡å‹å¯¹äºçº¹ç†çš„ä¸å˜æ€§ã€‚CNNå¯¹ä¸Šä¸‹æ–‡æ˜¯æ•æ„Ÿçš„ï¼Œå¯¹äºç»å¸¸å‡ºç°åœ¨ä¸€èµ·çš„äº‹ç‰©ï¼ŒCNNå¯ä»¥å¾ˆå¥½åœ°è¿›è¡Œè¯†åˆ«ï¼Œä½†æ˜¯å¯¹äºä¸å¸¸è§çš„äº‹ç‰©ï¼ŒCNNçš„æ•ˆæœä¼šå˜å·®ã€‚ä¸€ç§æç«¯çš„æ–¹å¼æ˜¯å°†ä¸ç»å¸¸å‡ºç°çš„ä¸œè¥¿ç»„åˆåœ¨ä¸€èµ·ã€‚ç›®å‰çš„æ·±åº¦ç½‘ç»œä¸€å®šç¨‹åº¦ä¸Šåˆ©ç”¨äº†<em>spuriouscorrelation</em>ï¼Œä»è€Œè¿›è¡Œbench markåœ¨æ•°æ®é›†ä¸Šè¿‡æ‹Ÿå’Œã€‚</p><h4 id="architecture-revolution">Architecture Revolution</h4><h5 id="maga-making-convolutional-networks-shift-invariant-again">MAGAMaking convolutional networks shift-invariant again</h5><p>åœ¨CNNä¸­ï¼Œåœ¨å¹³ç§»è¿‡ç¨‹ä¸­ï¼Œç½‘ç»œå¾ˆéš¾è·å¾—å¹³ç§»ä¸å˜æ€§ã€‚åœ¨é‡‡ç”¨æ¨¡ç³Šä¹‹åçš„<em>pooling</em>å¯ä»¥è·å¾—ä¸€å®šç¨‹åº¦ä¸Šçš„å¹³ç§»ä¸å˜æ€§ã€‚</p><h5 id="capsule-network">Capsule Network</h5><p>CNNçš„ç¼ºç‚¹è¿˜æœ‰ï¼šä¸èƒ½ä¿æŒç‰©ä½“ä¹‹é—´çš„ç›¸å¯¹å…³ç³»ã€‚åœ¨åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¼ºè°ƒçš„æ˜¯ä¸å˜æ€§ï¼Œè€Œåœ¨ä¸€äº›ç»†ç²’åº¦è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œå¼ºè°ƒçš„æ˜¯ç­‰å˜æ€§ã€‚åœ¨CapsuleNetworkä¸­ï¼Œå¼•å…¥äº†èƒ¶å›Šçš„æ¦‚å¿µï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥ä¿æŒç‰©ä½“ä¹‹é—´çš„ç›¸å¯¹å…³ç³»ã€‚</p><h2 id="cnn-architectures">CNN Architectures</h2><h3 id="alexnet">AlexNet</h3><p>![[{382F2347-B42F-46CB-83DB-F25DDE49A91E}.png]]</p><ul><li>ä¸€èˆ¬ä¼šåœ¨è¾“å…¥å±‚ä½¿ç”¨è¾ƒå¤§çš„å·ç§¯æ ¸ï¼Œç„¶ååœ¨åé¢çš„å±‚ä½¿ç”¨è¾ƒå°çš„å·ç§¯æ ¸</li><li>é€šé“æ•°éšç€ç½‘ç»œé€æ¸å¢åŠ ç„¶åå‡å°‘</li><li>ç¬¬ä¸€æ¬¡ä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°</li><li>ä½¿ç”¨äº†å¤§é‡çš„æ•°æ®å¢å¼º<em>Data Augmentation</em></li><li>ä½¿ç”¨GPUè¿›è¡Œè®­ç»ƒ</li><li>é‡‡ç”¨SGD with momentum 0.9è¿›è¡Œè®­ç»ƒ</li><li>ä½¿ç”¨dropout 0.5ï¼Œä¸€èˆ¬åœ¨MLPå±‚éƒ½éœ€è¦ä½¿ç”¨dropout</li><li>ä½¿ç”¨0.01çš„å­¦ä¹ ç‡ï¼Œç„¶ååœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­é€æ¸å‡å°å­¦ä¹ ç‡ï¼Œå½“lossä¸å†ä¸‹é™çš„æ—¶ä½¿ç”¨å­¦ä¹ ç‡çš„0.1å€#### ZFNet</li></ul><p>åœ¨è¾“å…¥å±‚ä½¿ç”¨äº†æ›´å°çš„å·ç§¯æ ¸ï¼Œä¸€èˆ¬ä¸è¦ä½¿ç”¨å°çš„å·ç§¯æ ¸ï¼ˆæ›´å¤§çš„strideï¼‰ä¼šå¯¼è‡´ä¿¡æ¯çš„ä¸¢å¤±ã€‚åœ¨ä¸­é—´å±‚æ•°ä½¿ç”¨äº†æ›´å¤šçš„é€šé“æ•°ã€‚</p><h3 id="vggnet">VGGNet</h3><p>ç”¨æ›´å°çš„å·ç§¯æ ¸æ¥ä»£æ›¿è¾ƒå¤§çš„å·ç§¯æ ¸ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥å‡å°‘å‚æ•°é‡ï¼Œå¢åŠ ç½‘ç»œçš„æ·±åº¦ã€‚åœ¨VGGNetä¸­ï¼Œä½¿ç”¨äº†3ä¸ª<spanclass="math inline">3â€…Ã—â€…3</span>çš„å·ç§¯æ ¸æ¥ä»£æ›¿ä¸€ä¸ª<spanclass="math inline">7â€…Ã—â€…7</span>çš„å·ç§¯æ ¸ã€‚è¿™æ ·çš„æ“ä½œå¯ä»¥å¢åŠ ç½‘ç»œçš„æ·±åº¦ï¼Œå‡å°‘å‚æ•°é‡ã€‚<strong>ä¸€ä¸ªè¾ƒå¤§çš„æ„Ÿå—é‡å¯ä»¥é€šè¿‡å¤šä¸ªè¾ƒå°çš„æ„Ÿå—é‡æ¥ä»£æ›¿</strong>ã€‚ä½†æ˜¯ç°åœ¨åˆå‘ç°äº‹å®ä¸Šæ²¡æœ‰è¿™ä¹ˆå¥½çš„æ•ˆæœï¼Œæ‰€ä»¥ç°åœ¨åˆå¼€å§‹ä½¿ç”¨è¾ƒå¤§çš„å·ç§¯æ ¸ã€‚</p><p>é‡‡ç”¨äº†é¢„è®­ç»ƒçš„æ–¹æ³•ã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆåœ¨è¾ƒå°çš„æ•°æ®é›†ä¸Šè¿›è¡Œè¿‡æ‹Ÿå’Œï¼ˆåœ¨è¿™ä¸ªè®­ç»ƒé›†ä¸Šçš„æŸå¤±å‡½æ•°æ¥è¿‘0ï¼‰ï¼Œç„¶ååœ¨è¾ƒå¤§çš„æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒã€‚</p><p>åœ¨æ—©æœŸçš„ç½‘ç»œä¸­ï¼Œæ± åŒ–å±‚çš„ä½¿ç”¨æ˜¯è¾ƒå¤šçš„ï¼Œç°åœ¨å·²ç»å¾ˆå°‘ä½¿ç”¨ã€‚ ### NINNetwork in Network</p><p>åœ¨ä½¿ç”¨å…¨è¿æ¥å±‚æ—¶ï¼Œä¼šæœ‰è¾ƒå¤šçš„å‚æ•°ï¼ŒåŸºäºè¿™æ ·çš„æ€è·¯æå‡º<spanclass="math inline">1â€…Ã—â€…1</span>å·ç§¯è¿™ä¸ªæ“ä½œã€‚è¿™æ ·çš„æ“ä½œåªæ”¹å˜é€šé“æ•°ï¼Œä¸æ”¹å˜ç©ºé—´å°ºå¯¸ï¼Œé€šå¸¸åœ¨ä¸å¸Œæœ›æ”¹å˜ç©ºé—´å°ºå¯¸è€Œå¢å¤§é€šé“æ•°çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ã€‚</p><p>åœ¨ä½¿ç”¨å·ç§¯å¢åŠ æ­¥é•¿ã€ä½¿ç”¨<em>pooling</em>å±‚æ—¶å€™ï¼Œä¼šå¯¼è‡´ä¿¡æ¯çš„ä¸¢å¤±ã€‚åœ¨NINä¸­å¸Œæœ›è·å¾—ä¸€ä¸ªå°ºå¯¸å°ä½†æ˜¯é€šé“æ•°å¤šçš„ç‰¹å¾å›¾ã€‚åœ¨NINä¸­ä½¿ç”¨äº†<spanclass="math inline">1â€…Ã—â€…1</span>çš„å·ç§¯æ ¸æ¥å¢åŠ é€šé“æ•°ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨ç©ºé—´å…¨å±€æ± åŒ–ã€‚ä¾‹å¦‚ä¸€ä¸ª<spanclass="math inline">256â€…Ã—â€…6â€…Ã—â€…6</span>çš„ç‰¹å¾å›¾ï¼Œä½¿ç”¨<spanclass="math inline">6â€…Ã—â€…6</span>çš„å…¨å±€æ± åŒ–ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ª<spanclass="math inline">256â€…Ã—â€…1â€…Ã—â€…1</span>çš„ç‰¹å¾å›¾ã€‚</p><blockquote><p>[!NOTE] -ä¼ ç»ŸCNNæœ«å°¾é€šå¸¸ä½¿ç”¨å…¨è¿æ¥å±‚ï¼ˆFCï¼‰è¿›è¡Œåˆ†ç±»ï¼Œä½†å…¨è¿æ¥å±‚å‚æ•°é‡å¤§ï¼Œæ˜“è¿‡æ‹Ÿåˆã€‚- å…¨å±€æ± åŒ–å¯ç›´æ¥å°†ç‰¹å¾å›¾è½¬æ¢ä¸ºé€šé“ç»´åº¦çš„å‘é‡ï¼ˆå¦‚<spanclass="math inline">1â€…Ã—â€…1â€…Ã—â€…1024</span> <spanclass="math inline">â†’</span>1024ç»´å‘é‡ï¼‰ï¼Œå†æ¥ä¸€ä¸ªåˆ†ç±»å±‚ï¼Œå¤§å¹…å‡å°‘å‚æ•°ã€‚</p></blockquote><h4 id="googlenet">GoogLeNet</h4><p>![[{43BF44F4-D211-4165-AE84-257E702582A0}.png]]è¿™æ˜¯ä¸€ä¸ªè¾ƒä¸ºæ·±çš„ç½‘ç»œï¼Œåˆ å»äº†å…¨è¿æ¥å±‚ï¼Œå‚æ•°é‡æ˜¯è¾ƒå°çš„ã€‚ -å¼•å…¥Multi-passwayï¼Œä½¿ç”¨å¤šè·¯çš„å·ç§¯æ ¸æ¥æå–ç‰¹å¾ã€‚é‡‡ç”¨äº†ç‰¹å¾å¢å¹¿<em>FeatureAugmentation</em>çš„æ–¹æ³•ã€‚ -åœ¨ç‰¹å¾å›¾é€šé“æ•°ç›®ä¸ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨paddingçš„æ–¹æ³•ã€‚</p><p>![[{6F8AFF72-4C3D-4FAD-8FC9-90F7FED6E8B2}.png]]</p><p>![[{39D210C3-7C1B-4913-AC78-12E71A8FD13B}.png]]</p><p>![[{E3B121C1-5782-4762-A983-042799DA4ED9}.png]]</p><p>ä½¿ç”¨è®¡ç®—é‡è¶Šæ¥è¶Šå°çš„å·ç§¯æ ¸ï¼Œä½¿ç”¨è®¡ç®—é‡è¶Šæ¥è¶Šå°çš„å·ç§¯æ ¸ï¼Œä½¿ç”¨è¶Šæ¥è¶Šå¤šçš„å±‚æ•°ï¼Œä½¿ç”¨è¶Šæ¥è¶Šå¤šçš„é€šé“æ•°ã€‚</p><h4 id="highway-network">Highway Network</h4><p>åœ¨å¹³å¦çš„ç½‘ç»œé€šè·¯ä¸­ï¼Œå¯èƒ½æœ‰ä¿¡æ¯é€šè·¯ç“¶é¢ˆé—®é¢˜ã€‚åœ¨HighwayNetworkä¸­ï¼Œå¼•å…¥äº†é—¨æ§æœºåˆ¶ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥ä½¿å¾—ä¿¡æ¯çš„æµåŠ¨æ›´åŠ é¡ºç•…ã€‚ <spanclass="math display"><em>y</em>â€„=â€„<em>H</em>(<em>x</em>,â€†<em>W</em><sub><em>H</em></sub>)<em>T</em>(<em>x</em>,â€†<em>W</em><sub><em>T</em></sub>)â€…+â€…<em>x</em>(1â€…âˆ’â€…<em>T</em>(<em>x</em>,â€†<em>W</em><sub><em>T</em></sub>))</span>å…¶ä¸­<spanclass="math inline"><em>H</em>(<em>x</em>,â€†<em>W</em><sub><em>H</em></sub>)</span>æ˜¯ä¸€ä¸ªMLPï¼Œ<spanclass="math inline"><em>T</em>(<em>x</em>,â€†<em>W</em><sub><em>T</em></sub>)</span>æ˜¯ä¸€ä¸ªé—¨æ§å‡½æ•°ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥ä½¿å¾—ä¿¡æ¯çš„æµåŠ¨æ›´åŠ é¡ºç•…ã€‚</p><ul><li><p><span class="math inline"><em>x</em></span>: è¾“å…¥å‘é‡ã€‚</p></li><li><p><spanclass="math inline"><em>H</em>(<em>x</em>,â€†<em>W</em><sub><em>H</em></sub>)</span>:éçº¿æ€§å˜æ¢ï¼ˆå¦‚å…¨è¿æ¥å±‚æˆ–å·ç§¯å±‚ï¼‰ã€‚</p></li><li><p><spanclass="math inline"><em>T</em>(<em>x</em>,â€†<em>W</em><sub><em>T</em></sub>)</span>:TransformGateï¼ˆå˜æ¢é—¨ï¼‰ï¼Œæ§åˆ¶éçº¿æ€§å˜æ¢çš„æƒé‡ï¼Œé€šå¸¸ç”¨Sigmoidæ¿€æ´»ï¼ˆè¾“å‡ºå€¼åœ¨0åˆ°1ä¹‹é—´ï¼‰ã€‚</p></li><li><p><spanclass="math inline"><em>C</em>(<em>x</em>,â€†<em>W</em><sub><em>C</em></sub>)</span>:Carry Gateï¼ˆæºå¸¦é—¨ï¼‰ï¼Œæ§åˆ¶åŸå§‹è¾“å…¥ x çš„æƒé‡ã€‚é€šå¸¸è®¾å®šä¸º <spanclass="math inline"><em>C</em>â€„=â€„1â€…âˆ’â€…<em>T</em></span>ï¼Œä»¥å‡å°‘å‚æ•°é‡ã€‚</p></li><li><p>å½“Â <spanclass="math inline"><em>T</em>(<em>x</em>)â€„â†’â€„0</span>Â æ—¶ï¼Œè¾“å‡º<spanclass="math inline"><em>y</em>â€„â‰ˆâ€„<em>x</em></span>ï¼Œå³å½“å‰å±‚å‡ ä¹ä¸è¿›è¡Œå˜æ¢ï¼ˆä¿¡æ¯ç›´æ¥è·³è¿‡è¯¥å±‚ï¼‰ã€‚</p></li><li><p>å½“Â <span class="math inline"><em>T</em>(<em>x</em>)â€„â†’â€„1</span>æ—¶ï¼Œè¾“å‡º<spanclass="math inline"><em>y</em>â€„â‰ˆâ€„<em>H</em>(<em>x</em>)</span>ï¼Œå³ä¿¡æ¯å®Œå…¨ç»è¿‡å½“å‰å±‚çš„éçº¿æ€§å˜æ¢ã€‚</p></li><li><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç½‘ç»œå¯ä»¥è‡ªé€‚åº”åœ°é€‰æ‹©æµ…å±‚æˆ–æ·±å±‚çš„ç‰¹å¾ã€‚</p></li></ul><p><spanclass="math display"><em>T</em>(<em>x</em>,â€†<em>W</em><sub><em>T</em></sub>)â€„=â€„<em>Ïƒ</em>(<em>W</em><sub><em>T</em></sub><sup><em>T</em></sup><em>x</em>â€…+â€…<em>b</em><sub><em>T</em></sub>)</span>åŠ¨æœºæ˜¯åœ¨ç½‘ç»œä¸­<strong>æé«˜ä¿¡æ¯çš„æµåŠ¨æ€§</strong></p><ul><li><strong>ResNet</strong>ï¼šä½¿ç”¨æ’ç­‰è·³è·ƒè¿æ¥<em>Identity SkipConnection</em>ï¼Œå…¬å¼ä¸ºÂ <spanclass="math inline"><em>y</em>â€„=â€„<em>H</em>(<em>x</em>)â€…+â€…<em>x</em></span>ï¼Œæ— é—¨æ§æœºåˆ¶ã€‚</li><li><strong>HighwayNetwork</strong>ï¼šé€šè¿‡é—¨æ§åŠ¨æ€è°ƒèŠ‚è·³è·ƒè¿æ¥çš„æƒé‡ï¼Œæ›´çµæ´»åœ°æ§åˆ¶ä¿¡æ¯æµã€‚#### ResNet</li></ul><p>![[{6767A6D4-59B6-4B62-9FE9-427D009BB837}.png]]</p><ul><li>56å±‚çš„æ¨¡å‹æ¯”20å±‚çš„æ¨¡å‹æ•ˆæœæ›´å·®ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œå…ˆå°†20å±‚çš„æ¨¡å‹è®­ç»ƒå¥½ï¼Œç„¶åå†å¢åŠ 36å±‚çš„<em>identity</em>ç½‘ç»œï¼Œä¹‹åå†è®­ç»ƒæ•´ä¸ªç½‘ç»œã€‚å‘ç°è¿™æ ·çš„æ“ä½œçš„æ•ˆæœåè€Œæ›´å·®ã€‚å¾—å‡ºçš„ç»“è®ºæ˜¯56å±‚çš„ç½‘ç»œæ›´åŠ éš¾ä»¥è®­ç»ƒï¼Œç½‘ç»œçš„æ‹Ÿå’Œèƒ½åŠ›ä¸è¶³ã€‚<strong>å¹³å¦çš„ç½‘ç»œå¾ˆéš¾æ‹Ÿå’Œ</strong></li><li>æ®‹å·®æ˜¯æ›´åŠ å®¹æ˜“æ‹Ÿå’Œçš„ã€‚</li><li>ç»§ç»­å°†è¿™äº›æ®‹å·®ç½‘ç»œå †å åœ¨ä¸€èµ·ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ›´æ·±çš„ç½‘ç»œã€‚</li><li>å·ç§¯ã€æ± åŒ–æ˜¯ç®—å­<em>operator</em>ï¼Œæ®‹å·®æ˜¯ä¸€ä¸ªå—<em>block</em>ï¼Œç½‘ç»œæ˜¯ä¸€ä¸ªå±‚<em>layer</em></li></ul><p>![[{8F67BE27-E8CA-4921-99B2-C57FFFAE5E7B}.png]]</p><p>![[{681C5361-F2ED-427F-86C2-48C9EC68AADF}.png]]</p><p>![[{5DE8620F-D5FB-4E82-96D7-0E03CCCCAF82}.png]]å¯¹äºç½‘ç»œä¼šæœ‰å¤šä¸ªç»´åº¦è¿›è¡Œè¯„ä»·ï¼š - å‡†ç¡®ç‡top-1ã€top-5å‡†ç¡®ç‡ -VGGç½‘ç»œå‚æ•°é‡å¾ˆå¤§ï¼Œä½†æ˜¯ç”±äºæ˜¯å¹³å¦çš„ç½‘ç»œï¼Œæ‰€ä»¥æœ‰ä¸€å®šçš„è®¡ç®—æ•´é½åº¦ã€‚åœ¨ç½‘ç»œæœ‰è¾ƒå¤šçš„åˆ†å‰æ—¶ï¼Œè®¡ç®—æ•´é½åº¦ä¼šå˜å·®ã€‚è¾ƒä¸ºæ•´é½çš„ç½‘ç»œè®¡ç®—æ˜¯è¾ƒå¿«çš„ã€‚- ç›®å‰çš„æ˜¾å¡å¯¹äº<spanclass="math inline">3â€…Ã—â€…3</span>çš„å·ç§¯æ ¸æ˜¯æœ‰ç¡¬ä»¶åŠ é€Ÿçš„</p><h3 id="landscape-visualization">LandScape Visualization</h3><p><a href="https://arxiv.org/abs/1712.09913">[1712.09913] Visualizingthe Loss Landscape of Neural Nets</a></p><h2 id="lightweight-for-deployment">Lightweight for Deployment</h2><h3 id="pruning">Pruning</h3><p>å·ç§¯ç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªå¾ˆé€‚åˆåšå‰ªæçš„ç½‘ç»œã€‚è¯´æ˜ç¥ç»ç½‘ç»œçš„æœ‰å¾ˆå¤šçš„å‚æ•°æ˜¯å†—ä½™çš„ã€‚å‰ªæé…åˆä¸Šé‡è®­ç»ƒå¯ä»¥å‡å°‘ç½‘ç»œçš„å‚æ•°é‡ï¼Œå¹¶ä¸”åœ¨ä¸€å®šçš„ç¨‹åº¦ä¸Šæå‡ç½‘ç»œçš„æ€§èƒ½ã€‚</p><h4 id="quantization-and-encoding">Quantization and Encoding</h4><p>k-meansç®—æ³•å¯ä»¥å°†æƒé‡é‡åŒ–ï¼Œå°†æƒé‡é‡åŒ–ä¸ºå‡ ä¸ªå€¼ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥å‡å°‘ç½‘ç»œçš„å‚æ•°é‡ã€‚åœ¨å®é™…çš„æ“ä½œä¸­ï¼Œå¯ä»¥å°†æƒé‡é‡åŒ–ä¸º8ä½ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥å‡å°‘ç½‘ç»œçš„å‚æ•°é‡ã€‚</p><p>ç¼–ç æ“ä½œï¼Œå¦‚Huffmanç¼–ç ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œçš„å‚æ•°é‡ã€‚ <ahref="https://arxiv.org/abs/1510.00149">[1510.00149] Deep Compression:Compressing Deep Neural Networks with Pruning, Trained Quantization andHuffman Coding</a></p><p>ç¥ç»ç½‘ç»œä¸€èˆ¬æ˜¯åœ¨è®­ç»ƒçš„æ—¶å€™ä½¿ç”¨è¾ƒå¤§çš„ç½‘ç»œï¼Œç„¶åå†è£å‰ªä¸ºè¾ƒå°çš„ç½‘ç»œï¼Œåä¹‹æ•ˆæœä¸ä¸€å®šä¼šå¥½ã€‚</p><p>æˆ‘ä»¬ç›¸ä¿¡åœ¨è£å‰ªçš„è¿‡ç¨‹ä¸­ï¼Œä¿ç•™ä¸‹æ¥çš„å‚æ•°æ˜¯é‡è¦çš„å‚æ•°ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥æå‡ç½‘ç»œçš„æ€§èƒ½ã€‚åœ¨å®éªŒä¸­</p><p><a href="https://arxiv.org/abs/1803.03635">[1803.03635] The LotteryTicket Hypothesis: Finding Sparse, Trainable Neural Networks</a></p><p>å…ˆè®¾è®¡ä¸€ä¸ªè¾ƒå°çš„ç½‘ç»œï¼Œä¹‹åæ¨å¹¿åˆ°è¾ƒå¤§çš„ç½‘ç»œã€‚åœ¨å®é™…çš„æ“ä½œä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¾ƒå°çš„ç½‘ç»œï¼Œç„¶åå†å¢åŠ ç½‘ç»œçš„æ·±åº¦ã€‚è¿™ç§è®¾è®¡æ˜¯ç¡¬ä»¶å‹å¥½çš„ï¼Œç”±äºè¿™æ ·çš„è®¾è®¡æ˜¯è®¡ç®—å¯¹é½çš„ã€‚</p><h4 id="group-convolution">Group Convolution</h4><p>æ ‡å‡†çš„å·ç§¯å±‚æœ‰è¿™æ ·çš„ä¸è¶³ï¼šå¯¹äºä¸åŒçš„è¾“å…¥é€šé“ï¼Œåé¢çš„è¾“å‡ºéƒ½ä½¿ç”¨åˆ°äº†æ‰€æœ‰çš„è¾“å…¥é€šé“ã€‚åœ¨GroupConvolutionä¸­ï¼Œå°†è¾“å…¥é€šé“åˆ†ä¸ºå‡ ä¸ªç»„ï¼Œç„¶åå¯¹äºæ¯ä¸€ä¸ªç»„ä½¿ç”¨ä¸€ä¸ªå·ç§¯æ ¸ã€‚è¿™æ ·çš„æ“ä½œå¯ä»¥å‡å°‘ç½‘ç»œçš„å‚æ•°é‡ï¼Œå‡å°‘è®¡ç®—é‡ã€‚</p><p>ä½†æ˜¯é€šé“ä¹‹é—´ä¸äº¤æµï¼Œè¿™æ ·çš„æ“ä½œå¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œçš„æ€§èƒ½ä¸‹é™ã€‚</p><h4 id="depthwise-separable-convolution">Depthwise SeparableConvolution</h4><ul><li>å¼•å…¥äº†<spanclass="math inline">1â€…Ã—â€…1</span>å·ç§¯æ ¸<em>pointwise</em>ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥å‡å°‘å‚æ•°é‡</li><li>ä»¤é€šé“æ•°ç­‰äºåˆ†ç»„æ•°ç›®<em>channelwise</em> or <em>depthwise</em></li></ul><p>ä¸Šè¿°ä¸¤ä¸ªç®—å­æ˜¯è½»é‡åŒ–ç½‘ç»œçš„åŸºç¡€ã€‚</p><p>![[Pasted image 20250316132626.png]]</p><p><a href="https://arxiv.org/abs/2201.03545">[2201.03545] A ConvNet forthe 2020s</a></p><p>![[Pasted image 20250316134751.png]]</p><p>å®è§‚è®¾è®¡ï¼š<strong>å‡å°‘ç©ºé—´å°ºå¯¸çš„è¡°å‡æœ‰åˆ©äºå­¦ä¹ ä¸åŒçš„ç‰¹å¾</strong>ã€‚</p><h2 id="advanced-modules">Advanced Modules</h2><h3 id="d-modeling">3D Modeling</h3><p>æ™®é€šçš„äºŒç»´å·ç§¯ç½‘ç»œåœ¨å¤„ç†è§†é¢‘æ—¶ï¼Œä¼šä¸¢å¤±æ—¶é—´ä¿¡æ¯ã€‚åœ¨3Då·ç§¯ç½‘ç»œä¸­ï¼Œå¼•å…¥äº†æ—¶é—´ç»´åº¦ï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥ä¿ç•™æ—¶é—´ä¿¡æ¯ã€‚</p><p>ç›´æ¥ä½¿ç”¨3Då·ç§¯å¯ä»¥è¿›è¡Œç›´æ¥çš„å¯¹åº”ã€‚</p><h4 id="deforamble-convolution">Deforamble Convolution</h4><p>åœ¨CNNä¸­ï¼Œå½¢å˜è¾ƒéš¾è¿›è¡Œå»ºæ¨¡ï¼Œå¯¹äºå½¢å˜çš„ç‰©ä½“æ•ˆæœä¼šå˜å·®ã€‚åœ¨è¯†åˆ«çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨è¯†åˆ«çš„è¿‡ç¨‹ä¸­å¯èƒ½å¼•å…¥å™ªéŸ³ã€‚åœ¨SpatialTransformerNetworkä¸­ï¼Œå¼•å…¥äº†å½¢å˜çš„æ¦‚å¿µï¼Œç±»ä¼¼äºè§†è§‰ä¸­è¿›è¡Œé˜²æŠ–çš„æ“ä½œã€‚</p><p>åœ¨CNNä¸­å¼•å…¥åç½®çš„æ¦‚å¿µï¼Œåœ¨å¯¹åº”çš„ç‰¹å¾å›¾ä¸Šè¿›è¡Œåæ ‡çš„åç½®æ“ä½œ <spanclass="math display"><em>y</em>(<em>p</em><sub>0</sub>)â€„=â€„âˆ‘<sub><em>p</em><sub><em>i</em></sub>â€„âˆˆâ€„<em>Î©</em></sub><em>w</em><sub><em>i</em></sub><em>x</em>(<em>p</em><sub><em>i</em></sub>â€…+â€…<em>p</em><sub>0</sub>â€…+â€…<em>Î”</em><em>p</em><sub>0</sub>)</span>#### Attention</p><p>è¦å»ºæ¨¡å¤§èŒƒå›´çš„ç‰¹å¾èŒƒå›´ï¼Œå°±æ˜¯high-levelçš„ç‰¹å¾ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨CNNçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ•ˆæ„Ÿå—é‡å¹¶æ²¡æœ‰é‚£ä¹ˆå¤§ã€‚</p><p><span class="math display">$$y_i = \frac{1}{\mathcal{C}(x)}\sum_{\forall j} f(x_i,x_j)g(x_j)$$</span> å¯¹äºæ³¨æ„åŠ›å‡½æ•°<spanclass="math inline"><em>f</em>(<em>x</em><sub><em>i</em></sub>,â€†<em>x</em><sub><em>j</em></sub>)</span>å¯ä»¥è®¡ç®—ä¸ºä¸¤ä¸ªå‚æ•°çš„å†…ç§¯ã€‚ä¸Šè¿°æ“ä½œå®é™…ä¸Šæ˜¯ä¸€ç§å…¨å±€å»ºæ¨¡ï¼Œå¯ä»¥åœ¨CNNçš„æœ€åå‡ æ­¥ä½¿ç”¨ã€‚</p><h4 id="cam">CAM</h4><p>ä½œä¸ºä¸€ç§å¯è§£é‡Šæ€§çš„å·¥ä½œï¼ŒCAMå¯ä»¥å°†CNNçš„è¾“å‡ºæ˜ å°„åˆ°è¾“å…¥å›¾åƒä¸Šï¼Œè¿™æ ·çš„æ“ä½œå¯ä»¥ç›´è§‚åœ°çœ‹åˆ°CNNçš„è¾“å‡ºã€‚è®¡ç®—ä¸åŒéƒ¨åˆ†çš„æƒé‡ï¼Œå¯ä»¥å¾—åˆ°ä¸åŒéƒ¨åˆ†çš„é‡è¦æ€§ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-2</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-2/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-2/</url>
    
    <content type="html"><![CDATA[<h3 id="brain-and-neuron">Brain and Neuron</h3><p>æ„ŸçŸ¥æœº<em>Perceptron</em>æ˜¯ç¥ç»å…ƒçš„ä¸€ä¸ªç›¸å½“ç®€å•çš„æ•°å­¦æ¨¡å‹ï¼ŒåŒ…æ‹¬ï¼šè¾“å…¥ã€æƒé‡ã€æ¿€æ´»å‡½æ•°ã€è¾“å‡ºã€‚å…¶å®æ˜¯åœ¨ç©ºé—´è¶…å¹³é¢ä¸ŠåµŒå…¥äº†ä¸€ä¸ªéçº¿æ€§å‡½æ•°ã€‚<span class="math display">$$\hat{y} = g(\sum_{i=1}^{n}  x_i \theta_i +\theta_0)$$</span>æ„ŸçŸ¥æœºåœ¨ç¥ç»ç½‘ç»œä¸­ä¹Ÿå«å•å…ƒ<em>unit</em>ï¼Œæ˜¯ç¥ç»ç½‘ç»œçš„åŸºæœ¬ç»„æˆå•å…ƒã€‚ä½†æ˜¯è¿™æ ·çš„å•å…ƒä¼šæ¯”äººçš„ç¥ç»å…ƒç®€å•å¾ˆå¤šã€‚#### PLAåœ¨ä¸Šè¿°çš„æ¿€æ´»å‡½æ•°ä¸­ï¼Œæœ€å…ˆä½¿ç”¨çš„æ˜¯ç¬¦å·å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸å…‰æ»‘çš„ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç®—æ³•æ¥è¿›è¡Œè®­ç»ƒï¼š![[{5ABA24F6-F5A5-48C8-AE9F-1E8524E35979}.png]]åœ¨ç†è®ºæ¨å¯¼ä¸­ï¼Œå¯ä»¥è®¡ç®—PLAçš„<strong>æ”¶æ•›ç‡</strong>ï¼šï¼ˆåœ¨çº¿æ€§å¯åˆ†çš„æƒ…å†µä¸‹ï¼‰<span class="math inline"><em>Î³</em></span>æ˜¯æœ€ä¼˜é—´éš”<em>the best-casemargin</em>ï¼Œè®¡ç®—çš„æ˜¯è®­ç»ƒæ ·æœ¬ä¸è¶…å¹³é¢çš„è·ç¦»ä¹‹é—´çš„æœ€å°å€¼ã€‚ <spanclass="math display">$$\exists v \in \mathbb{R}^d \quad \text{s.t.}\,\gamma \leq\frac{y_i(v\cdot x_i)}{||v||}$$</span> <spanclass="math inline"><em>R</em></span>æ˜¯æ•°æ®é›†çš„åŠå¾„ï¼Œå³æ ·æœ¬æ•°æ®å‘é‡æ¨¡çš„æœ€å¤§å€¼ï¼Œ<spanclass="math inline"><em>d</em></span>æ˜¯æ•°æ®é›†çš„ç»´åº¦ã€‚é‚£ä¹ˆPLAçš„æ”¶æ•›ç‡ä¸ºï¼šæœ€å¤šç»è¿‡<spanclass="math inline">$\frac{R^2}{\gamma^2}$</span>æ¬¡è¿­ä»£å°±å¯ä»¥æ”¶æ•›ã€‚ -<span class="math inline"><em>Î³</em></span>è¶Šå¤§ï¼Œæ”¶æ•›è¶Šå¿« - <spanclass="math inline"><em>R</em></span>è¶Šå¤§ï¼Œæ”¶æ•›è¶Šæ…¢</p><h5 id="expresiveness-of-perceptron">Expresiveness of Perceptron</h5><p>æ„ŸçŸ¥æœºæ˜¯ä¸€ä¸ªçº¿æ€§åˆ†ç±»å™¨ï¼Œåªèƒ½è§£å†³çº¿æ€§å¯åˆ†çš„é—®é¢˜ã€‚å¦‚æœæ•°æ®ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œé‚£ä¹ˆæ„ŸçŸ¥æœºå°±æ— æ³•è§£å†³ï¼ˆä¾‹å¦‚å¼‚æˆ–é—®é¢˜ï¼Œä½†å…¶å®å¼‚æˆ–ä¸æ˜¯åŸºæœ¬çš„å¸ƒå°”è¿ç®—ï¼Œå¯ä»¥ç”¨ä¸æˆ–éè¡¨è¾¾ï¼‰ã€‚</p><h4 id="multi-layer-perceptron">Multi-layer Perceptron</h4><p>å¤šå±‚æ„ŸçŸ¥æœº<em>Multi-layerPerceptron</em>æ˜¯æ„ŸçŸ¥æœºçš„æ‰©å±•ï¼Œå¯ä»¥è§£å†³éçº¿æ€§é—®é¢˜ã€‚å¤šå±‚æ„ŸçŸ¥æœºçš„ç»“æ„æ˜¯ï¼šè¾“å…¥å±‚ã€éšè—å±‚ã€è¾“å‡ºå±‚ï¼ˆè¾“å…¥å±‚å¹¶ä¸ç®—ä¸€å±‚ï¼‰ã€‚<em>æ„ŸçŸ¥æœºä¹‹é—´çš„é“¾æ¥æ–¹å¼ç›¸æ¯”äººè„‘è€Œè¨€ä¹Ÿæ˜¯è¾ƒä¸ºç®€å•çš„ã€‚</em>åœ¨è¡¨è¾¾æ—¶ï¼Œå¯ä»¥å‘ç°æ˜¯<strong>ç¨€ç–çš„</strong>ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€å±‚å¹¶ä¸æ˜¯ä¸å‰é¢çš„æ‰€æœ‰çš„æ„ŸçŸ¥æœºç›¸è¿ã€‚å¤šå±‚æ„ŸçŸ¥æœºçš„è¡¨è¾¾èƒ½åŠ›è¾ƒå¼ºï¼Œè¿™æ—¶éœ€è¦å¢åŠ æ„ŸçŸ¥æœºçš„å±‚æ•°ã€‚</p><h5 id="comention">Comention</h5><p>![[{9A215F21-185B-4C55-B872-413D388E5321}.png]]</p><p>![[{E178BAD1-DE9C-44E5-A665-D550AE3A9558}.png]]</p><ul><li>ç”¨ä¸Šæ ‡è¡¨ç¤ºå±‚æ•°ï¼Œç”¨ä¸‹æ ‡è¡¨ç¤ºæ„ŸçŸ¥æœºçš„ç¼–å·</li><li><spanclass="math inline"><em>Î¸</em><sub><em>i</em><em>j</em></sub><sup>(<em>l</em>)</sup></span>è¡¨ç¤ºç¬¬<spanclass="math inline"><em>l</em></span>å±‚çš„ç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªæ„ŸçŸ¥æœºçš„ç¬¬<spanclass="math inline"><em>j</em></span>ä¸ªè¾“å…¥çš„æƒé‡</li><li><spanclass="math inline"><em>b</em><sub><em>j</em></sub><sup>(<em>l</em>)</sup></span>è¡¨ç¤ºç¬¬<spanclass="math inline"><em>l</em></span>å±‚çš„ç¬¬<spanclass="math inline"><em>j</em></span>ä¸ªæ„ŸçŸ¥æœºçš„åç½®</li><li><spanclass="math inline"><em>a</em><sub><em>j</em></sub><sup>(<em>l</em>)</sup></span>è¡¨ç¤ºç¬¬<spanclass="math inline"><em>l</em></span>å±‚çš„ç¬¬<spanclass="math inline"><em>j</em></span>ä¸ªæ„ŸçŸ¥æœºçš„è¾“å‡ºï¼ˆåœ¨æ¿€æ´»ä¹‹åçš„æ•°å€¼ï¼‰</li><li><spanclass="math inline"><em>z</em><sub><em>j</em></sub><sup>(<em>l</em>)</sup></span>è¡¨ç¤ºç¬¬<spanclass="math inline"><em>l</em></span>å±‚çš„ç¬¬<spanclass="math inline"><em>j</em></span>ä¸ªæ„ŸçŸ¥æœºçš„è¾“å…¥ï¼ˆç»è¿‡çº¿æ€§å˜æ¢ä¹‹åçš„æ•°å€¼ï¼‰</li><li><spanclass="math inline"><em>J</em>(<em>Î¸</em>)</span>è¡¨ç¤ºæŸå¤±å‡½æ•°<em>LossFunction</em></li></ul><p>åœ¨ä¸Šé¢çš„å›¾ä¸­ï¼Œè¾¹çš„ä¸ªæ•°å°±æ˜¯å‚æ•°çš„ä¸ªæ•°ã€‚</p><h5 id="activation-function">Activation Function</h5><ul><li><p><strong>Sigmoidå‡½æ•°</strong>ï¼š<span class="math inline">$g(z) =\sigma(z)= \frac{1}{1+e^{-z}}$</span>é‡‡ç”¨æœ‰ç•Œçš„å‡½æ•°ï¼Œå¯ä»¥å°†è¾“å‡ºé™åˆ¶åœ¨0-1ä¹‹é—´ï¼Œé¿å…æ•°å€¼çˆ†ç‚¸ã€‚ä½†æ˜¯åœ¨åŸºäºæ¢¯åº¦çš„è®¡ç®—ä¸­ï¼Œä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±ï¼ˆæ¢¯åº¦é¥±å’Œï¼‰ï¼Œåœ¨ä¸¤ä¾§çš„èŒƒå›´å†…æ¢¯åº¦ä¼šæ¥è¿‘äº0ã€‚</p></li><li><p><strong>ReLUå‡½æ•°</strong>ï¼š<spanclass="math inline"><em>g</em>(<em>z</em>)â€„=â€„<em>m</em><em>a</em><em>x</em>(0,â€†<em>z</em>)</span>ReLUå‡½æ•°æ˜¯ä¸€ä¸ªåˆ†æ®µå‡½æ•°ï¼Œå¯ä»¥é¿å…<strong>æ¢¯åº¦æ¶ˆå¤±</strong>çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨è®­ç»ƒæ—¶ï¼Œä¼šå‡ºç°<strong>ç¥ç»å…ƒæ­»äº¡</strong>çš„é—®é¢˜ï¼Œå³ç¥ç»å…ƒçš„è¾“å‡ºä¸€ç›´ä¸º0ã€‚</p></li><li><p><strong>GeLuå‡½æ•°</strong>ï¼š<span class="math inline">$g(z) = z\cdot \Phi(z) = z \cdot \frac{1}{2} (1 +\text{erf}(\frac{z}{\sqrt{2}}))$</span>ç”¨Guassåˆ†å¸ƒçš„ç´¯è®¡å‡½æ•°å¯¹ä¸Šè¿°è¿›è¡ŒåŠ æƒã€‚<spanclass="math inline"><em>Î¦</em>(<em>z</em>)</span>æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„ç´¯è®¡åˆ†å¸ƒå‡½æ•°<em>CDF</em>ã€‚åœ¨ä¸€äº›è¾ƒä¸ºå¤æ‚çš„æ¨¡å‹ä¸­ï¼ˆGPT-3ã€Bertï¼‰éƒ½æœ‰ä½¿ç”¨ã€‚</p></li></ul><p>åœ¨ç½‘ç»œçš„è¾“å‡ºå±‚ï¼Œä½¿ç”¨çš„æ¿€æ´»å‡½æ•°ç”±é—®é¢˜å†³å®šã€‚å¦‚æœæ˜¯å›å½’é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨çº¿æ€§å‡½æ•°ï¼›åœ¨æœ‰ç•Œçš„è¾“å‡ºæƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Sigmoidå‡½æ•°ï¼›åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Softmaxå‡½æ•°ã€‚</p><ul><li><strong>Softmaxå‡½æ•°</strong>ï¼š<span class="math inline">$g(z)_i =\frac{e^{z_i}}{\sum_{j=1}^{k} e^{z_j}}$</span>Softmaxå‡½æ•°æ˜¯ä¸€ä¸ªå¤šåˆ†ç±»çš„æ¿€æ´»å‡½æ•°ï¼Œå¯ä»¥å°†è¾“å‡ºçš„å€¼è½¬åŒ–ä¸ºæ¦‚ç‡å€¼ã€‚åˆ†ç±»é—®é¢˜æ˜¯éšæœºå®éªŒä¸­çš„ä¼¯åŠªåˆ©å®éªŒ<em>CategoricalDistribution</em>ã€‚ç¼ºç‚¹ä¸ºï¼šâ€œèµ¢è€…é€šåƒâ€ï¼Œå³æœ€å¤§çš„å€¼ä¼šè¢«æ”¾å¤§ï¼Œå…¶ä»–çš„å€¼ä¼šè¢«å‹ç¼©ï¼Œæœ‰<em>overconfidence</em>çš„é—®é¢˜ï¼ˆå³æŸä¸ªåˆ†ç±»çš„æ¦‚ç‡è¿‡å¤§ï¼‰ã€‚åŒæ—¶æœ‰æ•°å€¼ç¨³å®šæ€§é—®é¢˜ï¼Œå³æ•°å€¼è®¡ç®—æ—¶å¯èƒ½ä¼šå‡ºç°æ•°å€¼çˆ†ç‚¸çš„é—®é¢˜ã€‚æ”¹è¿›ä¸ºï¼š <span class="math display">$$g(z)_i = \frac{e^{z_i - \max(z)}}{\sum_{j=1}^{k} e^{z_j - \max(z)}}$$</span> ä¸Šè¿°æ”¹è¿›èƒ½è§£å†³æ•°å€¼ç¨³å®šæ€§é—®é¢˜ï¼Œä½†æ˜¯å¯¹äº<em>overconfidence</em>é—®é¢˜è¿˜æ˜¯å­˜åœ¨ã€‚ ^b5bcbb</li></ul><h5 id="cost-function">Cost Function</h5><p>ä»»ä½•ä¸€ä¸ªè¡¡é‡é¢„æµ‹ä¸å®é™…å€¼ä¹‹é—´çš„å·®å¼‚çš„å‡½æ•°éƒ½å¯ä»¥ç§°ä¸ºæŸå¤±å‡½æ•°ã€‚åœ¨è¿™é‡Œä½¿ç”¨çš„æ˜¯äº¤å‰ç†µæŸå¤±å‡½æ•°<em>CrossEntropy Loss</em>ï¼š <span class="math display">$$J(y,\hat{y}) = - \sum_{i=1}^{n} y_i \log(\hat{y}_i)$$</span> ä½œä»£å…¥å¾—åˆ°ï¼š <span class="math display">$$\min J(\theta)= -\frac{1}{m} \sum_{i=1}^{m} \sum_{j=1}^{k}\mathbf{1}\{y^{(i)}=j\} \log\frac{\exp{ z_j^{(n_l)}}}{\sum_{j'=1}^{k}\exp{ z_{j'}^{(n_l)}}} \quad (*)$$</span></p><p><em>*ä¸Šè¿°å…¬å¼ä¸­çš„mä¸ºæ ·æœ¬æ•°ç›®ï¼Œkä¸ºç±»åˆ«æ•°ç›®ï¼Œ<spanclass="math inline"><em>z</em><sub><em>j</em></sub><sup>(<em>n</em><sub><em>l</em></sub>)</sup></span>ä¸ºæœ€åä¸€å±‚çš„ç¬¬jä¸ªæ„ŸçŸ¥æœºçš„è¾“å…¥ã€‚å¯¹äºå®é™…ç±»åˆ«é‡‡ç”¨ç‹¬çƒ­ç¼–ç ï¼Œå³åªæœ‰åœ¨å¯¹åº”ç±»åˆ«å–å€¼ä¸º1ã€‚</em></p><h5 id="statistical-view-of-softmax">Statistical View of Softmax</h5><p>è€ƒè™‘æŠ•æ·mæ¬¡éª°å­ï¼Œå…¶ä¸­ç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªå¾—åˆ°<spanclass="math inline"><em>j</em></span>çš„æ¦‚ç‡ä¸º<spanclass="math inline"><em>q</em><sub><em>i</em><em>j</em></sub></span>ã€‚åœ¨<em>Softmax</em>ä¸­å¯¹äºæ¦‚ç‡è¿›è¡Œå»ºæ¨¡ï¼ˆç”¨æ•°æ®è¿›è¡Œä¼°è®¡ï¼Œå¯¹äºåˆ†ç±»ä¼°è®¡çš„å‚æ•°è¿›è¡Œé€¼è¿‘ï¼‰ï¼š<spanclass="math display"><em>q</em><sub><em>i</em><em>j</em></sub>â€„=â€„<em>P</em>(<em>y</em><sub><em>i</em></sub>â€„=â€„<em>j</em>â€†|<strong>x</strong><sub><strong>i</strong></sub>;â€†<strong>W</strong>)</span>åœ¨ç»™å®šçš„ç»“æœ<spanclass="math inline">{<em>y</em><sub>1</sub>,â€†...,â€†<em>y</em><sub><em>m</em></sub>}</span>ä¸‹ï¼Œæ¦‚ç‡å€¼ï¼ˆä¼¼ç„¶å‡½æ•°ï¼‰ä¸ºï¼š<span class="math display">$$\mathcal{L}(\mathbf{W};\mathcal{D})=\prod_{i=1}^{m} \prod_{j=1}^{k}P(y_i=j|q_{ij})^{\mathbf{1}\{y_i = j\}} = \prod_{i=1}^{m}\prod_{j=1}^{k}P(y_i = j\,| \mathbf{x_i} ; \mathbf{W} )^{\mathbf{1}\{y_i = j\}}$$</span> <em><spanclass="math inline"><strong>W</strong></span>æ˜¯æ¨¡å‹çš„å‚æ•°ï¼Œä¸Šé¢çš„å¼å­æ˜¯åœ¨è¿™æ ·çš„å»ºæ¨¡å’Œæ•°æ®ä¸‹å¾—åˆ°ç»“æœçš„å¯èƒ½æ€§ï¼Œä¹Ÿå°±æ˜¯ç»Ÿè®¡ä¸­çš„ä¼¼ç„¶å‡½æ•°ã€‚è¿™æ ·çš„è¿‡ç¨‹ç±»ä¼¼äºç»Ÿè®¡ä¸­çš„å‚æ•°ä¼°è®¡ã€‚</em></p><p>åšæå¤§ä¼¼ç„¶ä¼°è®¡ï¼š <span class="math display">$$\mathcal{L}(\mathbf{W};\mathcal{D}) =\max_{w_1 \dots w_k}\prod_{i=1}^{m} \prod_{j=1}^{k} P(y_i = j\,| \mathbf{x_i} ; \mathbf{W} )^{\mathbf{1}\{y_i = j\}}$$</span> å–è´Ÿå¯¹æ•°ï¼š <span class="math display">$$J(\mathbf{W}) = \min_{w_1 \dots w_k}- \log\mathcal{L}(\mathbf{W};\mathcal{D}) = - \sum_{i=1}^{m} \sum_{j=1}^{k}\mathbf{1}\{y_i = j\} \log P(y_i = j\,| \mathbf{x_i} ; \mathbf{W} )$$</span>ä¸Šè¿°çš„å¼å­å°±æ˜¯äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚ä¸Šé¢çš„è¿‡ç¨‹å…¶å®æ˜¯åœ¨è®¤ä¸ºåˆ†ç±»æ˜¯<spanclass="math inline"><em>i</em>.<em>i</em>.<em>d</em>.</span>çš„ä¼¯åŠªåˆ©åˆ†å¸ƒçš„æå¤§ä¼¼ç„¶ä¼°è®¡ã€‚</p><h3 id="gradient-descent">Gradient Descent</h3><p>å¯¹äºä¸æ˜¯ç›´æ¥ä¾èµ–çš„å¯¼æ•°çš„è®¡ç®—è¾ƒä¸ºå¤æ‚ï¼Œå¯¹äºæœ€åä¸€å±‚çš„å¯¼æ•°è®¡ç®—è¾ƒä¸ºç®€å•ï¼ˆæ˜¯ç›´æ¥ä¾èµ–ï¼‰ã€‚å¯¹äºå‰é¢å±‚çš„å‚æ•°çš„å¯¼æ•°åœ¨è¿™é‡Œä½¿ç”¨<strong>é“¾å¼æ³•åˆ™</strong>æ¥è¿›è¡Œè®¡ç®—ã€‚</p><p>å¯¹äºæœ€åä¸€å±‚çš„å‚æ•°çš„å¯¼æ•°è®¡ç®—ï¼š <span class="math display">$$\frac{\partial J(\theta ,b)}{\partial z_j^{(n_l)}} = -(\mathbf{1}\{y^{(i)}=j\} -P(y^{(i)}=j|\mathbf{x}^{(i)};\theta,b)))$$</span> å¯ä»¥å‘ç°æ¢¯åº¦æ˜¯çœŸæ˜¯çš„æ¦‚ç‡å‡å»é¢„æµ‹çš„æ¦‚ç‡ã€‚</p><h4 id="step-1-forward-propagation">Step 1: Forward Propagation</h4><p>è¾“å…¥æ ·æœ¬è®¡ç®—å¾—åˆ°çš„è¾“å‡ºå€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€ä¸ªå‰å‘ä¼ æ’­çš„è¿‡ç¨‹ã€‚</p><h4 id="step-2-backward-propagation">Step 2: Backward Propagation</h4><p>å°†æŸå¤±å‡½æ•°å¸¦æœ‰çš„é”™è¯¯ä¿¡æ¯å‘å‰ä¼ æ’­ <span class="math display">$$\frac{J(\theta)}{\theta_1}= \frac{\partial J(\theta)}{\partial \hat{y}}\frac{\partial \hat{y}}{\partial z} \frac{\partial z}{\partial \theta_1}$$</span>é™¤äº†éœ€è¦æ±‚è§£çš„å¯¼æ•°çš„å‚æ•°ï¼Œå…¶ä»–çš„éƒ½æ˜¯è®¡ç®—çš„ä¸­é—´å€¼ã€‚BPæ˜¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’ç®—æ³•ã€‚</p><h4 id="computing-the-residual">Computing the Residual</h4><p>ç¬¬<span class="math inline"><em>l</em></span>å±‚çš„ç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªç»“ç‚¹çš„æ®‹å·®<em>Residual</em>çš„å®šä¹‰ä¸ºï¼š<span class="math display">$$\delta_i^{(l)} = \frac{\partial J(\theta)}{\partial z_i^{(l)}}$$</span> å¯¹äºæœ€åä¸€å±‚çš„æ®‹å·®ï¼Œè®¡ç®—è¾ƒä¸ºç®€å•ï¼š <spanclass="math display">$$\delta_i^{(n_l)} = \frac{\partial}{\partial z_i^{(n_l)} } J(\theta) =\frac{\partial }{\partial \hat{y}_i}J(\theta) g'(z_i^{(n_l)})$$</span> åˆ©ç”¨é“¾å¼æ³•åˆ™å¯¹æ¿€æ´»å‡½æ•°æ±‚å¯¼å³å¯ã€‚ å¯¹äºéšè—å±‚çš„å¯¼æ•°è®¡ç®—ï¼š <spanclass="math display">$$\delta_i^{(l)} = \frac{\partial J(\theta)}{\partial z_i^{(l)}} =\sum_{j=1}^{n_{l+1}} \frac{\partial J(\theta)}{\partial z_j^{(l+1)}}\frac{\partial z_j^{(l+1)}}{\partial z_i^{(l)}} = \sum_{j=1}^{n_{l+1}}\delta_j^{(l+1)} \theta_{ij}^{(l)} g'(z_i^{(l)})$$</span> <span class="math display">$$\delta_i^{(l)}= \sum_{j=1}^{n_{l+1}} \delta_j^{(l+1)} \theta_{ji}^{(l)}g'(z_j^{(l)})$$</span> ä¸Šè¿°å…¬å¼å®ç°äº†<strong>ä¼ é€’</strong>çš„è¿‡ç¨‹ã€‚</p><h4 id="step-3-update-parameters">Step 3: Update Parameters</h4><p>å¯¹äºå‚æ•°æ›´æ–°çš„è¿‡ç¨‹ï¼š <span class="math display">$$\frac{\partial J(\theta)}{\partial \theta_{ij}^{(l)}} = \frac{\partialJ(\theta)}{\partial z_j^{(l+1)}} \frac{\partial z_j^{(l+1)}}{\partial\theta_{ij}^{(l)}} = \delta_j^{(l+1)} a_i^{(l)}$$</span> <span class="math display">$$\frac{\partial J(\theta)}{\partial b_j^{(l)}} = \delta_j^{(l+1)}$$</span> ##### Automatic Differentiationåœ¨å®é™…çš„è®¡ç®—ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è‡ªåŠ¨å¾®åˆ†çš„æ–¹æ³•æ¥è¿›è¡Œè®¡ç®—ã€‚è‡ªåŠ¨å¾®åˆ†æ˜¯ä¸€ç§è®¡ç®—å¯¼æ•°çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š- <strong>SymbolicDifferentiation</strong>ï¼šé€šè¿‡ç¬¦å·çš„æ–¹å¼æ¥è®¡ç®—å¯¼æ•°ï¼Œè¿™ç§æ–¹æ³•è®¡ç®—çš„ç²¾ç¡®åº¦è¾ƒé«˜ï¼Œä½†æ˜¯è®¡ç®—çš„é€Ÿåº¦è¾ƒæ…¢ã€‚- <strong>NumericalDifferentiation</strong>ï¼šé€šè¿‡æ•°å€¼çš„æ–¹å¼æ¥è®¡ç®—å¯¼æ•°ï¼Œè¿™ç§æ–¹æ³•è®¡ç®—çš„é€Ÿåº¦è¾ƒå¿«ï¼Œä½†æ˜¯è®¡ç®—çš„ç²¾ç¡®åº¦è¾ƒä½ã€‚</p><p>åœ¨è®¡ç®—å›¾ä¸­ï¼Œå°†æ¯ä¸€ä¸ªè®¡ç®—å±‚çš„åå‘ä¼ æ’­çš„å¯¼æ•°ä¿å­˜åœ¨è½¯ä»¶åŒ…ä¸­ï¼Œè¿™æ ·å¯ä»¥å‡å°‘è®¡ç®—çš„æ—¶é—´ã€‚å®é™…çš„åº”ç”¨ä¸­ï¼Œå¯¹äºè®¡ç®—å›¾è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œç„¶åè¿›è¡Œåå‘ä¼ æ’­çš„è®¡ç®—ã€‚</p><h4 id="optimization-in-practice">Optimization in Practice</h4><h5 id="dropout"><strong>Dropout</strong></h5><p>åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œéšæœºçš„å°†ä¸€äº›ç¥ç»å…ƒçš„æƒé‡ç½®ä¸º0ï¼ˆä¸¢å¼ƒï¼‰ï¼Œè¿™æ ·å¯ä»¥å‡å°‘è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚åœ¨æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼ŒæŒ‰ç…§ä¸€å®šçš„æ¦‚ç‡<spanclass="math inline"><em>p</em></span>å¯¹ç¥ç»å…ƒè¿›è¡Œä¸¢å¼ƒã€‚åœ¨æŸä¸€å±‚æœªè¢«ä¸¢å¼ƒçš„ç¥ç»å…ƒçš„æ¿€æ´»å€¼å€¼ä¹˜ä»¥<spanclass="math inline">$\frac{1}{1-p}$</span>ï¼Œè¿™æ ·å¯ä»¥ä¿æŒæœŸæœ›å€¼ä¸å˜ã€‚</p><h5 id="weight-initialization">Weight Initialization</h5><p>å¯¹äºæƒé‡çš„åˆå§‹åŒ–ï¼Œä¸€èˆ¬ä½¿ç”¨Guassåˆ†å¸ƒå¯ä»¥ä½¿ç”¨ä¸€äº›æ–¹æ³•æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œä¾‹å¦‚ï¼š<strong>Xavier Initialization</strong> ( linear activations )ï¼š <spanclass="math display">$$Var(W)= \frac{1}{n_{in}}$$</span> å‡è®¾è¾“å…¥çš„æ•°æ®<spanclass="math inline"><em>x</em><sub><em>j</em></sub></span>æ»¡è¶³å‡å€¼ä¸º0ï¼Œæ–¹å·®ä¸º<spanclass="math inline"><em>Î³</em></span>ï¼Œ<spanclass="math inline"><em>n</em><sub><em>i</em><em>n</em></sub></span>æ˜¯è¿™ä¸€ä¸ªç¥ç»å…ƒå¯¹åº”çš„è¾“å…¥çš„ç¥ç»å…ƒçš„ä¸ªæ•°ã€‚åœ¨çº¿æ€§ç»„åˆä¹‹åï¼Œå¯ä»¥å¾—åˆ°ï¼š <span class="math display">$$h_i=\sum_{j=1}^{n_{in}} w_{ij} x_j$$</span> å¯ä»¥è®¤ä¸º<spanclass="math inline"><em>w</em><sub><em>i</em><em>j</em></sub></span>æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„å¹¶ä¸”å‡å€¼ä¸º0æ–¹å·®ä¸º<spanclass="math inline"><em>Ïƒ</em><sup>2</sup></span>é‚£ä¹ˆè®¡ç®—å¾—åˆ°ï¼š <spanclass="math display">ğ”¼[<em>h</em><sub><em>i</em></sub>]â€„=â€„0â€Šâ€ğ”¼[<em>h</em><sub><em>i</em></sub><sup>2</sup>]â€„=â€„<em>n</em><sub><em>i</em><em>n</em></sub><em>Ïƒ</em><sup>2</sup><em>Î³</em></span>è¿™æ ·åœ¨ç»è¿‡ä¸€ä¸ªå±‚ä¹‹åæ•°æ®çš„æ–¹å·®ä¼šæ”¹å˜ï¼Œä¸ºäº†ä¿æŒæ–¹å·®ä¸å˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸Šè¿°çš„åˆå§‹åŒ–æ–¹æ³•ã€‚</p><p><strong>He Initialization</strong>ï¼š(ReLU activations) <spanclass="math display">$$Var(W)= \frac{2}{n_{in}}$$</span> [[æƒé‡åˆå§‹åŒ–.pdf]] å…¶ä¸­<spanclass="math inline"><em>n</em><sub><em>i</em><em>n</em></sub></span>æ˜¯è¿™ä¸€ä¸ªç¥ç»å…ƒå¯¹åº”çš„è¾“å…¥çš„ç¥ç»å…ƒçš„ä¸ªæ•°ã€‚</p><h5 id="baby-sitting-learning">Baby Sitting Learning</h5><p>åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆåœ¨è¾ƒå°çš„æ•°æ®é›†ä¸Šè¿›è¡Œè¿‡æ‹Ÿå’Œï¼ˆåœ¨è¿™ä¸ªè®­ç»ƒé›†ä¸Šçš„æŸå¤±å‡½æ•°æ¥è¿‘0ï¼‰</p><p><strong>å­¦ä¹ ç‡</strong> -å¦‚æœä¸€ä¸ªç½‘ç»œè®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼ŒæŸå¤±å‡½æ•°ä¸å˜æˆ–å˜å¤§ï¼Œé‚£ä¹ˆå¯èƒ½æ˜¯å­¦ä¹ ç‡è¿‡å¤§ï¼Œå¯ä»¥å‡å°å­¦ä¹ ç‡ã€‚- å­¦ä¹ ç‡è¾ƒå°ï¼Œå¯èƒ½ä¼šå¯¼è‡´è®­ç»ƒçš„è¿‡ç¨‹è¾ƒæ…¢ï¼Œå¯ä»¥å¢å¤§å­¦ä¹ ç‡ã€‚</p><p><strong>æ•°å€¼çˆ†ç‚¸</strong>ï¼š -å°½é‡ä½¿ç¥ç»å…ƒä¸é™·å…¥é¥±å’ŒåŒºï¼Œä½¿ç”¨ä¸Šè¿°æƒé‡çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå¯ä»¥å¾ˆå¥½ç¼“è§£ã€‚ -ä½¿å¾—è¾“å…¥ç»è¿‡ä¸€å®šçš„å½’ä¸€åŒ–å¤„ç†ï¼Œå¯ä»¥å°½é‡é¿å…æ•°å€¼çˆ†ç‚¸çš„é—®é¢˜ã€‚</p><p>éªŒè¯è¯¯å·®æ›²çº¿å’Œè®­ç»ƒè¯¯å·®æ›²çº¿ä¹‹é—´çš„å·®è·è¾ƒå¤§ï¼Œå¯èƒ½æ˜¯è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚å¯ä»¥è¿›è¡Œæ—©åœã€‚ç°åœ¨å·²ç»å¯ä»¥ä½¿éªŒè¯è¯¯å·®è¶‹è¿‘äºæ¸è¿‘çº¿ã€‚</p><h5 id="batch-normalization">Batch Normalization</h5><p>å¯¹äºè¾“å…¥çš„æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¯ä»¥åŠ å¿«è®­ç»ƒçš„é€Ÿåº¦ï¼ŒåŒæ—¶å¯ä»¥å‡å°‘æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªbatchçš„æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¯ä»¥ä½¿å¾—æ•°æ®çš„åˆ†å¸ƒæ›´åŠ ç¨³å®šã€‚<span class="math display">$$\hat{x} = \frac{x - \mu}{\sigma}$$</span> è¿™æ˜¯ä¸€ä¸ªéå‚æ•°åŒ–æ–¹æ³•ã€‚å¯ä»¥åŠ å…¥å¯å­¦ä¹ çš„å‚æ•°ï¼š <spanclass="math display"><em>y</em>â€„=â€„<em>Î³</em><em>xÌ‚</em>â€…+â€…<em>Î²</em></span>å…¶ä¸­<span class="math inline"><em>Î¼</em></span>å’Œ<spanclass="math inline"><em>Ïƒ</em></span>æ˜¯å¯¹äºæ¯ä¸€ä¸ªmini-batchçš„å‡å€¼å’Œæ–¹å·®ã€‚</p><p>åœ¨CNNä¸­ï¼Œå¯¹æ¯ä¸€ä¸ªbatchä¸­çš„nä¸ª<spanclass="math inline"><em>w</em>â€…Ã—â€…<em>h</em></span>çš„ç‰¹å¾å›¾è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¯ä»¥ä½¿å¾—æ•°æ®çš„åˆ†å¸ƒæ›´åŠ ç¨³å®šã€‚</p><p>ä¸Šè¿°æ˜¯åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ï¼Œåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸äº†ç§°ä¸º<strong>è®­ç»ƒæ¨ç†å¤±é…</strong><em>traininferencemismatch</em>ã€‚å¯ä»¥ä½¿ç”¨EMAï¼ˆæŒ‡æ•°æ»‘åŠ¨å¹³å‡ï¼‰çš„æ–¹æ³•æ¥è¿›è¡Œæ›¿ä»£ã€‚</p><p>ä¸Šè¿°è¦æ±‚nå¤§æ¦‚æ˜¯16ï¼Œåœ¨æ¯”è¾ƒå¤§çš„æ¨¡å‹ä¸­ï¼Œå¯èƒ½æ˜¾å­˜ä¸å¤Ÿã€‚ä¸Šè¿°æ–¹æ³•æœ‰ä¸€ä¸ªæ›¿ä»£çš„æ–¹æ³•<em>LayerNormalization</em>ï¼Œå¯¹äºæ¯ä¸€ä¸ªæ ·æœ¬è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ã€‚</p><p>åœ¨ä½¿ç”¨äº†<em>BatchNormalization</em>ä¹‹åï¼Œä»ç„¶æœ‰åå˜é‡åç§»<em>covariateshift</em>çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨<em>BatchNormalization</em>ä¹‹åï¼Œ<em>Lipchitz</em>ç³»æ•°å˜åŒ–æ›´åŠ å¹³ç¨³ï¼Œæµ·æ£®çŸ©é˜µä¹Ÿæ›´åŠ ç¨³å®šã€‚ä¸Šè¿°å¯ä»¥ç”¨æ•°å­¦ä¸¥æ ¼è¯æ˜ã€‚ä¸Šè¿°æ“ä½œå¹¶ä¸æ˜¯ç®€å•çš„å½’ä¸€åŒ–ï¼Œè€Œæ˜¯ä½¿å¾—è¡¨ç¤ºçš„å‡½æ•°æ—æ›´åŠ å…‰æ»‘ï¼Œä¸€ä¸ªå…‰æ»‘çš„ã€å‡¸çš„å‡½æ•°æ›´å®¹æ˜“ä¼˜åŒ–ã€‚- Lipchitz: <span class="math display">$$\left\|\nabla_{y_j} \hat{\mathcal{L}}\right\|^2 \leq\frac{\gamma^2}{\sigma_j^2}\left(\left\|\nabla_{y_j}\right\|^2-\frac{1}{m}\left(1,\nabla_{y_j} \mathcal{L}\right)^2-\frac{1}{m}\left(\nabla_{y_j}\mathcal{L}, \hat{y}_j\right)^2\right)$$</span> - Smoothness: <spanclass="math display"><em>Î³</em>â€„&lt;â€„<em>Ïƒ</em> in experiments </span> -Hessian matrix</p><p><span class="math display">$$\left(\nabla_{y_j} \hat{\mathcal{L}}\right)^T \frac{\partial\hat{\mathcal{L}}}{\partial y_j \partial y_j}\left(\nabla_{y_j}\hat{\mathcal{L}}\right) \leq\frac{\gamma^2}{\sigma_j^2}\left(\left(\nabla_{y_j} \mathcal{L}\right)^T\frac{\partial \mathcal{L}}{\partial y_j \partial y_j}\left(\nabla_{y_j}\mathcal{L}\right)-\frac{\gamma}{m \sigma^2}\left(\nabla_{y_j}\mathcal{L}, \hat{y}_j\right)\left\|\nabla_{y_j}\hat{\mathcal{L}}\right\|^2\right)$$</span></p><h5 id="group-normalization">Group Normalization</h5><p>![[{139D48AB-F664-4CE8-AC05-97B772908A85}.png]] åœ¨<em>GroupNormalization</em>ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªé€šé“çš„ç‰¹å¾å›¾è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘è®¡ç®—çš„å¤æ‚åº¦ã€‚æ˜¯è½»é‡åŒ–CNNçš„æ–¹æ³•ã€‚åœ¨ä¸€å®šæ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µä¸‹å¯ä»¥è¾¾åˆ°å’Œ<em>BatchNormalization</em>å·®ä¸å¤šçš„ç»“æœã€‚</p><h3 id="generalization-and-capacity">Generalization and Capacity</h3><ul><li>ç½‘ç»œç»“æ„ä¸åŒç½‘ç»œæ•ˆæœä¸åŒï¼Œå¦‚ç›¸åŒçš„å±‚æ•°ä¸‹ï¼Œå…¨è¿æ¥ç½‘ç»œçš„å‚æ•°é‡å¤§ä½†æ˜¯å’Œå·ç§¯ç½‘ç»œçš„æ•ˆæœå·®ä¸å¤šã€‚</li><li>ç›¸åŒçš„ç½‘ç»œç»“æ„ï¼Œå‚æ•°é‡ä¸åŒï¼Œå‚æ•°é‡å¤šçš„ç½‘ç»œæ•ˆæœæ›´å¥½ã€‚</li></ul><h4id="theorem-arbitrarily-large-neural-networks-can-approximate-any-function">Theorem(Arbitrarily large neural networks can approximate any function)</h4><p>ç†è®ºå¯ä»¥è¡¨è¿°ä¸ºï¼šå¯¹äºä»»æ„çš„è¿ç»­å‡½æ•°ï¼Œå­˜åœ¨ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç¥ç»ç½‘ç»œå¯ä»¥è¿‘ä¼¼è¿™ä¸ªå‡½æ•°ã€‚![[{79D51D58-D7B7-485E-9A0F-5F615FE27545}.png]]ä¸Šé¢è¡¨ç¤ºä¸¤å±‚ç¥ç»ç½‘ç»œå¯ä»¥é€¼è¿‘ä»»æ„çš„è¿ç»­å‡½æ•°ï¼Œè¦æ±‚è¿™ä¸ªå‡½æ•°<spanclass="math inline"><em>Ïƒ</em></span>ä¸æ˜¯å¤šé¡¹å¼å‡½æ•°ã€‚</p><p>![[{862689B6-2775-4822-8FAC-B0450B360BA0}.png]]ä¸Šé¢çš„å®šç†è¡¨ç¤ºç¥ç»ç½‘ç»œçš„å®½åº¦ä¹Ÿå¾ˆé‡è¦ï¼Œå¯ä»¥é€šè¿‡å¢åŠ ç¥ç»å…ƒçš„æ•°é‡æ¥é€¼è¿‘å‡½æ•°ã€‚</p><p>åœ¨ç©ºé—´æŠ˜å çš„é—®é¢˜ä¸­ï¼Œè¡¨æ˜<strong>æ·±åº¦æ¯”å®½åº¦æ›´åŠ é‡è¦</strong>ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-4</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-4/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-4/</url>
    
    <content type="html"><![CDATA[<h2 id="optimization">Optimization</h2><p><strong>Objective Function</strong> <span class="math display">$$\arg \min \mathcal{O(D,\theta)}=  \sum_{i=1}^{N} L(y_i, f(x_i,\theta)) +\Omega(\theta)$$</span> ä¸Šè¿°ç›®æ ‡å¯ä»¥å¯è§†åŒ–ä¸ºä»¥<spanclass="math inline"><em>Î¸</em></span>ä¸ºæ¨ªåæ ‡ã€<spanclass="math inline">ğ’ª</span>ä¸ºçºµåæ ‡çš„å‡½æ•°å›¾åƒï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°å‡½æ•°å›¾åƒçš„æœ€ä½ç‚¹ã€‚è¿™æ˜¯ä¸€ä¸ª<strong>éå‡¸ä¼˜åŒ–</strong>é—®é¢˜ï¼Œæ˜¯åˆå€¼æ•æ„Ÿçš„ã€‚â€œåœ°å½¢å›¾â€æ˜¯å¦ç®€å•æ˜¯ç½‘ç»œè®­ç»ƒæ˜¯å¦å®¹æ˜“çš„å…³é”®ã€‚</p><h3 id="first-order-optimization">First-Order Optimization</h3><p>å¯ä»¥å°†<spanclass="math inline"><em>J</em>(<em>Î¸</em>)</span>å±•å¼€ä¸ºæ³°å‹’çº§æ•°ï¼š <spanclass="math display">$$J(\theta) = J(\theta_0) + \nabla J(\theta_0)^T(\theta - \theta_0) +\frac{1}{2}(\theta - \theta_0)^T H(\theta - \theta_0)$$</span> æ²¿ç€æ¢¯åº¦çš„æ–¹å‘è¿›è¡Œæ›´æ–°ï¼š <spanclass="math display"><em>J</em>(<em>Î¸</em>â€…âˆ’â€…<em>Î·</em><em>g</em>)â€„=â€„<em>J</em>(<em>Î¸</em>)â€…âˆ’â€…<em>Î·</em><em>g</em><sup><em>T</em></sup><em>g</em>â€„â‰¤â€„<em>J</em>(<em>Î¸</em>)</span></p><p><strong>æ¢¯åº¦ä¸‹é™ç®—æ³•çš„é—®é¢˜åœ¨äº</strong>ï¼š - å®¹æ˜“åœ¨éç‚¹å¤„åœæ» -å¯¹äºè¾ƒä¸ºç®€å•çš„å‡¸ä¼˜åŒ–é—®é¢˜ï¼Œå­¦ä¹ ç‡çš„é€‰æ‹©ä¸å¥½éƒ½ä¼šæœ‰å‘æ•£çš„é—®é¢˜ï¼Œè®­ç»ƒå¯¹äºå­¦ä¹ ç‡æ˜¯å¾ˆæ•æ„Ÿçš„</p><p>å¯¹äºå­¦ä¹ ç‡ä¸‹é™çš„ç®—æ³•ï¼Œä¸»æµä½¿ç”¨çš„æ˜¯<em>StepStrategy</em>ï¼Œå³æŸå¤±å‡½æ•°ä¸ä¸‹é™äº†å°±å‡å°‘å­¦ä¹ ç‡ã€‚</p><h4 id="warm-restarts">Warm Restarts</h4><p>ä½¿ç”¨çš„ç­–ç•¥ä¸ºï¼š<em>Cosine Annealing</em>: <spanclass="math display">$$\eta_t = \eta_{min}^i + \frac{1}{2}(\eta_{max}^i - \eta_{min}^i)(1 +\cos(\frac{T_{cur}}{T_{i}}\pi))$$</span></p><p>å…¶ä¸­<spanclass="math inline"><em>T</em><sub><em>c</em><em>u</em><em>r</em></sub></span>ä¸ºå½“å‰çš„è¿­ä»£æ¬¡æ•°ï¼Œ<spanclass="math inline"><em>T</em><sub><em>i</em></sub></span>ä¸ºå½“å‰çš„å‘¨æœŸæ•°ï¼Œ<spanclass="math inline"><em>Î·</em><sub><em>m</em><em>i</em><em>n</em></sub><sup><em>i</em></sup></span>å’Œ<spanclass="math inline"><em>Î·</em><sub><em>m</em><em>a</em><em>x</em></sub><sup><em>i</em></sup></span>åˆ†åˆ«ä¸ºç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªå‘¨æœŸçš„æœ€å°å’Œæœ€å¤§å­¦ä¹ ç‡ã€‚å­¦ä¹ ç‡çš„è¡°å‡ä¸èƒ½æ˜¯çº¿æ€§çš„ï¼Œæ˜¯å…ˆå¿«åæ…¢çš„ã€‚</p><h4 id="convergence-rate">Convergence Rate</h4><ul><li>We assume that <spanclass="math inline"><em>J</em>(<em>Î¸</em>)</span> is convex,differentiable and Lipchitz by constant <spanclass="math inline"><em>L</em></span>. And domain of <spanclass="math inline"><em>Î¸</em></span> is bounded by radius <spanclass="math inline"><em>R</em></span>. With gradient descent update:<spanclass="math display"><em>Î¸</em><sup><em>t</em>â€…+â€…1</sup>â€„=â€„<em>Î¸</em><sup><em>t</em></sup>â€…âˆ’â€…<em>Î·</em>âˆ‡<em>J</em>(<em>Î¸</em><sup><em>t</em></sup>)</span></li></ul>$$<p>$$</p><ul><li>From previous computation, we get the following inequality for everystep <span class="math inline"><em>t</em></span> :</li></ul><p><span class="math display">$$J\left(\theta^t\right)-J\left(\theta^*\right) \leq \frac{1}{2\eta}\left(\left\|\theta^t-\theta^*\right\|^2-\left\|\theta^{t+1}-\theta^*\right\|^2\right)+\frac{\eta}{2}L^2$$</span></p><ul><li>Recall <spanclass="math inline">max<sub><em>Î¸</em>,â€†<em>Î¸</em><sup>â€²</sup></sub>(âˆ¥<em>Î¸</em>â€…âˆ’â€…<em>Î¸</em><sup>â€²</sup>âˆ¥)â€„â‰¤â€„<em>R</em></span>.Assume we update parameters for <spanclass="math inline"><em>T</em></span> steps. We add all equations forall <spanclass="math inline"><em>t</em>â€„âˆˆâ€„{0,â€†1,â€†â€¦,â€†<em>T</em>â€…âˆ’â€…1}</span> :</li></ul><p><span class="math display">$$\begin{aligned}&amp; \sum_t\left(J\left(\theta^t\right)-J\left(\theta^*\right)\right)\leq \frac{1}{2\eta}\left(\left\|\theta^0-\theta_*^*\right\|^2-\left\|\theta^T-\theta^*\right\|^2\right)+\frac{\etaL^2 T}{2} \\&amp; \frac{1}{T} \sum_t J\left(\theta^t\right)-J\left(\theta^*\right)\leq \frac{1}{2 \eta T}\left(R^2+0\right)+\frac{\eta L^2}{2} \\&amp; \frac{1}{T} \sum_t J\left(\theta^t\right)-J\left(\theta^*\right)\leq \frac{R^2}{2 \eta T}+\frac{\eta L^2}{2}\end{aligned}$$</span></p><ul><li>let <span class="math inline">$\eta = \frac{R}{L\sqrt{T}}$</span>:<span class="math display">$$\frac{1}{T} \sum_t J\left(\theta^t\right)-J\left(\theta^*\right) \leq\frac{L}{R} \sqrt{T}$$</span></li></ul><h3 id="second-order-optimization">Second-Order Optimization</h3><p>ä¸ä»…è¦å…³æ³¨ä¸€æ¬¡çš„æ¢¯åº¦ä¿¡æ¯ï¼Œè¿˜è¦å…³æ³¨äºŒæ¬¡çš„ä¿¡æ¯ã€‚äºŒé˜¶ä¼˜åŒ–ç®—æ³•çš„æ ¸å¿ƒæ˜¯HessiançŸ©é˜µï¼Œå¯ä»¥åˆ†è¾¨æ˜¯ä¸æ˜¯éç‚¹ã€‚å‡½æ•°çš„å±•å¼€ä¸ºï¼š <span class="math display">$$J(\theta) = J(\theta_0) + \nabla J(\theta_0)^T(\theta - \theta_0) +\frac{1}{2}(\theta - \theta_0)^T H(\theta - \theta_0)$$</span> èƒ½æ„ŸçŸ¥åˆ°â€œåœ°å½¢å›¾â€ä¸­çš„æ›²ç‡ã€‚ å¯¹äºæµ·æ£®çŸ©é˜µå¯ä»¥è¿›è¡Œç‰¹å¾å€¼åˆ†è§£ï¼š<spanclass="math display"><em>H</em>â€„=â€„<em>Q</em><em>Î›</em><em>Q</em><sup><em>T</em></sup>â€Šâ€andâ€Šâ€<em>H</em><sup>âˆ’1</sup>â€„=â€„<em>Q</em><em>Î›</em><sup>âˆ’1</sup><em>Q</em><sup><em>T</em></sup></span>ç‰¹å¾å€¼ä¸­è¾ƒå¤§å’Œè¾ƒå°çš„ç‰¹å¾å€¼å¦‚æœç›¸å·®è¾ƒå¤§ï¼Œç§°ä¸ºç—…æ€çŸ©é˜µï¼›å¦‚æœä»æœ€å¤§åˆ°æœ€å°çš„å˜åŒ–è¾ƒä¸ºå¹³ç¼“ï¼Œåˆ™è¾ƒä¸ºå…‰æ»‘ã€‚å¦‚æœç‰¹å¾å€¼å…¨ä¸ºæ­£å€¼ï¼Œé‚£ä¹ˆå°±æ˜¯å‡¸å‡½æ•°ï¼›å¦‚æœæœ‰æ­£æœ‰è´Ÿï¼Œé‚£ä¹ˆå°±æ˜¯éç‚¹ã€‚äº‹å®ä¸Šï¼Œä½¿ç”¨çš„æ¢¯åº¦æ–¹æ³•ä¸ºå±€éƒ¨çš„æ–¹æ³•ï¼Œä¸‹é™æ˜¯ç›¸å¯¹è¾ƒæ…¢çš„ã€‚ #### Newtonâ€™sMethod ç‰›é¡¿æ³•çš„è®¡ç®—æ–¹æ³•ä¸ºï¼š <span class="math display">$$\hat{J}(\theta) = J(\theta_0) + \nabla J(\theta_0)^T(\theta - \theta_0)+ \frac{1}{2}(\theta - \theta_0)^T H(\theta - \theta_0)$$</span> æ±‚å¯¼å¾—åˆ°ï¼š <spanclass="math display">âˆ‡<sub><em>Î¸</em></sub><em>JÌ‚</em>(<em>Î¸</em>)â€„=â€„âˆ‡<sub><em>Î¸</em></sub><em>J</em>(<em>Î¸</em><sub>0</sub>)â€…+â€…<em>H</em>(<em>Î¸</em>â€…âˆ’â€…<em>Î¸</em><sub>0</sub>)â€„=â€„0</span>æ±‚è§£å¾—åˆ°ï¼š <spanclass="math display"><em>Î¸</em><sup><em>t</em>â€…+â€…1</sup>â€„=â€„<em>Î¸</em><sup><em>t</em></sup>â€…âˆ’â€…<em>H</em><sup>âˆ’1</sup>âˆ‡<sub><em>t</em><em>h</em><em>e</em><em>t</em><em>a</em></sub><em>J</em>(<em>Î¸</em><sup><em>t</em></sup>)</span>ç‰›é¡¿æ³•çš„ä¼˜ç‚¹åœ¨äºæ”¶æ•›é€Ÿåº¦å¿«ï¼Œä½†æ˜¯ç¼ºç‚¹åœ¨äºè®¡ç®—å¤æ‚åº¦é«˜ï¼Œéœ€è¦è®¡ç®—æµ·æ£®çŸ©é˜µçš„é€†çŸ©é˜µã€‚è®¡ç®—å¤æ‚åº¦ä¸º<spanclass="math inline"><em>O</em>(<em>d</em><sup>3</sup>)</span>ï¼Œå…¶ä¸­<spanclass="math inline"><em>d</em></span>ä¸ºå‚æ•°çš„ä¸ªæ•°ã€‚<strong>åœ¨æ·±åº¦å­¦ä¹ æ—¶ä»£åŸºæœ¬ä¸Šä¸å†ä½¿ç”¨</strong>ã€‚</p><h4 id="quasi-newton-method">Quasi-Newton Method</h4><p>å¯¹äºæµ·æ£®çŸ©é˜µçš„é€†çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‹Ÿç‰›é¡¿æ³•è¿›è¡Œè¿‘ä¼¼ï¼š <spanclass="math display">$$H_{t+1}^{-1} = H_t^{-1} + \frac{y_t y_t^T}{y_t^T s_t} -\frac{H_t^{-1}s_t s_t^T H_t^{-1}}{s_t^T H_t^{-1}s_t}$$</span> å…¶ä¸­<spanclass="math inline"><em>y</em><sub><em>t</em></sub>â€„=â€„âˆ‡<em>J</em>(<em>Î¸</em><sub><em>t</em>â€…+â€…1</sub>)â€…âˆ’â€…âˆ‡<em>J</em>(<em>Î¸</em><sub><em>t</em></sub>)</span>ï¼Œ<spanclass="math inline"><em>s</em><sub><em>t</em></sub>â€„=â€„<em>Î¸</em><sub><em>t</em>â€…+â€…1</sub>â€…âˆ’â€…<em>Î¸</em><sub><em>t</em></sub></span>ã€‚<strong>åœ¨çŸ©é˜µè®¡ç®—çš„æ—¶å€™è¦å°†è¾ƒå°çš„çŸ©é˜µå…ˆä¹˜ï¼Œè¿™æ ·å¯ä»¥è®¡ç®—å¤æ‚åº¦</strong></p><h2 id="optimization-in-deep-learning">Optimization in DeepLearning</h2><p>[[Deep Learning Lecture-2#Optimization in Practice]]</p><p>æ˜¯éå‡¸ä¼˜åŒ–é—®é¢˜ï¼Œä¼˜åŒ–çš„ç›®çš„åœ¨äºæ‰¾åˆ°ä¸€ä¸ªè¾ƒå¥½çš„å±€éƒ¨æå€¼ã€‚æ¯”è¾ƒå¥½çš„å±€éƒ¨æå€¼æ˜¯æ¯”è¾ƒä½çš„ã€æ¯”è¾ƒå¹³ç¼“çš„å±€éƒ¨æå€¼ï¼Œå¯¹äºæ¯”è¾ƒé™¡å³­çš„å±€éƒ¨æå€¼æ³›åŒ–èƒ½åŠ›æ¯”è¾ƒå·®ï¼ˆå¯¹æµ‹è¯•æ•°æ®çš„å¾®å°å˜åŒ–æ•æ„Ÿï¼‰ã€‚</p><p>å¥½çš„å±€éƒ¨æå€¼æœ‰ä¸€äº›ç‰¹æ€§ï¼š - å€¼æ¯”è¾ƒä½ -æ˜¯â€ç›†åœ°â€œï¼Œè¿™æ ·æœ‰åˆ©äºæ¨¡å‹çš„æ³›åŒ–</p><h3 id="mini-batch">mini-batch</h3><p><strong>mini-batchSGD</strong>ï¼šåœ¨æ¯ä¸€è½®éå†<em>epoch</em>åï¼Œå¯¹æ•°æ®è¿›è¡Œéšæœºçš„æ‰“ä¹±<em>Shuffle</em>ï¼Œç„¶ååˆ†æˆè‹¥å¹²ä¸ªbatchï¼Œå¯¹æ¯ä¸€ä¸ªbatchè¿›è¡Œå‚æ•°çš„æ›´æ–°ã€‚è¿™æ ·å¯ä»¥å‡å°‘è®¡ç®—çš„æ—¶é—´ï¼ŒåŒæ—¶å¯ä»¥å‡å°‘è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚</p><ul><li>mini-batchçš„å¤§å°å¯¹äºè®­ç»ƒçš„å½±å“ï¼Œä¸€èˆ¬è€Œè¨€è¾ƒå¤§çš„mini-batchä¼šæœ‰æ›´å¥½çš„æ”¶æ•›æ€§ï¼Œä½†æ˜¯è®¡ç®—å¤æ‚åº¦æ›´é«˜ã€‚</li><li>ç”±äºä¸ä¸€æ ·çš„å°æ ·æœ¬é€‰æ‹©ä¼šå¼•å…¥ä¸€å®šçš„éšæœºæ€§ï¼Œè¿™æ ·æ˜¯æœ‰åˆ©äºè·³å‡ºå±€éƒ¨æå€¼çš„ã€‚</li><li>ç”±äºmini-batchçš„é€‰æ‹©æ˜¯æœ‰éšæœºæ€§çš„ï¼Œä¸åŒçš„batchçš„éš¾åº¦ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™æ—¶å€™å‡ºç°Lossçš„è§„å¾‹æ€§çš„éœ‡è¡æ˜¯å¾ˆæ­£å¸¸çš„ã€‚</li><li>çŸ©é˜µæœ€å¤§å¥‡å¼‚å€¼ä¸æœ€å°å¥‡å¼‚å€¼çš„æ¯”å€¼ç§°ä¸ºçŸ©é˜µçš„æ¡ä»¶æ•°ï¼Œæ¡ä»¶æ•°è¶Šå¤§ï¼ŒçŸ©é˜µè¶Šç—…æ€ã€‚å¯¹äºç—…æ€çŸ©é˜µï¼ŒSGDçš„æ”¶æ•›é€Ÿåº¦ä¼šå˜æ…¢ã€‚</li></ul><h3 id="learning-rate-decay">Learning Rate Decay</h3><p>åˆå§‹å­¦ä¹ ç‡è¾ƒå¤§ï¼Œéšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ ï¼Œå­¦ä¹ ç‡é€æ¸å‡å°ã€‚æœ‰ç›¸å¯¹åº”çš„è¡°å‡ç­–ç•¥ã€‚<em>Exponential decay</em>: <spanclass="math display"><em>Î·</em><sub><em>t</em></sub>â€„=â€„<em>Î·</em><sub>0</sub>â€…â‹…â€…<em>e</em><sup>âˆ’<em>Î±</em><em>t</em></sup></span><em>Inverse decay</em>: <span class="math display">$$\eta_t = \frac{\eta_0}{1+\alpha t}$$</span> ### SGD Stochastic Gradient Descent #### SGD with Momentum</p><p><strong>SGD with Momentum</strong>:</p><p>å¯¹äºä¸‹é¢çš„æ›´æ–°å…¬å¼ï¼š</p><p><spanclass="math display"><em>Î¸</em><sub><em>i</em><em>j</em></sub>â€„=â€„<em>Î¸</em><sub><em>i</em><em>j</em></sub>â€…âˆ’â€…<em>Î·</em><em>Î”</em></span>åœ¨é«˜ç»´ä¸­ï¼Œåœ°å½¢æ˜¯ç›¸å¯¹è€Œè¨€è¾ƒä¸ºå´å²–çš„ï¼Œè¿™é‡Œçš„å­¦ä¹ ç‡ä¸€èˆ¬æ˜¯æ¯”è¾ƒå°çš„ï¼Œå¦åˆ™å®¹æ˜“å‘æ•£ã€‚åœ¨æ¥è¿‘äºå±€éƒ¨æå€¼çš„æ—¶å€™ã€‚è¾ƒå¤§çš„å­¦ä¹ ç‡å­¦ä¹ çš„æ˜¯è¾ƒä¸ºç²—ç³™çš„ç‰¹å¾ï¼Œè¾ƒå°çš„å­¦ä¹ ç‡å­¦ä¹ çš„æ˜¯è¾ƒä¸ºç»†è‡´çš„ç‰¹å¾ã€‚</p><p><span class="math display">$$\Delta = \beta \Delta - \eta \frac{\partial J(\theta)}{\partial\theta_{ij}}$$</span> <spanclass="math inline"><em>Î²</em></span>æ˜¯åŠ¨é‡å‚æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºä¹‹å‰çš„æ¢¯åº¦çš„ç´¯ç§¯ã€‚</p><p><strong>Nesterov Momentum:</strong> <span class="math display">$$\begin{aligned}&amp;\tilde{\theta}^{t} = \theta^{t} - \beta \Delta^{t-1} \\&amp;\Delta^{t} = \beta \Delta^{t-1} + (1-\beta)\nabla J^t(\tilde{\theta}^t)\\&amp;\theta^{t+1} = \theta^t - \eta \Delta^t\\\end{aligned}$$</span>åœ¨æ·±åº¦å­¦ä¹ çš„å®ç°ä¸­ä½¿ç”¨çš„ä¸€èˆ¬æ˜¯è¿™ç§ã€‚èµ°åŠ¨é‡çš„æ–¹å‘å¯ä»¥å‡å°‘éœ‡è¡ï¼ŒåŒæ—¶å¯ä»¥åŠ é€Ÿæ”¶æ•›ã€‚å½“åˆ°è¾¾äº†æ¯”è¾ƒå¥½çš„å±€éƒ¨æå€¼æ—¶å€™åˆä¼šåœ¨è¿™ä¸ªå€¼çš„é™„è¿‘æŠ–åŠ¨ã€‚è¶…å‚æ•°ï¼š<span class="math inline"><em>Î²</em></span>ï¼Œä¸€èˆ¬è€Œè¨€<spanclass="math inline"><em>Î²</em></span>å–0.9æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œè¶Šå¤§çš„å€¼è¶Šå®¹æ˜“è¿›è¡Œéœ‡è¡ã€‚å­¦ä¹ ç‡0.01ã€0.003ã€0.001ä¸€èˆ¬æŒ‰ç…§æŒ‡æ•°å˜åŒ–ã€‚</p><p>æ˜¯åœ¨æ¯æ¬¡æ›´æ–°å®Œ<spanclass="math inline"><em>Î¸</em></span>ä¹‹åï¼ˆè¿›è¡Œè¯•æ¢ä¹‹åæ‰è¿›è¡Œè®¡ç®—ï¼‰æ‰è¿›è¡Œæ¢¯åº¦çš„è®¡ç®—ï¼Œå¯ä»¥é¿å…ä¸€äº›<em>overshoot</em>ã€‚æ ¸å¿ƒçš„æ€æƒ³ä¸ºå¤šè·å–ä¸€äº›äºŒæ¬¡çš„ä¿¡æ¯ã€‚</p><h3 id="weight-decay"><em>Weight Decay</em></h3><p>åŠ å…¥æ­£åˆ™é¡¹ï¼Œå¯¹äºå‚æ•°çš„æ›´æ–°è¿›è¡Œé™åˆ¶ï¼Œæ§åˆ¶å‡è®¾ç©ºé—´çš„å¤§å°ï¼Œå¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚ä½†æ˜¯åœ¨æ·±åº¦å­¦ä¹ ä¸­å¹¶ä¸å¤Ÿã€‚</p><p><em>L1 regularization</em> <span class="math display">$$\Omega(\theta) = \lambda \sum_{l=1}^{L} \sum_{i=1}^{n_l}\sum_{j=1}^{n_{l+1}} |\theta_{ij}^{(l)}|$$</span> <em>L2 regularization</em> <span class="math display">$$\Omega(\theta) = \lambda \sum_{l=1}^{L} \sum_{i=1}^{n_l}\sum_{j=1}^{n_{l+1}} (\theta_{ij}^{(l)})^2$$</span></p><h3 id="adaptive-learning-rate">Adaptive Learning Rate</h3><p>ç›´è§‚ç†è§£ä¸ºåœ¨ä¸åŒçš„â€œåœ°å½¢â€ä¸Šéœ€è¦ä½¿ç”¨çš„å­¦ä¹ ç‡ï¼ˆæ­¥é•¿ï¼‰æ˜¯ä¸ä¸€æ ·çš„ã€‚å¯¹äºä¸åŒçš„å‚æ•°ä½¿ç”¨ä¸åŒçš„å­¦ä¹ ç‡ã€‚<strong>Adagrad</strong>ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ä¸ºï¼š<span class="math display">$$\begin{aligned}&amp;r^t = r^{t-1} + \nabla J^t(\theta^t) \odot \nabla J^t(\theta^t)\\&amp;h^t = \frac{1}{\sqrt{r^t} + \delta} \\&amp;\Delta^t = h^t \odot \nabla J^t(\theta^t)\\&amp;\theta^{t+1} = \theta^t - \eta \Delta^t\end{aligned}$$</span> <em>ä¸Šè¿°å…¬å¼ä¸­çš„ç¬¬äºŒè¡Œä¸ºé€å…ƒç´ æ“ä½œ</em> å…¶ä¸­<spanclass="math inline">âŠ™</span>ä¸ºå¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼Œ<spanclass="math inline"><em>Î´</em></span>ä¸ºä¸€ä¸ªå¾ˆå°çš„æ•°ï¼Œé˜²æ­¢åˆ†æ¯ä¸º0ã€‚è¿™æ ·å¯ä»¥ä¿è¯åœ¨ä¸åŒçš„åœ°å½¢ä¸Šä½¿ç”¨ä¸åŒçš„å­¦ä¹ ç‡ã€‚<strong>æœ¬è´¨ä¸Šä¸ºæ¢ç´¢â€åœ°å½¢å›¾â€</strong>ã€‚ä½†æ˜¯Adagradçš„é—®é¢˜åœ¨äºéšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ ï¼Œåˆ†æ¯ä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œå¯¼è‡´å­¦ä¹ ç‡ä¼šå˜å¾—è¶Šæ¥è¶Šå°ï¼Œæœ€ç»ˆä¼šå¯¼è‡´å­¦ä¹ ç‡ä¸º0ï¼Œè¿™æ ·å°±ä¸å†æ›´æ–°äº†ã€‚</p><p><strong>RMSprop</strong>ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ä¸ºï¼šå¯¹Adagradçš„åˆ†æ¯è¿›è¡ŒæŒ‡æ•°æ»‘åŠ¨å¹³å‡ï¼š<span class="math display">$$\begin{aligned}&amp;r^t = \rho r^{t-1} + (1-\rho)\nabla J^t(\theta^t) \odot \nablaJ^t(\theta^t)\\&amp;h^t = \frac{1}{\sqrt{r^t} + \delta} \\&amp;\Delta^t = h^t \odot \nabla J^t(\theta^t)\\&amp;\theta^{t+1} = \theta^t - \eta \Delta^t\end{aligned}$$</span></p><p><strong>Adam</strong>ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ä¸ºï¼šç»“åˆäº†SGD withMomentumå’ŒRMSpropï¼š <span class="math display">$$\begin{aligned}&amp; r^t = \rho r^{t-1} + (1-\rho)\nabla J^t(\theta^t) \odot \nablaJ^t(\theta^t)\\&amp; h^t = \frac{1}{\sqrt{r^t} + \delta} \\&amp; s^t = \varepsilon s^{t-1} + (1-\epsilon)\nabla J^t(\theta^t)\\&amp; \Delta^t = h^t \odot s^t \\&amp; \theta^{t+1} = \theta^t - \eta \Delta^t\end{aligned}$$</span> å®é™…ä½¿ç”¨çš„å‚æ•°ä¸º<spanclass="math inline"><em>Ï</em>â€„=â€„0.9</span>ï¼Œ<spanclass="math inline"><em>Îµ</em>â€„=â€„0.9</span>ï¼Œ<spanclass="math inline"><em>Ï</em>â€„=â€„0.999</span>å¯¹äºå­¦ä¹ ç‡çš„ä¸‹é™ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨å¯¹åº”çš„ç®—æ³•ï¼Œå¯¹äºå®é™…ä½¿ç”¨çš„ç®—æ³•ï¼Œè¿˜éœ€è¦å¯¹<spanclass="math inline"><em>r</em></span>ã€<spanclass="math inline"><em>s</em></span>è¿›è¡Œæ— åä¿®æ­£ã€‚</p><p>Nadamç®—æ³•ä¸ºAdamç®—æ³•çš„å˜ç§ï¼Œå¯¹äºSGD withMomentumçš„æ›´æ–°è¿›è¡Œäº†ä¿®æ­£ã€‚</p><p>è°ƒå‚ä¸€èˆ¬è€Œè¨€æ˜¯ï¼Œå¯¹äºä¸€ä¸ªæ¨¡å‹æ‰¾åˆ°å¯¹äºå…¶æœ€å¥½çš„ä¼˜åŒ–å™¨ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-5</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-5/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-5/</url>
    
    <content type="html"><![CDATA[<h2 id="recurrent-network">Recurrent Network</h2><h3 id="sequence-model">Sequence Model</h3><p>åºåˆ—å»ºæ¨¡ä»»åŠ¡æ˜¯æŒ‡å¯¹ä¸€ä¸ªåºåˆ—çš„è¾“å…¥è¿›è¡Œå»ºæ¨¡ï¼Œæ¯”å¦‚æ–‡æœ¬ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ã€‚åºåˆ—æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯åºåˆ—ï¼Œæ¯”å¦‚æœºå™¨ç¿»è¯‘ã€è¯­éŸ³è¯†åˆ«ã€è§†é¢‘åˆ†ç±»ç­‰ä»»åŠ¡ã€‚é‡è¦çš„æ˜¯<strong>æ•æ‰åºåˆ—ä¸­çš„ä¸Šä¸‹æ–‡</strong>ã€‚</p><h3 id="basic-principle">Basic Principle</h3><h4 id="local-dependency">Local Dependency</h4><p><strong>LocalDependency</strong>ï¼šå¯¹äºä¸€ä¸ªåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒçš„é¢„æµ‹æ˜¯ä¾èµ–äºå®ƒçš„å‰é¢çš„å…ƒç´ çš„ã€‚è¿™ç§ä¾èµ–å…³ç³»æ˜¯<strong>å±€éƒ¨çš„</strong>ã€‚</p><p><span class="math display">$$P(x_1,x_2,\dots,x_T) = \prod_{t=1}^{T} P(x_t|x_1,\dots,x_{t-1}) =\prod_{t=1}^{T} g(s_{t-2},x_{t-1})$$</span></p><p>å¦‚æœå¼•å…¥é©¬å°”ç§‘å¤«æ€§ï¼Œé‚£ä¹ˆæŸå¤±çš„ä¿¡æ¯å¤ªå¤šäº†ã€‚å› æ­¤æˆ‘ä»¬å¼•å…¥ä¸€ä¸ªéšè—çŠ¶æ€<spanclass="math inline"><em>s</em><sub><em>t</em></sub></span>ï¼Œ<spanclass="math inline"><em>s</em><sub><em>t</em></sub></span>çš„ä¿¡æ¯æ˜¯å‰é¢çš„å…ƒç´ çš„ä¿¡æ¯çš„ä¸€ä¸ªç¼–ç ã€‚å‡è®¾ç¬¬<spanclass="math inline"><em>t</em></span>æ—¶é—´çš„å…ƒç´ çš„ä¿¡æ¯éƒ½è¢«ç¼–ç åˆ°äº†<spanclass="math inline"><em>s</em><sub><em>t</em>â€…âˆ’â€…2</sub></span>å’Œ<spanclass="math inline"><em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub></span>ä¸­ï¼Œ<spanclass="math inline"><em>s</em><sub><em>t</em>â€…âˆ’â€…2</sub></span>æ˜¯ä¸€ä¸ªå‘é‡ï¼Œ<spanclass="math inline"><em>g</em></span>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ<spanclass="math inline"><em>s</em><sub><em>t</em>â€…âˆ’â€…2</sub></span>æ˜¯ä¸€ä¸ªéšè—çŠ¶æ€ã€‚æˆ‘ä»¬è®¤ä¸ºæ—¶é—´ä¸Šä¹Ÿå­˜åœ¨ä¸€ä¸ªæ„Ÿå—é‡ã€‚è¿™ä¸ªæ€è€ƒè¿‡ç¨‹å’Œäººä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåœ¨å¤„ç†åºåˆ—é—®é¢˜æ—¶ï¼Œä¹Ÿä¿å­˜æ—©äº›æ—¶å€™çš„ä¸€äº›ä¿¡æ¯ã€‚</p><p>å¦å¤–ä¹Ÿæœ‰æ—¶é—´ä¸Šçš„<strong>å¹³ç¨³æ€§å‡è®¾</strong>ï¼Œè¿™ä¸ªå‡è®¾æ˜¯äººå·¥æ™ºèƒ½èƒ½é¢„æµ‹æœªæ¥çš„ç†è®ºåŸºç¡€ã€‚æœ¬è´¨æ˜¯æ—¶é—´ä¸Šçš„ç‹¬ç«‹åŒåˆ†å¸ƒå‡è®¾ã€‚</p><h4 id="parametric-sharing">Parametric Sharing</h4><p>ä¸åŒæ—¶åˆ»ä½¿ç”¨çš„å‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§é™ä½å‚æ•°é‡ã€‚è¿™æ ·çš„æ¨¡å‹æ˜¯<strong>å¾ªç¯ç¥ç»ç½‘ç»œ</strong>ã€‚</p><h4 id="language-model">Language Model</h4><p>è¯­è¨€ä¸­çš„å»ºæ¨¡ä»»åŠ¡ä¸ºï¼šç»™å®šä¸€ä¸ªå¥å­çš„å‰é¢çš„å•è¯ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªå•è¯ã€‚è¿™ä¸ªä»»åŠ¡è¢«ç§°ä¸ºè¯­è¨€æ¨¡å‹ã€‚è¯­è¨€æ¨¡å‹çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–å¥å­çš„æ¦‚ç‡ã€‚è¯­è¨€æ¨¡å‹çš„è¾“å…¥æ˜¯ä¸€ä¸ªå¥å­ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªå•è¯çš„æ¦‚ç‡ã€‚</p><p><strong>å‘é‡åŒ–è¡¨è¾¾</strong>ï¼šå¯ä»¥ä½¿ç”¨one-hotå‘é‡è¡¨ç¤ºå•è¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¯å‘é‡è¡¨ç¤ºå•è¯ã€‚æ¯ä¸ªè¯çš„è¡¨è¾¾å¤§æ¦‚éœ€è¦1000ç»´åº¦ã€‚å¦‚æœä½¿ç”¨MLPï¼Œè¦å°†æ¯ä¸ªè¯çš„å‘é‡æ‹¼æ¥èµ·æ¥ï¼Œç„¶åè¾“å…¥åˆ°MLPä¸­ã€‚è¿™æ ·çš„æ¨¡å‹ä¸é€‚åˆå¤„ç†é•¿åºåˆ—ï¼Œå‚æ•°æ˜¯éå¸¸å¯æ€•çš„ã€‚åœ¨MLPä¸­ä¸¢å¤±äº†ä¸€éƒ¨åˆ†çš„ä¿¡æ¯ï¼ˆç”±äºMLPçš„è¾“å…¥ç»´åº¦æ˜¯å¯äº¤æ¢çš„ï¼‰ï¼Œä¸¢å¤±äº†å‰ååºå…³ç³»ã€‚</p><h4 id="a-better-mlp">A Better MLP</h4><p><strong>n-gram</strong>ï¼šä½¿ç”¨n-gramæ¨¡å‹ï¼Œå¯ä»¥è€ƒè™‘å‰nä¸ªå•è¯çš„ä¿¡æ¯ã€‚</p><p>![[Pasted image 20250320225821.png]]è¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒæ˜¯ä¸€ä¸ªsoftmaxå±‚ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªå‘é‡ï¼Œè¿™ä¸ªå‘é‡æ˜¯å‰nä¸ªå•è¯çš„å‘é‡æ‹¼æ¥èµ·æ¥çš„ã€‚ç„¶ååœ¨å¾—åˆ°çš„æ¦‚ç‡åˆ†å¸ƒä¸Šè¿›è¡Œé‡‡æ ·ã€‚<strong>æ»šåŠ¨é¢„æµ‹</strong>ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªæ¬¡çš„é¢„æµ‹ç»“æœä½œä¸ºç¬¬äºŒæ¬¡çš„è¾“å…¥ï¼Œä¼šæœ‰<strong>è¯¯å·®ç´¯è®¡</strong>çš„é—®é¢˜ã€‚ä½†æ˜¯ä¸Šè¿°æ¨¡å‹ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå‚æ•°é‡å¤ªå¤§ï¼›å¯¹äºæ¯ä¸€ä¸ªè¯çš„é¢„æµ‹éœ€è¦æœ‰ä¸€ä¸ªMLPï¼Œè¿™æ ·çš„æ¨¡å‹ä¸é€‚åˆå¤„ç†é•¿åºåˆ—ã€‚### RNN</p><p>![[Pasted image 20250321083321.png]]</p><p>å¾ªç¯ç¥ç»ç½‘ç»œä¸­æœ€é‡è¦çš„å†…å®¹æ˜¯ä¸­é—´çš„éšè—å±‚ï¼Œæ„å»ºå­¦ä¹ åˆ°çš„æ—¶é—´ç¨‹åº¦ä¸Šçš„ç‰¹å¾ã€‚åœ¨æ¯ä¸ªæ—¶åˆ»è¾“å…¥çš„éƒ½æ˜¯å‘é‡ï¼Œç§°ä¸º<em>tokenembedding</em>ã€‚ ä¸Šè¿°æ¨¡å‹åœ¨çºµå‘æ–¹å‘ä¸Šï¼Œä»<spanclass="math inline"><em>x</em><sub><em>t</em></sub></span>åˆ°<spanclass="math inline"><em>y</em><sub><em>t</em></sub></span>å°±æ˜¯ä¸€ä¸ªå‰é¦ˆç½‘ç»œ<em>feedforwardnetwork</em>ï¼ˆåŒ…æ‹¬MLPå’ŒCNNï¼‰ã€‚åœ¨æ¨ªå‘æ–¹å‘ä¸Šï¼Œä»<spanclass="math inline"><em>s</em><sub><em>t</em>â€…âˆ’â€…1</sub></span>åˆ°<spanclass="math inline"><em>s</em><sub><em>t</em></sub></span>å°±æ˜¯ä¸€ä¸ªå¾ªç¯ç½‘ç»œ<em>recurrentnetwork</em>ã€‚ #### Recurrent Layer <spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>ç”¨æ¥ç¼–ç <spanclass="math inline"><em>t</em></span>æ—¶åˆ»ä¹‹å‰çš„æ‰€æœ‰ä¿¡æ¯ã€‚å¯¹äºè¿™æ ·çš„å±‚ï¼Œæ¥å—çš„è¾“å…¥æ˜¯<spanclass="math inline"><em>x</em><sub><em>t</em></sub></span>å’Œ<spanclass="math inline"><em>h</em><sub><em>t</em>â€…âˆ’â€…1</sub></span>ï¼Œè¾“å‡ºæ˜¯<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>ã€‚<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<spanclass="math display"><em>h</em><sub><em>t</em></sub>â€„=â€„<em>f</em><sub><em>W</em></sub>(<em>h</em><sub><em>t</em>â€…âˆ’â€…1</sub>,â€†<em>x</em><sub><em>t</em></sub>)</span><spanclass="math display"><em>h</em><sub><em>t</em></sub>â€„=â€„tanhâ€†(<em>W</em><em>h</em><sub><em>t</em>â€…âˆ’â€…1</sub>â€…+â€…<em>U</em><em>x</em><sub><em>t</em></sub>)</span>é•¿æœŸä»¥æ¥ä½¿ç”¨çš„æ˜¯åŒæ›²æ­£åˆ‡ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œä½†æ˜¯ä½¿ç”¨ReLuå¯èƒ½æœ‰æ›´å¥½çš„æ¢¯åº¦æ€§è´¨ã€‚<spanclass="math display"><em>y</em><sub><em>t</em></sub>â€„=â€„<em>V</em><em>h</em><sub><em>t</em></sub></span>å¯ä»¥è®¤ä¸º<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>åŒ…å«äº†ä¹‹å‰çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ‰€ä»¥ä½¿ç”¨<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>æ¥é¢„æµ‹<spanclass="math inline"><em>y</em><sub><em>t</em></sub></span>ã€‚<strong>é€šè¿‡å¼•å…¥çŠ¶æ€å˜é‡æ¥ä½¿å¾—é€’æ¨å…¬å¼åœ¨å½¢å¼ä¸Šæ˜¯äºŒé˜¶ä¾èµ–ã€‚</strong></p><h4 id="bidirectionaldeep-rnn">Bidirectional&amp;Deep RNN</h4><p>![[Pasted image 20250321091923.png]]</p><p>![[Pasted image 20250321091936.png]]</p><p>è¿™é‡Œçºµå‘æ–¹å‘ä¸Šçš„å‰é¦ˆç½‘ç»œä¸­çš„è®­ç»ƒéš¾ç‚¹åœ¨å‰é¢çš„MLPä¸CNNä¸­æ˜¯ä¸€æ ·çš„ï¼Œæ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ã€‚ä¸Šé¢çš„å›¾ä¸­çš„<spanclass="math inline"><em>y</em><sub><em>t</em>,â€†<em>c</em></sub></span>æ˜¯çœŸæ˜¯æ ‡ç­¾çš„ç‹¬çƒ­ç¼–ç ï¼Œ<spanclass="math inline"><em>C</em></span>æ˜¯æ­¤è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</p><p>åœ¨æ¨ªå‘æ–¹å‘ä¸Šï¼Œæ¢¯åº¦æ¶ˆå¤±æ˜¯å¾ˆä¸¥é‡çš„ã€‚å› ä¸º<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>åŒ…å«äº†<spanclass="math inline"><em>h</em><sub><em>t</em>â€…âˆ’â€…1</sub></span>çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æ¢¯åº¦ä¼šåœ¨æ—¶é—´ä¸ŠæŒ‡æ•°çº§çš„è¡°å‡ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯<strong>LSTM</strong>å’Œ<strong>GRU</strong>ã€‚</p><h4 id="rnn-for-lm">RNN for LM</h4><ul><li>ç†è®ºä¸Šï¼Œå¯ä»¥è¡¨è¾¾æ²¡æœ‰è¾¹ç•Œçš„æ—¶é—´ä¸Šçš„ä¾èµ–ï¼Œç”±äºå°†çŠ¶æ€å˜é‡ç¼–ç ä¸º<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>ï¼Œ<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>åŒ…å«äº†ä¹‹å‰çš„æ‰€æœ‰ä¿¡æ¯ã€‚</li><li>å°†åºåˆ—ç¼–ç åˆ°ä¸€ä¸ªå‘é‡ä¸­ï¼Œè¿™ä¸ªå‘é‡åŒ…å«äº†æ•´ä¸ªåºåˆ—çš„ä¿¡æ¯ã€‚</li><li>å‚æ•°åœ¨æ—¶é—´ä¸Šæ˜¯å…±äº«çš„</li><li>ä½†æ˜¯åœ¨å®é™…ä¸Šï¼Œå¾ˆéš¾å»ºæ¨¡æ—¶é—´ä¸Šçš„é•¿æ—¶é—´ä¾èµ–ã€‚å¯¹äºè¾ƒæ—©çš„ä¿¡æ¯ï¼Œåé¢çš„æƒé‡ä¼šå¾ˆå°ã€‚</li></ul><p><strong>ä¸€ä¸ªæ¨¡å‹æ˜¯å¦æœ‰æ•ˆï¼Œåœ¨äº<em>assumptions</em>ä¸å®é™…æƒ…å†µæ˜¯å¦åŒ¹é…ã€‚</strong></p><h4 id="architecture">Architecture</h4><p>![[Pasted image 20250321102900.png]]</p><h5 id="many-to-one">Many to One</h5><p>ä¸»è¦å®ç°çš„æ˜¯æƒ…æ„Ÿè¯†åˆ«ã€æ–‡æœ¬åˆ†ç±»ç­‰ä»»åŠ¡ã€‚åœ¨æœ€åä¸€ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºæ˜¯æœ€ç»ˆçš„è¾“å‡ºã€‚æœ€åä¸€ä¸ªæ—¶åˆ»çš„çŠ¶æ€ä¸ä¸€å®šåŒ…å«æœ‰é‡è¦çš„ä¿¡æ¯ï¼ˆæ¯”å¦‚ä¸Šä¸‹æ–‡ä¸­çš„æƒ…æ„Ÿè¯ï¼‰ã€‚</p><h5 id="one-to-many">One to Many</h5><p>å¯èƒ½çš„è¾“å…¥æœ‰ï¼Œæ¯”å¦‚è¾“å…¥ä¸€ä¸ªå›¾åƒçš„ç‰¹å¾å‘é‡å†è¾“å…¥åˆ°è¿™ä¸ªç½‘ç»œä¸­ã€‚å¯¹äºè¿™ä¸ªè¾“å…¥ï¼Œåº”è¯¥æ˜¯è¾“å…¥æ¯ä¸ªçŠ¶æ€è¿˜æ˜¯è¾“å…¥æ‰€æœ‰çš„çŠ¶æ€ã€‚å¹¶æ²¡æœ‰è§£å†³æ¯ä¸€ä¸ªè¯å¯¹åº”å›¾ä¸­çš„å“ªä¸€ä¸ªåŒºåŸŸçš„é—®é¢˜ã€‚</p><h5 id="many-to-many">Many to Many</h5><p>æœ‰ä¸¤ç§æƒ…å†µï¼Œè¾“å…¥æ˜¯æ¯ä¸ªæ—¶åˆ»çš„è¯­éŸ³çš„å› ç´ ï¼Œè¾“å‡ºçš„æ˜¯å¯¹åº”çš„symbolï¼Œæ˜¯è¾“å…¥è¾“å‡ºå¹³è¡Œ<em>parallel</em>çš„ï¼Œä½†æ˜¯è¾“å…¥å’Œè¾“å‡ºæ˜¯å¼‚æ„çš„ã€‚</p><p>LMè¾“å…¥å’Œè¾“å‡ºæ˜¯åŸºæœ¬ä¸Šå¹³è¡Œçš„ï¼Œä½†æ˜¯æ»åä¸€ä¸ªæ—¶åˆ»ï¼Œæ˜¯è‡ªå›å½’<em>autoregressive</em>çš„ã€‚##### Sequence to Sequence</p><p>è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯åºåˆ—ï¼Œè¾“å…¥å’Œè¾“å‡ºçš„é•¿åº¦ä¸ä¸€å®šç›¸åŒã€‚æ¯”å¦‚æœºå™¨ç¿»è¯‘ã€è¯­éŸ³è¯†åˆ«ç­‰ä»»åŠ¡ã€‚è¿™ä¸ªä»»åŠ¡å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šç¼–ç å™¨å’Œè§£ç å™¨ã€‚ç¼–ç å™¨å°†è¾“å…¥åºåˆ—ç¼–ç åˆ°ä¸€ä¸ªå‘é‡ä¸­ï¼Œè§£ç å™¨å°†è¿™ä¸ªå‘é‡è§£ç åˆ°è¾“å‡ºåºåˆ—ä¸­ã€‚</p><p>![[Pasted image 20250321110238.png]]</p><p><em>ä¸ºä»€ä¹ˆä¸Šè¿°åºåˆ—ä¸­çš„å‚æ•°<spanclass="math inline"><em>W</em><sub>1</sub></span>å’Œ<spanclass="math inline"><em>W</em><sub>2</sub></span>æ˜¯ä¸ä¸€æ ·çš„ï¼Ÿ</em></p><p>é¦–å…ˆå°†è¾“å…¥å˜é‡<spanclass="math inline">{<em>x</em><sub><em>t</em></sub>}</span>ç¼–ç åˆ°çŠ¶æ€å˜é‡<spanclass="math inline">{<em>h</em><sub><em>t</em></sub>}</span>ä¸­ï¼Œç„¶åå†å°†çŠ¶æ€å˜é‡<spanclass="math inline">{<em>h</em><sub><em>t</em></sub>}</span>è§£ç åˆ°è¾“å‡ºå˜é‡<spanclass="math inline">{<em>y</em><sub><em>t</em></sub>}</span>ä¸­ã€‚ç¼–ç å™¨æ˜¯æ²¡æœ‰lossfunctionçš„ï¼Œå› ä¸ºè¾“å…¥å’Œè¾“å‡ºæ˜¯å¼‚æ„çš„ã€‚è§£ç å™¨æ¥å—çš„è¾“å…¥æ˜¯ç¼–ç å™¨çš„è¾“å‡ºï¼Œè§£ç å™¨çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚è§£ç å™¨çš„lossfunctionæ˜¯äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚</p><p><strong>æœºå™¨ç¿»è¯‘ä»»åŠ¡ä¸­çš„æŒ‘æˆ˜</strong>ï¼š - è¾“å…¥å’Œè¾“å‡ºæ˜¯å¼‚æ„çš„ -é•¿åºåˆ—çš„å¤„ç†</p><p>![[Pasted image 20250321130443.png]]</p><p><strong>å¦‚ä½•ä»æ¦‚ç‡ä¸­é‡‡æ ·</strong>ï¼š - é€‰æ‹©æ¦‚ç‡æœ€å¤§çš„ -æ¦‚ç‡è¾ƒå¤§çš„æœ‰æ›´å¤§çš„æ¦‚ç‡è¢«é€‰æ‹© - Beam Searchè´ªå¿ƒæ–¹æ³•è¿›è¡Œæœç´¢</p><p>![[Pasted image 20250321130842.png]]</p><p>å¯ä»¥é€‰æ‹©æ¦‚ç‡è¾ƒå¤§çš„kä¸ªè¯ï¼Œç„¶åä»¥è¿™ä¸ªè¯ä¸ºæ¡ä»¶è®¡ç®—ä¸‹ä¸€ä¸ªè¯çš„æ¡ä»¶æ¦‚ç‡ï¼Œç±»ä¼¼äºæ„å»ºä¸€ä¸ªçœŸkå‰æ ‘ï¼Œè¿™æ ·çš„æ–¹æ³•æ˜¯ä¸€ç§è´ªå¿ƒçš„æ–¹æ³•ã€‚è€ƒè™‘è¿™æ£µæ ‘ä¸Šæ‰€æœ‰çš„è·¯å¾„ï¼Œé€‰æ‹©æœ€å¤§çš„è·¯å¾„ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ç§æœç´¢æŠ€æœ¯ï¼‰ã€‚</p><h3 id="backpropagation-through-time">Backpropagation Through Time</h3><p>![[Pasted image 20250321133148.png]]</p><p><span class="math display">$$\frac{\partial L}{\partial U}  = \sum_{t=0}^T \frac{\partialL_{t}}{\partial U} = \sum_{t=0}^{T} \sum_{s=0}^t \frac{\partialL_{t}}{\partial y_t} \frac{\partial y_t}{\partial h_t}  \frac{\partialh_t}{\partial h_s}\frac{\partial h_s}{\partial U}$$</span>å‰ä¸€ä¸ªæ±‚å’Œçš„æ„ä¹‰æ˜¯å¯¹äºæŸå¤±å‡½æ•°çš„å„ä¸ªéƒ¨åˆ†æ±‚å’Œï¼Œåé¢çš„æ±‚å’Œå¼æ˜¯å¯¹äº<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>çš„å‰é¢çš„æ¯ä¸€ä¸ªå¯èƒ½çš„é“¾æ±‚å’Œã€‚å…¶ä¸­ï¼š <span class="math display">$$\frac{\partial h_t}{\partial h_s} = \prod_{i=s+1}^t \frac{\partialh_i}{\partial h_{i-1}}$$</span>è¿™ä¸ªå¼å­æ˜¯ä¸€ä¸ªçŸ©é˜µä¹˜æ³•ï¼Œæ˜¯ä¸€ä¸ªçŸ©é˜µçš„è¿ä¹˜ã€‚è¿™ä¸ªçŸ©é˜µæ˜¯ä¸€ä¸ªé›…å¯æ¯”çŸ©é˜µã€‚</p><p>![[Pasted image 20250321135457.png]]</p><p>ç”¨<em>Cauchy-Schwarz</em>ä¸ç­‰å¼å¯ä»¥è¯æ˜ï¼š <spanclass="math display">$$\| \frac{\partial h_t}{\partial h_{t-1}} \| \leq \| W^T \| \|diag(f'(h_{t-1}))\| \leq \sigma_{max} \gamma$$</span> è¿™é‡Œ<spanclass="math inline"><em>Ïƒ</em><sub><em>m</em><em>a</em><em>x</em></sub></span>æ˜¯çŸ©é˜µ<spanclass="math inline"><em>W</em></span>çš„æœ€å¤§å¥‡å¼‚å€¼ï¼Œ<spanclass="math inline"><em>Î³</em></span>æ˜¯æ¿€æ´»å‡½æ•°çš„å¯¼æ•°çš„æœ€å¤§å€¼ã€‚ äºæ˜¯ï¼š<span class="math display">$$\| \frac{\partial h_t}{\partial h_{s}} \| =  \prod_{i=s+1}^t \|\frac{\partial h_i}{\partial h_{i-1}} \| \leq (\sigma_{max}\gamma)^{t-s}$$</span>è¿™ä¸ªå¼å­è¯´æ˜äº†æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ï¼Œæ¢¯åº¦æ¶ˆå¤±æ˜¯æŒ‡æ¢¯åº¦åœ¨æ—¶é—´ä¸Šçš„æŒ‡æ•°çº§è¡°å‡ã€‚æˆ–è€…æ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜ï¼Œæ¢¯åº¦çˆ†ç‚¸æ˜¯æŒ‡æ¢¯åº¦åœ¨æ—¶é—´ä¸Šçš„æŒ‡æ•°çº§å¢é•¿ã€‚</p><h4 id="truncated-bptt">Truncated BPTT</h4><p>![[Pasted image 20250321140454.png]]</p><p>è¿™ä¸ªæ–¹æ³•æ˜¯å°†æ—¶é—´ä¸Šçš„æ¢¯åº¦æˆªæ–­ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜ã€‚ä½†æ˜¯è¿™æ ·çš„æ–¹æ³•ä¼šå¯¼è‡´æ¢¯åº¦çš„ä¼°è®¡ä¸å‡†ç¡®ï¼Œå› ä¸ºæ¢¯åº¦çš„ä¼°è®¡æ˜¯åŸºäºä¸€ä¸ªæˆªæ–­çš„æ—¶é—´çª—å£çš„ã€‚</p><h4 id="long-short-term-memory">Long Short-Term Memory</h4><blockquote><p>ä¸ºä»€ä¹ˆè¿™æ ·å°±èƒ½å®ç°æ‰€è°“çš„LSTM</p></blockquote><ul><li>é—å¿˜ï¼Œå°†è¿‡å»â€œæ²¡ç”¨â€çš„ä¿¡æ¯é—å¿˜</li><li>æ›´æ–°ï¼Œå°†æ–°çš„ä¿¡æ¯æ›´æ–°åˆ°çŠ¶æ€å˜é‡ä¸­</li><li>è¾“å‡ºï¼Œè¾“å‡ºé—¨æ§åˆ¶ä¸€éƒ¨åˆ†ä¿¡æ¯ç”¨æ¥è¿›è¡Œé¢„æµ‹ ![[Pasted image20250321141243.png]] <spanclass="math inline"><em>t</em></span>æ—¶åˆ»çš„çŠ¶æ€å˜é‡<spanclass="math inline"><em>h</em><sub><em>t</em></sub></span>å‚¨å­˜çš„æ˜¯<spanclass="math inline"><em>t</em></span>æ—¶åˆ»çš„ä¿¡æ¯ï¼Œ<spanclass="math inline"><em>c</em><sub><em>t</em></sub></span>æ˜¯<spanclass="math inline"><em>t</em></span>æ—¶åˆ»çš„è®°å¿†å˜é‡ï¼Œ<spanclass="math inline"><em>h</em><sub><em>t</em>â€…âˆ’â€…1</sub></span>å’Œ<spanclass="math inline"><em>x</em><sub><em>t</em></sub></span>æ˜¯<spanclass="math inline"><em>t</em></span>æ—¶åˆ»çš„è¾“å…¥ï¼Œ<spanclass="math inline"><em>f</em><sub><em>t</em></sub></span>æ˜¯é—å¿˜é—¨ï¼Œ<spanclass="math inline"><em>i</em><sub><em>t</em></sub></span>æ˜¯è¾“å…¥é—¨ï¼Œ<spanclass="math inline"><em>o</em><sub><em>t</em></sub></span>æ˜¯è¾“å‡ºé—¨ï¼Œ<spanclass="math inline"><em>g</em><sub><em>t</em></sub></span>æ˜¯æ›´æ–°é—¨ã€‚</li></ul><p>![[Pasted image 20250321141234.png]]ä¸Šè¿°ç½‘ç»œæ„é€ äº†ä¸€ä¸ªä¿¡æ¯æµé«˜é€Ÿè·¯å¾„ï¼Œä½¿å¾—æ¢¯åº¦èƒ½å¤Ÿè¿›è¡Œå¿«é€Ÿçš„ä¼ æ’­ã€‚</p><p>é—å¿˜é—¨å’Œæ®‹å·®ç½‘ç»œçš„æ€æƒ³æ˜¯ç±»ä¼¼çš„ï¼Œéƒ½æ˜¯å°†è¿‡å»çš„ä¿¡æ¯å’Œç°åœ¨çš„ä¿¡æ¯è¿›è¡Œèåˆã€‚è¿™æ ·çš„ç½‘ç»œå¯ä»¥æ›´å¥½çš„å¤„ç†é•¿åºåˆ—çš„é—®é¢˜ã€‚[[DeepLearning Lecture-3#ResNet]]</p><h4 id="gradient-clipping">Gradient Clipping</h4><p>æ¢¯åº¦çš„å¤§å°æ˜¯ç”±æ¨¡é•¿å†³å®šçš„ï¼Œå¦‚æœæ¢¯åº¦çš„æ¨¡é•¿è¿‡å¤§ï¼Œå¯ä»¥å°†æ¢¯åº¦çš„æ¨¡é•¿è¿›è¡Œæˆªæ–­ã€‚è¿™æ ·å¯ä»¥é¿å…æ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜ã€‚</p><h4 id="variational-dropout">Variational Dropout</h4><p>åœ¨æ·±åº¦ç½‘ç»œä¸­ï¼Œå¦‚æœæ˜¯è¿‡æ‹Ÿå’Œçš„ï¼Œä¹Ÿå°±æ˜¯å¯¹äºä¸€ä¸ªå«æœ‰å¤šä¸ªå‚æ•°çš„ç½‘ç»œã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœè¾“å…¥çš„å‚æ•°å°äºå‚æ•°çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆç›¸å¯¹åº”çš„çº¿æ€§æ–¹ç¨‹ç»„æ˜¯æ¬ å®šçš„ã€‚</p><p>åœ¨RNNä¸­å¯¹åº”çš„çºµå‘æ–¹å‘ä¸Šæ˜¯å¤šå±‚æ„ŸçŸ¥æœºï¼Œæ‰€ä»¥å¯ä»¥é‡‡ç”¨æ ‡å‡†çš„Dropoutæ–¹æ³•ã€‚ä½†æ˜¯åœ¨æ¨ªå‘æ–¹å‘ä¸Šæ˜¯ä¸€ä¸ªå¾ªç¯ç½‘ç»œï¼ŒDropoutæ–¹æ³•ä¸é€‚ç”¨ã€‚å› ä¸ºDropoutæ–¹æ³•ä¼šç ´åæ—¶é—´ä¸Šçš„è¿ç»­æ€§ï¼Œè¿èƒŒäº†å‚æ•°å…±äº«çš„åŸåˆ™ã€‚é‡‡ç”¨<strong>æ­¥è°ƒä¸€è‡´</strong>çš„æ–¹æ³•è¿›è¡Œæ“ä½œï¼Œè¿™æ ·å¯ä»¥ä¿æŒæ—¶é—´ä¸Šçš„è¿ç»­æ€§ã€‚è¿™æ ·çš„æ–¹æ³•æ˜¯<strong>VariationalDropout</strong>ã€‚</p><h4 id="layer-normalization">Layer Normalization</h4><p>![[Pasted image 20250322202759.png]]</p><p>åœ¨CNNä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªé€šé“çš„å€¼è¿›è¡Œå½’ä¸€åŒ–ã€‚åœ¨è¿™æ ·çš„æ¯ä¸€ä¸ªé€šé“ä¸­è®¡ç®—å‡å€¼å’Œæ–¹å·®ã€‚è¿˜æ˜¯è¦åŠ å…¥ä¸€ä¸ªå¹³ç§»å˜é‡å’Œä¼¸ç¼©å˜é‡ã€‚</p><p>åœ¨RNNä¸­ï¼Œä¸»è¦çš„åŸå› æ˜¯é—¨æ§ç»“æ„æ˜¯ç›¸å¯¹äºæ¯ä¸€ä¸ªåºåˆ—è€Œè¨€çš„ï¼Œæ‰€ä»¥åº”è¯¥å¼•å…¥ä¸€ç§æ–°çš„å½’ä¸€åŒ–æ–¹æ³•<em>LayerNormalization</em>ï¼Œåº”è¯¥åœ¨æ¯ä¸€æ¡æ ·æœ¬ï¼ˆä¸€ä¸ªåºåˆ—ï¼‰åœ¨æ¯ä¸€ä¸ªæ—¶åˆ»ç»è¿‡ä¹‹åçš„å€¼åœ¨<spanclass="math inline"><em>C</em></span>ä¸ªé€šé“ä¸Šè¿›è¡Œå½’ä¸€åŒ–æ“ä½œã€‚æœ€åå¾—åˆ°çš„ç»“æœæ˜¯ï¼šå°†æ‰€æœ‰çš„å‘é‡æ”¾åœ¨ä»¥åŸç‚¹ä¸ºçƒå¿ƒçš„å•ä½çƒé¢ä¸Šã€‚</p><h4 id="weight-normalization">Weight Normalization</h4><p>å¯¹äºæ¯å±‚çš„å‚æ•°<spanclass="math inline"><strong>w</strong></span>è¿›è¡Œé‡å‚æ•°åŒ–ï¼š <spanclass="math display">$$\mathbf{w} = \frac{g}{\|v\|}v$$</span> ![[Pasted image 20250322204925.png]]</p><p>å¯¹å³è¾¹çš„å¼å­<spanclass="math inline">$\frac{v}{\|v\|}$</span>è¿›è¡Œä¼˜åŒ–æ˜¯æ›´ä¸ºå®¹æ˜“çš„ï¼Œé‡å‚æ•°åŒ–çš„æ„æ€æ˜¯ï¼Œåœ¨è®­ç»ƒå’Œæµ‹è¯•çš„æ—¶å€™ä½¿ç”¨ä¸åŒçš„å‚æ•°è¡¨è¾¾å½¢å¼ï¼Œè¿™æ ·æ˜¯æ›´åŠ å®¹æ˜“ä¼˜åŒ–çš„ã€‚</p><h4 id="training-inference-shift">Training-Inference Shift</h4><p>æ»šåŠ¨é¢„æµ‹ï¼šåœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œä½¿ç”¨çœŸå®çš„æ ‡ç­¾è¿›è¡Œé¢„æµ‹ï¼›åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯æ¨ç†å¾—åˆ°çš„å€¼è¿›è¡Œé¢„æµ‹ã€‚è¿™æ˜¯ä¸€ä¸ªè‡ªå›å½’ä»»åŠ¡ã€‚</p><h5 id="curriculum-learning">Curriculum Learning</h5><p>åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œå¯ä»¥å…ˆè®­ç»ƒä¸€äº›ç®€å•çš„ä»»åŠ¡ï¼Œç„¶åå†è®­ç»ƒä¸€äº›å¤æ‚çš„ä»»åŠ¡ã€‚è¿™æ ·å¯ä»¥æ›´å¥½çš„è®­ç»ƒæ¨¡å‹ã€‚åœ¨å®é™…ä¸­ï¼Œå¯ä»¥å¯¹æ‰€æœ‰çš„æ ·æœ¬è®¡ç®—lossï¼Œå…ˆè®¡ç®—lossè¾ƒå°çš„æ ·æœ¬ï¼Œç„¶åå†è®¡ç®—lossè¾ƒå¤§çš„æ ·æœ¬ã€‚è¿™å°±æ˜¯<strong>è‡ªæ­¥å­¦ä¹ </strong>ã€‚è¿™é‡Œæ¶‰åŠåˆ°é€‰æ‹©ä¸åŒçš„æ ·æœ¬é¡ºåºçš„é—®é¢˜ã€‚</p><p><em>ScheduledSampling</em>ï¼šåœ¨å­¦ä¹ åˆšå¼€å§‹çš„æ—¶å€™ï¼Œæ›´å¤šåœ°ä½¿ç”¨çœŸå®çš„æ ‡ç­¾è¿›è¡Œé¢„æµ‹ï¼›éšç€å­¦ä¹ çš„è¿›è¡Œï¼Œæ›´å¤šåœ°ä½¿ç”¨æ¨¡å‹é¢„æµ‹çš„å€¼è¿›è¡Œé¢„æµ‹ã€‚<strong>æ˜¯RNNä¸­å¾ˆé‡è¦çš„æŠ€æœ¯</strong>ã€‚</p><h3 id="rnn-with-attention">RNN with Attention</h3><h4 id="human-attention">Human Attention</h4><p>äººç±»çš„æ³¨æ„åŠ›ï¼š - å¯æŒç»­æ³¨æ„åŠ›ï¼ˆæ²¡æœ‰å®ç°ï¼‰ -é€‰æ‹©æ€§æ³¨æ„åŠ›ï¼ˆäººç±»çš„é€‰æ‹©æ€§æ³¨æ„åŠ›å¤æ‚å¾—å¤šï¼‰ - äº¤æ›¿å¼æ³¨æ„åŠ› -åˆ†é…å¼æ³¨æ„åŠ›</p><h4 id="attention-in-deep-learning">Attention in Deep Learning</h4><blockquote><p><em>Allowing the model to dynamically pay attention to only certainparts of the input that help in performing the task at handeffectively.</em></p></blockquote><p>å­˜åœ¨æ—¶é—´<em>temporal Attention</em>å’Œç©ºé—´<em>SpatialAttention</em>ä¸Šçš„æ³¨æ„åŠ›ã€‚ä¸€èˆ¬è€Œè¨€æŒ‡çš„æ˜¯æ—¶é—´ä¸Šçš„æ³¨æ„åŠ›ã€‚</p><h4 id="auto-regessive">Auto-Regessive</h4><p>[[#Sequence to Sequence]]</p><p>æœ€é‡è¦çš„é—®é¢˜æ˜¯ç¼–ç å™¨å’Œè§£ç å™¨ä¹‹é—´çš„ä¿¡æ¯æ²Ÿé€šå¤ªå°‘äº†ï¼Œå­˜åœ¨æœ‰ä¿¡æ¯ç“¶é¢ˆã€‚å¹¶ä¸”åœ¨ç¿»è¯‘ä»»åŠ¡ä¸­ï¼Œè¾“å…¥å’Œè¾“å‡ºçš„é¡ºåºå¹¶ä¸æ˜¯ä¸€è‡´çš„ï¼Œå¤§éƒ¨åˆ†çš„è¯­è¨€çš„è¯­åºæ˜¯ä¸ä¸€æ ·çš„ã€‚<strong>å¸Œæœ›çœ‹åˆ°åé¢çš„ä¿¡æ¯</strong>ï¼Œè¿™å’ŒRNNçš„è®¾è®¡ç›®çš„æ˜¯ç›¸è¿èƒŒçš„ã€‚<strong>å…¨è¿æ¥çš„æ€æƒ³</strong>åˆå›æ¥äº†ï¼Œè·å¾—å…¨å±€ä¿¡æ¯çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸åªæ˜¯æœ‰MLPçš„æ–¹æ³•ã€‚æœ‰ä¸€ç§åŸºæœ¬æ€æƒ³æ˜¯<strong><em>Relevance</em></strong>ï¼Œä¹Ÿå°±æ˜¯å’Œå½“å‰ä»»åŠ¡ç›¸å…³çš„ä¿¡æ¯ã€‚è¿™ä¸ªæ€æƒ³æ˜¯åœ¨Attentionä¸­å¾—åˆ°äº†ä½“ç°ã€‚</p><h4 id="attention">Attention</h4><p>![[Pasted image 20250322222251.png]]</p><p>è®¡ç®—ä¸¤ä¸ªä¸œè¥¿çš„ç›¸ä¼¼åº¦æœ‰ï¼šè®¡ç®—å†…ç§¯ã€è¾“å…¥<em>relationnetwork</em>ã€‚è¿™æ ·çš„æ¨¡å‹åœ¨äº’è”ç½‘ä¸­æœ‰å¾ˆå¤šçš„åº”ç”¨ï¼Œæ¯”å¦‚æ¨èç³»ç»Ÿã€æœç´¢å¼•æ“ç­‰ã€‚</p><p>![[Pasted image 20250323084415.png]]</p><p>æ³¨æ„åŠ›çš„åˆ†é…æ˜¯ç¬¦åˆæ¦‚ç‡åˆ†å¸ƒçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸Šé¢è®¡ç®—å¾—åˆ°çš„ç›¸å…³æ€§<spanclass="math inline"><em>e</em><sub><em>i</em><em>j</em></sub></span>ä½¿ç”¨softmaxå‡½æ•°è¿›è¡Œå½’ä¸€åŒ–ã€‚è¿™æ ·å¾—åˆ°çš„åˆ†å¸ƒå°±æ˜¯æ³¨æ„åŠ›çš„åˆ†å¸ƒï¼š<span class="math display">$$\alpha_{ij} = \frac{\exp(e_{ij})}{\sum_{k=1}^{T_x} \exp(e_{ik})}$$</span> ä¸Šè¿°è®¡ç®—å¼è¡¨è¾¾çš„å«ä¹‰æ˜¯ï¼Œåœ¨çŠ¶æ€<spanclass="math inline"><em>i</em></span>çš„æ—¶åˆ»åˆ†é…åœ¨<spanclass="math inline"><em>j</em></span>ä¸Šçš„æ³¨æ„åŠ›ï¼ˆå¯¹äº<spanclass="math inline"><em>j</em></span>çš„æ±‚å’Œä¸º1ï¼‰ã€‚ç»§ç»­è®¡ç®—<spanclass="math inline"><em>c</em><sub><em>i</em></sub></span>ï¼š <spanclass="math display">$$c_i = \sum_{j=1}^{T_x} \alpha_{ij} x_j$$</span> è¿™é‡Œ<spanclass="math inline"><em>c</em><sub><em>i</em></sub></span>æ˜¯å¯¹äºçŠ¶æ€<spanclass="math inline"><em>i</em></span>çš„æ—¶åˆ»çš„æ³¨æ„åŠ›å‘é‡ï¼Œæ˜¯å¯¹äº<spanclass="math inline"><em>x</em></span>çš„åŠ æƒå’Œã€‚ <spanclass="math display"><em>s</em><sub><em>i</em></sub>â€„=â€„<em>f</em>(<em>s</em><sub><em>i</em>â€…âˆ’â€…1</sub>,â€†<em>y</em><sub><em>i</em>â€…âˆ’â€…1</sub>,â€†<em>c</em><sub><em>i</em></sub>)</span>è¿™é‡Œ<spanclass="math inline"><em>s</em><sub><em>i</em></sub></span>æ˜¯çŠ¶æ€å˜é‡ï¼Œ<spanclass="math inline"><em>y</em><sub><em>i</em>â€…âˆ’â€…1</sub></span>æ˜¯å‰ä¸€ä¸ªæ—¶åˆ»çš„è¾“å‡ºï¼Œ<spanclass="math inline"><em>c</em><sub><em>i</em></sub></span>æ˜¯å½“å‰æ—¶åˆ»çš„æ³¨æ„åŠ›å‘é‡ã€‚è¿™é‡Œçš„å‡½æ•°<spanclass="math inline"><em>f</em></span>æ˜¯ä¸€ä¸ªGRU orLSTMã€‚è¿™ä¸ªæ¨¡å‹æ˜¯ä¸€ä¸ª<strong>Seq2Seq</strong>æ¨¡å‹ã€‚</p><blockquote><p>è¿™é‡Œçš„<spanclass="math inline"><em>c</em><sub><em>i</em></sub></span>å’Œ<spanclass="math inline"><em>s</em><sub><em>i</em></sub></span>çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå’ŒLSTMæœ‰å…³</p></blockquote><p>![[Pasted image 20250323084332.png]] ![[Pasted image20250323084535.png]]</p><p>åœ¨æœºå™¨ç¿»è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨sourceçš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ¯”ç›´æ¥ä½¿ç”¨è¯å…¸æ¥ç¿»è¯‘æ›´å¥½ã€‚è¿™æ ·çš„æ¨¡å‹å¯ä»¥æ›´å¥½çš„å¤„ç†é•¿åºåˆ—çš„é—®é¢˜ã€‚åªè¦æ˜¯åºåˆ—éƒ½ä¼šä½¿ç”¨<strong>æ»‘åŠ¨çª—å£</strong>ï¼Œä¸€èˆ¬è®¾ç½®ä¸º50~100ä¹‹é—´ã€‚å¯¹äºè¾ƒçŸ­çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨psddingçš„æ–¹æ³•ï¼›å¯¹äºè¾ƒé•¿çš„æƒ…å†µä¼šä½¿ç”¨æˆªæ–­çš„æ–¹æ³•ã€‚å¸Œæœ›æ‰¾ä¸€ä¸ªä¸åºåˆ—çš„é•¿åº¦çº¿æ€§å…³ç³»çš„æ¨¡å‹ã€‚</p><h4 id="attention-vs.-mlp">Attention vs.Â MLP</h4><p>ç›¸åŒç‚¹ï¼š - éƒ½æ˜¯å…¨å±€æ¨¡å‹ï¼Œæ˜¯å¯¹äºé•¿åºå…³ç³»çš„å»ºæ¨¡ã€‚</p><p>ä¸åŒç‚¹ï¼š - Attentionæ˜¯åŸºäºæ¦‚ç‡çš„ï¼ŒMLPæ˜¯åŸºäºå…¨è¿æ¥çš„ã€‚ -Attentionå¼•å…¥relevanceçš„æ€æƒ³ï¼Œèƒ½å¤§å¤§å‡å°å‚æ•°é‡</p><h4 id="hierarchical-attention">Hierarchical Attention</h4><p>å…ˆå»ºæ¨¡è¯æ³¨æ„åŠ›ç„¶åå†å»ºæ¨¡å¥å­æ³¨æ„åŠ›ã€‚</p><h4 id="global-attention">Global Attention</h4><p><span class="math display">$$\text{score} = \begin{cases}h_t^T \overline{h_s} \\h_t^T W_a \overline{h_s} \\v_a^T \tanh(W_a[h_t;\overline{h_s}])\end{cases}$$</span> å‘ç°ä¸Šé¢ä¸‰ç§è®¡ç®—æ–¹å¼çš„æ•ˆç‡æ˜¯å·®ä¸å¤šçš„ã€‚</p><p>![[Pasted image 20250323090740.png]]</p><h3 id="memory">Memory</h3><h4 id="human-memory">Human Memory</h4><ul><li>Sensory Memory<ul><li>è®¡ç®—æœºè§†è§‰ä¸æœºå™¨æ„ŸçŸ¥</li></ul></li><li>Short-term Memory<ul><li>ä¸è®¡ç®—æœºä¸­çš„å†…å­˜æ˜¯å¾ˆç›¸è¿‘çš„ï¼ŒLSTMæ˜¯ä¸€ç§å°†çŸ­æœŸè®°å¿†å°½é‡å˜é•¿çš„æ–¹æ³•ã€‚</li></ul></li><li>Long-term Memory<ul><li>å‰é¢çš„æ¨¡å‹ä¸­æ²¡æœ‰å®ç°è¿™ä¸ªåŠŸèƒ½</li></ul></li></ul><p>åœ¨è‡ªç„¶è¯­è¨€ä¸­ï¼Œæ¯”è¾ƒå›°éš¾çš„ä»»åŠ¡æ˜¯è¿›è¡Œå¯¹è¯ï¼Œè¿™æ—¶å€™éœ€è¦è¿›è¡Œé•¿æœŸè®°å¿†ã€‚åœ¨å¯¹è¯ä¸­ï¼Œéœ€è¦å¯¹è¯çš„ä¸Šä¸‹æ–‡è¿›è¡Œç†è§£ã€‚</p><h4 id="neural-turing-machine">Neural Turing Machine</h4><p>![[Pasted image 20250323092327.png]]</p><p>åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œæœ€é‡è¦çš„æ˜¯å¯¹å†…å­˜1è¿›è¡Œå¯»å€çš„æ“ä½œï¼Œè¿™ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªæ³¨æ„åŠ›çš„æ“ä½œã€‚å¯¹äºè¯»çš„æ“ä½œï¼Œæ˜¯æŒ‰ç…§æ³¨æ„åŠ›çš„å¤§å°å¯¹åœ°å€é‡Œé¢çš„å†…å®¹è¿›è¡ŒåŠ æƒå¹³å‡ã€‚å¯¹äºå†™çš„æ“ä½œï¼Œç±»ä¼¼äºLSTMä¸­çš„Forget Gateï¼Œå…ˆè¿›è¡Œæ“¦é™¤ä¹‹åæ‰è¿›è¡Œå†™å…¥ã€‚</p><p>å¯¹äºInternal Memoryï¼Œæœ€å¤§çš„é—®é¢˜æ˜¯å¯èƒ½ä¼šé—å¿˜ï¼Œå¯¹äºExternalMemoryï¼Œæ˜¯ä¸€ä¸ªå¤–éƒ¨çš„å­˜å‚¨å™¨ï¼Œè¿™æ ·çš„å­˜å‚¨æ˜¯æ¯”è¾ƒç¨³å®šçš„ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-6</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-6/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-6/</url>
    
    <content type="html"><![CDATA[<h2 id="transformers">Transformers</h2><h3 id="transformers-attention-is-all-you-need">Transformers: Attentionis All You Need</h3><p>[[Deep Learning Lecture-5#Attention]]</p><p>å†æ¬¡ç†è§£Attentionçš„æ¦‚å¿µï¼šç±»ä¼¼äºâ€æŸ¥å­—å…¸â€œçš„æ“ä½œï¼Œå¯¹äºQuery <spanclass="math inline"><em>q</em></span>, Key <spanclass="math inline"><em>k</em></span>å’ŒValue <spanclass="math inline"><em>v</em></span>ï¼Œè®¡ç®—ç›¸å…³æ€§ï¼Œä¹Ÿå°±æ˜¯é‡è¦æ€§ï¼Œå¯¹äºè¾“å‡ºåºåˆ—ä¸­çš„ç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªè¾“å‡ºæœ‰ä»·å€¼çš„ä¿¡æ¯ï¼š <spanclass="math display"><em>w</em><sub><em>i</em><em>j</em></sub>â€„=â€„<em>a</em>(<em>q</em><sub><em>i</em></sub>,â€†<em>k</em><sub><em>j</em></sub>)</span>å…¶ä¸­<spanclass="math inline"><em>a</em></span>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ˜¯å†…ç§¯ã€<em>AdditiveAttention</em>ç­‰ã€‚å¯¹äºè¾“å‡ºåºåˆ—ä¸­çš„ç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªè¾“å‡ºï¼Œè®¡ç®—å½“å‰çš„è¾“å‡ºçš„<spanclass="math inline"><em>q</em><sub><em>i</em></sub></span>ï¼Œè®¡ç®—ä¸è¾“å…¥åºåˆ—ä¸­çš„<spanclass="math inline"><em>k</em><sub><em>j</em></sub></span>çš„ç›¸å…³æ€§ï¼Œç„¶åå¯¹äº<spanclass="math inline"><em>v</em><sub><em>j</em></sub></span>è¿›è¡ŒåŠ æƒæ±‚å’Œï¼ˆè¿™æ˜¯ä¸€ç§å¯»å€æ“ä½œï¼‰ï¼Œå¾—åˆ°çš„<spanclass="math inline"><em>c</em><sub><em>i</em></sub></span>æ˜¯æŸ¥å­—å…¸æ‰€å¾—åˆ°çš„ä¿¡æ¯ï¼š<span class="math display">$$c_i = \sum_{j=1}^T w_{ij}v_j$$</span> <strong>å¸Œæœ›æ‰¾åˆ°ä¸€ç§æ›´å¥½çš„è®¡ç®—æ–¹æ³•</strong>ã€‚</p><p>åœ¨[[Deep Learning Lecture-5#RNN with Attention]]ä¸­é—®é¢˜åœ¨äºï¼š -å¤ªå¤æ‚çš„æ¨¡å‹ - æŸç§æ„ä¹‰ä¸Šä½¿ç”¨çš„Attentionå·²ç»è¶³å¤Ÿä½¿ç”¨ï¼Œä¸å†éœ€è¦å¾ªç¯ç½‘ç»œ -å¾ªç¯ç½‘ç»œçš„è®¡ç®—æ˜¯ä¸²è¡Œçš„ï¼Œä¸èƒ½æœ‰æ•ˆåŠ é€Ÿ #### Self-Attention</p><p>è®¡ç®—çš„æ˜¯åŒä¸€æ¡åºåˆ—ä¸­çš„ä¸åŒä½ç½®ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œä¹Ÿå°±æ˜¯è‡ªæ³¨æ„åŠ›ã€‚å¯¹äºè¾“å…¥åºåˆ—ä¸­çš„ç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªä½ç½®ï¼Œè®¡ç®—ä¸å…¶ä»–ä½ç½®çš„ç›¸å…³æ€§ï¼Œç„¶åå¯¹äºæ‰€æœ‰çš„ä½ç½®è¿›è¡ŒåŠ æƒæ±‚å’Œï¼šè§„å®šQuery <spanclass="math inline"><em>Q</em>â€„=â€„[<em>q</em><sub>1</sub>â€¦<em>q</em><sub><em>n</em></sub>]</span>ï¼ŒKey<spanclass="math inline"><em>K</em>â€„=â€„[<em>k</em><sub>1</sub>â€¦<em>k</em><sub><em>n</em></sub>]</span>ï¼ŒValue<spanclass="math inline"><em>V</em>â€„=â€„[<em>v</em><sub>1</sub>â€¦<em>v</em><sub><em>k</em></sub>]</span>ï¼Œåˆ™ï¼š</p><p>![[Pasted image 20250323133751.png]]</p><h4 id="scaled-dot-product-attention">Scaled Dot-Product Attention</h4><p>æˆ‘ä»¬è®¤ä¸ºä½¿ç”¨ä¸€ä¸ªç½‘ç»œæ¥è®¡ç®—ç›¸å…³æ€§å¤ªå¤æ‚äº†ï¼Œå½“ä¸¤ä¸ªå‘é‡æ˜¯ç›¸åŒç»´åº¦çš„æ—¶å€™å¯ä»¥ç›´æ¥è®¡ç®—å†…ç§¯ã€‚åœ¨è¿™é‡Œï¼Œåœ¨è®¡ç®—å…ˆå¼•å…¥å‚æ•°ï¼Œä½¿å¾—å…¶ç»´åº¦æ˜¯ä¸€æ ·çš„ï¼Œä»è€Œå¯ä»¥è®¡ç®—å†…ç§¯ï¼š</p><p><em>Scaled Dot-Product</em> : <span class="math display">$$a(q,k) = \frac{q^T k}{\sqrt{d_k}}$$</span>ä½¿å¾—å˜æ¢å‰åçš„æ–¹å·®æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¢¯åº¦æ›´åŠ ç¨³å®šï¼Œå¦åˆ™å¯èƒ½è¿›å…¥æ¿€æ´»å‡½æ•°çš„é¥±å’ŒåŒºã€‚<span class="math display">$$Attention(Q,K,V) = \text{softmax}\left(\frac{QK^T}{\sqrt{d_k}}\right)V$$</span> ä¸Šé¢çš„å¼å­å°†å¾—åˆ°çš„<spanclass="math inline"><em>n</em>â€…Ã—â€…<em>n</em></span>çš„çŸ©é˜µè¿›è¡Œsoftmaxæ“ä½œï¼Œåœ¨å½’ä¸€åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œ<strong>æ˜¯æŸä¸€ä¸ªqueryåœ¨æ‰€æœ‰çš„keyä¸Šçš„æ³¨æ„åŠ›åˆ†é…ä¸€å®šæ˜¯<spanclass="math inline"><strong>1</strong></span></strong>ã€‚åé¢æ˜¯å¯¹äºValueçš„åŠ æƒæ±‚å’Œã€‚<strong>åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼Œ<spanclass="math inline"><em>Q</em></span>ã€<spanclass="math inline"><em>K</em></span>å’Œ<spanclass="math inline"><em>V</em></span>ä¸­çš„å‘é‡éƒ½æ˜¯è¡Œå‘é‡ï¼Œè¿›è¡Œsoftmaxæ“ä½œæ—¶ä¹Ÿæ˜¯åœ¨åŒä¸€è¡Œä¸Šæ“ä½œ</strong>ã€‚</p><p>![[Pasted image 20250323141917.png]]</p><p>å¯¹äºåŒä¸€ç»„è¾“å…¥ï¼Œç»è¿‡ä¸åŒçš„çº¿æ€§å˜æ¢å¾—åˆ°çš„ä¸åŒçš„Queryã€Keyå’ŒValueï¼Œåœ¨æ ·æœ¬æ•°é‡ä¸º<spanclass="math inline"><em>m</em></span>çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿›è¡Œè®¡ç®—ï¼š</p>$$<p>$$</p><p><strong>ç»´åº¦æ€»ç»“è¡¨</strong></p><table><thead><tr><th>çŸ©é˜µ/æ“ä½œ</th><th>ç»´åº¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è¾“å…¥çŸ©é˜µ <span class="math inline"><em>X</em></span></td><td><spanclass="math inline"><em>m</em>â€…Ã—â€…<em>d</em><sub>input</sub></span></td><td>åŒ…å« <span class="math inline"><em>m</em></span>ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬ç»´åº¦ä¸º <spanclass="math inline"><em>d</em><sub>input</sub></span></td></tr><tr><td>æŸ¥è¯¢çŸ©é˜µ <span class="math inline"><em>Q</em></span></td><td><spanclass="math inline"><em>m</em>â€…Ã—â€…<em>d</em><sub><em>k</em></sub></span></td><td>æ¯ä¸ªæ ·æœ¬çš„æŸ¥è¯¢å‘é‡ç»´åº¦ä¸º <spanclass="math inline"><em>d</em><sub><em>k</em></sub></span></td></tr><tr><td>é”®çŸ©é˜µ <span class="math inline"><em>K</em></span></td><td><spanclass="math inline"><em>m</em>â€…Ã—â€…<em>d</em><sub><em>k</em></sub></span></td><td>æ¯ä¸ªæ ·æœ¬çš„é”®å‘é‡ç»´åº¦ä¸º <spanclass="math inline"><em>d</em><sub><em>k</em></sub></span></td></tr><tr><td>å€¼çŸ©é˜µ <span class="math inline"><em>V</em></span></td><td><spanclass="math inline"><em>m</em>â€…Ã—â€…<em>d</em><sub><em>v</em></sub></span></td><td>æ¯ä¸ªæ ·æœ¬çš„å€¼å‘é‡ç»´åº¦ä¸º <spanclass="math inline"><em>d</em><sub><em>v</em></sub></span></td></tr><tr><td>æ³¨æ„åŠ›å¾—åˆ†çŸ©é˜µ <spanclass="math inline"><em>Q</em><em>K</em><sup><em>T</em></sup></span></td><td><span class="math inline"><em>m</em>â€…Ã—â€…<em>m</em></span></td><td>æ ·æœ¬é—´çš„æ³¨æ„åŠ›å¼ºåº¦çŸ©é˜µ</td></tr><tr><td>æœ€ç»ˆè¾“å‡º <spanclass="math inline">Attention(<em>Q</em>,â€†<em>K</em>,â€†<em>V</em>)</span></td><td><spanclass="math inline"><em>m</em>â€…Ã—â€…<em>d</em><sub><em>v</em></sub></span></td><td>èšåˆæ‰€æœ‰æ ·æœ¬çš„åŠ æƒå€¼ä¿¡æ¯ï¼Œè¾“å‡ºç»´åº¦ä¸º <spanclass="math inline"><em>d</em><sub><em>v</em></sub></span></td></tr></tbody></table><h4 id="multi-head-attention">Multi-Head Attention</h4><p>æ³¨æ„åˆ°ä¸Šé¢çš„æ³¨æ„åŠ›çš„è¡¨è¾¾èƒ½åŠ›æ˜¯ç›¸å½“æœ‰é™çš„ï¼Œåœ¨languagemodelåŒä¸€ä¸ªè¯å’Œå…¶ä»–ä¸åŒçš„è¯ä¹‹é—´å¯èƒ½æœ‰å¾ˆå¤šç§ä¸åŒçš„å…³ç³»ï¼Œä»…ä»…ç”¨ä¸€ç§ç®€å•çš„å…³ç³»æ¥è¡¨ç¤ºæ˜¯ä¸å¤Ÿçš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¼•å…¥å¤šå¤´æ³¨æ„åŠ›ï¼Œå¸Œæœ›èƒ½åœ¨ä¸åŒçš„ä¾§é¢ä¸Šè¿›è¡Œè¡¨è¾¾ã€‚<spanclass="math display">MultiHead(<em>Q</em>,â€†<em>K</em>,â€†<em>V</em>)â€„=â€„Concat(head<sub>1</sub>,â€†â€¦,â€†head<sub><em>h</em></sub>)<em>W</em><sup><em>O</em></sup></span>å…¶ä¸­ï¼š <spanclass="math display">head<sub><em>i</em></sub>â€„=â€„Attention(<em>Q</em><em>W</em><sub><em>i</em></sub><sup><em>Q</em></sup>,â€†<em>K</em><em>W</em><sub><em>i</em></sub><sup><em>K</em></sup>,â€†<em>V</em><em>W</em><sub><em>i</em></sub><sup><em>V</em></sup>)</span>å…¶ä¸­<spanclass="math inline"><em>W</em><sub><em>i</em></sub><sup><em>Q</em></sup>,â€†<em>W</em><sub><em>i</em></sub><sup><em>K</em></sup>,â€†<em>W</em><sub><em>i</em></sub><sup><em>V</em></sup></span>æ˜¯ä¸åŒçš„çº¿æ€§å˜æ¢ï¼Œ<spanclass="math inline"><em>W</em><sup><em>O</em></sup></span>æ˜¯æœ€åçš„çº¿æ€§å˜æ¢ï¼Œæœ€åè¿›è¡Œçš„ç»´åº¦çš„è§„çº¦æ“ä½œã€‚ä¸CNNç›¸æ¯”ï¼ŒCNNçš„ä¸åŒçš„é€šé“ä¹‹é—´ä¸ä¸Šä¸€å±‚çš„æ¯ä¸€ä¸ªé€šé“ä¹‹é—´éƒ½æ˜¯æœ‰è¿æ¥çš„ï¼›ä½†æ˜¯åœ¨è¿™é‡Œï¼Œä¸åŒçš„å¤´ä¹‹é—´æ˜¯æ²¡æœ‰è¿æ¥çš„ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—ä¸åŒçš„å¤´å¯ä»¥å…³æ³¨ä¸åŒçš„ä¿¡æ¯ã€‚</p><p>ä¸åŒçš„å¤´ä¹‹é—´æ˜¯å¯ä»¥å¹¶è¡Œè®¡ç®—çš„ï¼Œè¿™æ ·å¯ä»¥åŠ é€Ÿè®¡ç®—ï¼›ä½†æ˜¯ç¼ºç‚¹æ˜¯å†…å­˜å ç”¨ä¼šå¾ˆå¤§ã€‚</p><h4 id="position-wise-feed-forward-networks">Position-wise Feed-ForwardNetworks</h4><p>![[Pasted image 20250323145847.png]] åœ¨æ ‡å‡† Transformer Blockä¸­ï¼Œæ³¨æ„åŠ›å±‚ä¹‹åä¼šæ¥ä¸€ä¸ªå‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFFNï¼‰ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p><ol type="1"><li><p>è¾“å…¥å¼ é‡å½¢çŠ¶ï¼š<br /><spanclass="math display"><em>X</em>â€„âˆˆâ€„â„<sup><em>B</em>â€…Ã—â€…<em>L</em>â€…Ã—â€…<em>H</em>â€…Ã—â€…<em>D</em></sup></span></p><ul><li><span class="math inline"><em>B</em></span>ï¼šBatch size<br /></li><li><span class="math inline"><em>L</em></span>ï¼šåºåˆ—é•¿åº¦<br /></li><li><span class="math inline"><em>H</em></span>ï¼šAttention å¤´æ•°<br /></li><li><span class="math inline"><em>D</em></span>ï¼šæ¯ä¸ªå¤´çš„ç»´åº¦</li></ul></li><li><p>å°†å¤šå¤´è¾“å‡ºåˆå¹¶ï¼š<br /><spanclass="math display"><em>X</em><sup>â€²</sup>â€„=â€„reshape(<em>X</em>,â€†(<em>B</em>,â€†<em>L</em>,â€†<em>H</em>â€…â‹…â€…<em>D</em>))â€„âˆˆâ€„â„<sup><em>B</em>â€…Ã—â€…<em>L</em>â€…Ã—â€…(<em>H</em>â€Š<em>D</em>)</sup></span></p></li><li><p>ä¸¤å±‚â€œå·ç§¯â€å…¨è¿æ¥ç»“æ„<br />è¿™é‡Œæ‰€è°“â€œå·ç§¯â€ï¼Œå®é™…ä¸Šç­‰ä»·äºåœ¨æœ€åä¸€ç»´ä¸Šå¯¹æ¯ä¸ªä½ç½®ç‹¬ç«‹åœ°åš 1Ã—1 å·ç§¯ï¼ˆä¸RNN ä¸­åœ¨ä¸åŒæ—¶é—´æ­¥å…±äº«å‚æ•°çš„æ€æƒ³ä¸€è‡´ï¼‰ï¼Œå¹¶åœ¨å·ç§¯æ ¸ååŠ å…¥éçº¿æ€§ReLUã€‚<br /><span class="math display">$$\begin{aligned}Z_1 &amp;= \mathrm{ReLU}\bigl(X' W_1 + b_1\bigr),\quadW_1\in\mathbb{R}^{(H\!D)\times d_{ff}},\; b_1\in\mathbb{R}^{d_{ff}}\\Z_2 &amp;= Z_1 W_2 + b_2,\quad W_2\in\mathbb{R}^{d_{ff}\times(H\!D)},\;b_2\in\mathbb{R}^{(H\!D)}\end{aligned}$$</span></p><ul><li>ç¬¬ä¸€å±‚å‡ç»´åˆ°ä¸­é—´ç»´åº¦ <spanclass="math inline"><em>d</em><sub><em>f</em><em>f</em></sub></span>ï¼ˆä¾‹å¦‚<span class="math inline">2048</span>ï¼‰<br /></li><li>ç¬¬äºŒå±‚é™ç»´å›åŸå§‹ç»´åº¦ <spanclass="math inline"><em>H</em>â€Š<em>D</em></span>ï¼ˆä¾‹å¦‚ <spanclass="math inline">512</span>ï¼‰</li></ul></li><li><p>åŠ æ®‹å·® &amp; LayerNorm<br /><spanclass="math display"><em>Y</em>â€„=â€„LayerNorm(<em>X</em><sup>â€²</sup>â€…+â€…<em>Z</em><sub>2</sub>)â€„âˆˆâ€„â„<sup><em>B</em>â€…Ã—â€…<em>L</em>â€…Ã—â€…(<em>H</em>â€Š<em>D</em>)</sup></span></p></li><li><p>ï¼ˆå¯é€‰ï¼‰reshape å›å¤šå¤´æ’åˆ—ï¼š<br /><spanclass="math display"><em>Y</em><sup>â€²</sup>â€„=â€„reshape(<em>Y</em>,â€†(<em>B</em>,â€†<em>L</em>,â€†<em>H</em>,â€†<em>D</em>))</span></p></li></ol><ul><li><strong>çº¿æ€§é™åˆ¶</strong>ï¼šé™¤å» Attention ä¸­çš„SoftMaxï¼Œè‹¥åªå †çº¿æ€§å±‚ï¼Œæ¨¡å‹è¡¨è¾¾èƒ½åŠ›è¾ƒå¼±ï¼›å¼•å…¥ ReLUåèƒ½å¤Ÿæ‹Ÿåˆæ›´å¤æ‚çš„éçº¿æ€§å‡½æ•°ã€‚<br /></li><li><strong>ç¨€ç–æƒé‡</strong>ï¼šAttention çš„ SoftMaxæœ¬è´¨ä¸Šç”Ÿæˆäº†ä¸€ç»„â€œç¨€ç–â€æƒé‡ï¼Œè´Ÿè´£å­¦ä¹ ä¸åŒä½ç½®é—´çš„ä¾èµ–ï¼›FFNåˆ™è´Ÿè´£åœ¨æ¯ä¸ªä½ç½®ä¸Šâ€œå¹²å‡€â€åœ°æŠ½å–è¯¥è¯çš„å†…éƒ¨ç‰¹å¾ï¼Œé¿å…æ— è°“çš„è·¨è¯å¹²æ‰°ã€‚<br /></li><li><strong>å·ç§¯è§†è§’</strong>ï¼šå°† FFN çœ‹ä½œ<strong>å¯¹æœ€åä¸€ç»´çš„ 1Ã—1å·ç§¯</strong>ï¼Œç­‰åŒäºå¯¹æ¯ä¸ªä½ç½®ç‹¬ç«‹ä½†åœ¨æ‰€æœ‰ä½ç½®å…±äº«å‚æ•°ï¼Œè¿™ä¸ RNNåœ¨æ—¶é—´æ­¥ä¸Šå…±äº«æƒé‡çš„å‡è®¾ä¸€è‡´ã€‚<br /></li><li><strong>å¢å¼ºè¡¨è¾¾</strong>ï¼šAttention è§£å†³äº†ä¸Šä¸‹æ–‡ä¾èµ–ï¼ŒFFNåˆ™è¡¥å¼ºäº†å•ä½ç½®ç‰¹å¾æå–ï¼Œä¸¤è€…ååŒæå‡äº† Transformer çš„æ•´ä½“è¡¨è¾¾èƒ½åŠ›ã€‚</li></ul><hr /><blockquote><p><strong>æ³¨æ„</strong>ï¼šä»¥ä¸Šæ“ä½œå¯¹æ¯ä¸ªæ‰¹æ¬¡ï¼ˆ<spanclass="math inline"><em>B</em></span>ï¼‰ä¸­æ¯ä¸ªåºåˆ—ä½ç½®ï¼ˆ<spanclass="math inline"><em>L</em></span>ï¼‰éƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œå‚æ•°åœ¨æ‰€æœ‰ä½ç½®é—´å…±äº«ã€‚</p></blockquote><h4 id="residual-connection">Residual Connection</h4><p>åœ¨ä¸Šé¢çš„æ“ä½œä¸­ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯æœ‰æ’åˆ—ä¸å˜æ€§ã€‚æ®‹å·®æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ“ä½œï¼Œè¿™æ ·å¯ä»¥è®©ç½‘ç»œæ›´å¥½åœ°è®°å½•ä½ç½®ç¼–ç ã€‚</p><h4 id="layer-normalization">Layer Normalization</h4><p>ç›®çš„æ˜¯ä½¿å¾—æ¯ä¸€å±‚ç»è¿‡Attentionå’ŒFeed-Forwardä¹‹åçš„è¾“å‡ºçš„åˆ†å¸ƒæ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¢¯åº¦æ›´åŠ ç¨³å®šã€‚[[Deep Learning Lecture-5#Layer Normalization]]</p><p>![[Pasted image 20250323151056.png]]</p><h4 id="value-embedding">Value Embedding</h4><ul><li><p><strong>ç›®çš„</strong>ï¼šå°†åŸå§‹è¾“å…¥ç‰¹å¾ï¼ˆå¦‚æ¸©åº¦ã€æµé‡ã€è‚¡ä»·ç­‰æ•°å€¼ï¼‰ä»ä½ç»´ï¼ˆé€šå¸¸æ˜¯1æˆ–å‡ ä¸ªé€šé“ï¼‰æ˜ å°„åˆ°é«˜ç»´å‘é‡ç©ºé—´ï¼Œä½¿æ¨¡å‹èƒ½åœ¨æ›´å¤§ç»´åº¦ä¸‹å­¦ä¹ æ›´ä¸°å¯Œçš„ç‰¹å¾è¡¨ç¤ºã€‚</p></li><li><p><strong>åšæ³•</strong>ï¼šé€šè¿‡ä¸€ä¸ªçº¿æ€§å±‚æˆ– 1Ã—1å·ç§¯ï¼ˆ<code>TokenEmbedding</code>ï¼‰æŠŠæ¯ä¸ªæ—¶é—´æ­¥çš„åŸå§‹å‘é‡æ˜ æˆé•¿åº¦ä¸º<code>d_model</code> çš„å‘é‡ã€‚</p></li><li><p><strong>å®ç°æ–¹å¼</strong>ï¼šé€šè¿‡ä¸€ä¸ªçº¿æ€§æ˜ å°„æˆ– <spanclass="math inline">1â€…Ã—â€…1</span> å·ç§¯å®Œï¼Œå¯¹äºæœ‰<spanclass="math inline"><em>c</em><sub><em>i</em><em>n</em></sub></span>ä¸ªç‰¹å¾ç»´åº¦çš„è¾“å…¥ï¼Œä½¿ç”¨å·ç§¯æ ¸çš„å¤§å°æ˜¯<spanclass="math inline">[<em>d</em><sub><em>m</em><em>o</em><em>d</em><em>e</em><em>l</em></sub>,â€†<em>c</em><sub><em>i</em><em>n</em></sub>,â€†1]</span></p></li><li><p><strong>è¾“å…¥ç»´åº¦</strong>ï¼š<spanclass="math inline">(batch_size,â€†seq_len,â€†<em>c</em><sub><em>i</em><em>n</em></sub>)</span></p></li><li><p><strong>è¾“å‡ºç»´åº¦</strong>ï¼š<spanclass="math inline">(batch_size,â€†seq_len,â€†<em>d</em><sub><em>m</em><em>o</em><em>d</em><em>e</em><em>l</em></sub>)</span></p></li></ul><h4 id="positional-encoding-position-embedding">Positional Encoding/Position Embedding</h4><p>ä½ç½®ä¿¡æ¯æ˜¯é¡ºåºä¿¡æ¯çš„ä¸€ç§æ³›åŒ–çš„å½¢å¼ã€‚å¦‚æœé‡‡ç”¨ç‹¬çƒ­ç¼–ç ï¼Œè¿™æ˜¯ä¸€ç§ç±»åˆ«ä¿¡æ¯è€Œä¸æ˜¯ä¸€ä¸ªé¡ºåºä¿¡æ¯ï¼Œä¸åŒçš„æ˜¯ä¸å¯ä»¥æ¯”çš„ã€‚æ‰€ä»¥å¼•å…¥<em>positionembedding</em>ï¼Œè¿™æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œæ•ˆæœç±»ä¼¼äºä¸€ä¸ªæŸ¥æ‰¾è¡¨ã€‚æŸ¥æ‰¾æ“ä½œåœ¨è¿™é‡Œå°±æ˜¯ä¸€ä¸ªçŸ©é˜µä¹˜ä¸Šä¸€ä¸ªç‹¬çƒ­ç¼–ç çš„æ“ä½œï¼Œè¿™æ˜¯å› ä¸ºGPUåœ¨çŸ©é˜µä¹˜æ³•æ“ä½œä¸Šæ˜¯éå¸¸é«˜æ•ˆçš„ã€‚ä½†æ˜¯ç‹¬çƒ­ç¼–ç ä¼šå¸¦æ¥ä¸‹é¢çš„é—®é¢˜ - <strong>é«˜ç»´ç¨€ç–æ€§</strong>ï¼šç‹¬çƒ­ç¼–ç çš„ç»´åº¦ç­‰äºåºåˆ—æœ€å¤§é•¿åº¦ï¼ˆå¦‚512ï¼‰ï¼Œå¯¼è‡´å‘é‡ç¨€ç–ä¸”è®¡ç®—æ•ˆç‡ä½ä¸‹ï¼ˆå°¤å…¶å¯¹é•¿åºåˆ—ï¼‰ã€‚- <strong>æ— æ³•æ³›åŒ–åˆ°æœªè§é•¿åº¦</strong>ï¼šè‹¥è®­ç»ƒæ—¶åºåˆ—æœ€å¤§é•¿åº¦ä¸º512ï¼Œæ¨¡å‹æ— æ³•å¤„ç†æ›´é•¿çš„åºåˆ—</p><p><strong>å¼•å…¥å½’çº³åå¥½</strong>ï¼š -æ¯ä¸ªä½ç½®çš„ç¼–ç åº”è¯¥æ˜¯ç‹¬ä¸€æ— äºŒçš„ä¸”æ˜¯ç¡®å®šçš„ -è®¤ä¸ºä¸¤ä¸ªä½ç½®çš„è·ç¦»åº”è¯¥æ˜¯ä¸€è‡´çš„ -åº”è¯¥ç”Ÿæˆä¸€ä¸ªæœ‰ç•Œçš„å€¼ï¼Œä½ç½®æ•°éšç€åºåˆ—é•¿åº¦çš„å¢åŠ è€Œå¢åŠ </p><p>Googleçš„å®ç°æ˜¯ä½¿ç”¨çš„æ­£å¼¦å’Œä½™å¼¦å‡½æ•°çš„ç»„åˆï¼š <spanclass="math display">$$e_i(2j) = \sin\left(\frac{i}{10000^{2j/d_{\text{model}}}}\right)$$</span> <span class="math display">$$e_i(2j+1) = \cos\left(\frac{i}{10000^{2j/d_{\text{model}}}}\right)$$</span> ä¸Šè¿°å…¬å¼ä¸­çš„<spanclass="math inline"><em>i</em></span>æŒ‡çš„å¥å­ä¸­çš„ç¬¬<spanclass="math inline"><em>i</em></span>ä¸ªä½ç½®ï¼Œ<spanclass="math inline"><em>j</em></span>æŒ‡çš„æ˜¯ä½ç½®ç¼–ç çš„ç»´åº¦ï¼Œ<spanclass="math inline"><em>d</em><sub>model</sub></span>æ˜¯ä½ç½®ç¼–ç çš„ç»´åº¦ã€‚è¿™æ ·çš„ç¼–ç æ˜¯æ»¡è¶³ä¸Šé¢çš„å½’çº³åå¥½çš„ã€‚</p><h4 id="temporal-embedding">Temporal Embedding</h4><ul><li><strong>ç›®çš„</strong>ï¼šé’ˆå¯¹æ—¶é—´åºåˆ—ä¸­ç‰¹æœ‰çš„â€œæ—¶é—´å±æ€§â€â€”â€”å°æ—¶ã€æ˜ŸæœŸå‡ ã€æœˆä»½ã€å­£èŠ‚ç­‰â€”â€”è¿›è¡Œç¼–ç ï¼Œè®©æ¨¡å‹å­¦åˆ°å‘¨æœŸæ€§ï¼ˆå¦‚æ—¥å‘¨æœŸã€å‘¨å‘¨æœŸã€å¹´å‘¨æœŸï¼‰å’ŒèŠ‚å‡æ—¥æ•ˆåº”ç­‰ä¿¡æ¯ã€‚</li><li><strong>åšæ³•</strong>ï¼šé€šå¸¸æŠŠæ¯ä¸ªæ—¶é—´å±æ€§ï¼ˆhour-of-day, day-of-week,month ç­‰ï¼‰ä¹Ÿæ˜ å°„åˆ° <code>d_model</code>ç»´åº¦ï¼Œç„¶åæŠŠè¿™äº›å±æ€§å‘é‡åŠ èµ·æ¥æˆ–æ‹¼æ¥åå†é™ç»´ã€‚<code>TemporalEmbedding</code>ç±»ä¼šæ ¹æ® <code>embed_type</code>ï¼ˆå¦‚ <code>'fixed'</code> æˆ–<code>'learned'</code>ï¼‰å’Œ <code>freq</code>ï¼ˆå¦‚<code>'h'</code>ã€<code>'d'</code>ï¼‰æ¥å†³å®šå…·ä½“ç»†èŠ‚ã€‚</li></ul><h4 id="encoder">Encoder</h4><p>ç¼–ç å™¨ä¸­ä½¿ç”¨çš„æ˜¯å¤šå¤´æ³¨æ„åŠ›ã€é€ä½ç½®å‰é¦ˆç½‘ç»œå’Œä½ç½®ç¼–ç ã€‚åœ¨è¿™ä¸ªç¼–ç å™¨ä¸­æ˜¯ä¸€ä¸ªç›´ç­’å¼çš„ç½‘ç»œï¼Œå¥½å¤„æ˜¯è°ƒå‚è¾ƒä¸ºç®€å•ã€‚</p><p>ç¼ºç‚¹ï¼š - äºŒæ¬¡å¤æ‚åº¦ - å‚æ•°é‡è¿‡å¤§ - å¾ˆå¤šçš„å¤´æ˜¯å†—ä½™çš„</p><p>è®­ç»ƒé˜¶æ®µè¦ä½¿ç”¨å¤šä¸ªå¤´ï¼Œå‘ç°æœ‰äº›å¤´çš„æƒé‡è¾ƒä½ï¼Œå¯ä»¥åœ¨æ¨ç†é˜¶æ®µå»æ‰è¿™äº›å¤´ã€‚</p><h4 id="decoder">Decoder</h4><h5 id="autoregressive">Autoregressive</h5><p>![[Pasted image 20250323161530.png]]</p><p>é¢„æµ‹é˜¶æ®µä¸€å®šè¦ä½¿ç”¨æ»šåŠ¨é¢„æµ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªè‡ªå›å½’çš„çŠ¶æ€ï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ä¸ªä¸²è¡Œçš„æ“ä½œï¼Œä¼šæ¯”è¾ƒæ…¢ã€‚ä½†æ˜¯åœ¨è®­ç»ƒé˜¶æ®µè¿™æ ·æ˜¯ä¸èƒ½æ¥å—çš„ï¼Œæˆ‘å¸Œæœ›è®­ç»ƒçš„ä¸åŒé˜¶æ®µå¯ä»¥å¹¶è¡Œè®¡ç®—ï¼Œä½†æ˜¯è¿™é‡Œè¦æ±‚åœ¨ä¸€å¼€å§‹è¾“å…¥æ‰€æœ‰çš„åºåˆ—ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦<strong>é®æŒ¡</strong>ã€‚åœ¨ç®—Attentionçš„æ—¶å€™ï¼Œå¯¹äºå½“å‰çš„ä½ç½®ï¼Œåªèƒ½çœ‹åˆ°ä¹‹å‰çš„ä½ç½®ï¼Œä¸èƒ½çœ‹åˆ°ä¹‹åçš„ä½ç½®ã€‚</p><p>![[Pasted image 20250323163151.png]]</p><p>åœ¨ç¼–ç å™¨ä¸Šæ˜¯ä¸èƒ½ç”¨çš„ï¼Œå› ä¸ºé˜²æ­¢è§£ç å™¨åœ¨è®­ç»ƒæ—¶åˆ©ç”¨æœªæ¥çš„ç›®æ ‡åºåˆ—ä¿¡æ¯ï¼ˆå³â€œä½œå¼Šâ€ï¼‰ï¼Œç¡®ä¿æ¨¡å‹é€æ­¥ç”Ÿæˆçš„èƒ½åŠ›ä¸æ¨ç†é˜¶æ®µä¸€è‡´ã€‚è®­ç»ƒè¿‡ç¨‹ä¸­ä»ç„¶éœ€è¦çœŸå®æ ‡ç­¾ä½œä¸ºç›®æ ‡è¾“å‡ºï¼Œä½†æ©ç é™åˆ¶äº†æ¨¡å‹åœ¨ç”Ÿæˆå½“å‰è¯æ—¶å¯¹æœªæ¥çš„è®¿é—®ã€‚</p><h4 id="encoder-decoder-attention">Encoder-Decoder Attention</h4><p>è®¡ç®—çš„æ˜¯è§£ç å™¨çš„è¾“å‡ºå’Œç¼–ç å™¨çš„è¾“å‡ºä¹‹é—´çš„ç›¸å…³æ€§ï¼Œè¿™é‡Œçš„Queryæ˜¯è§£ç å™¨çš„è¾“å‡ºï¼ŒKeyå’ŒValueæ˜¯ç¼–ç å™¨çš„è¾“å‡ºã€‚</p><p>![[Pasted image 20250323185530.png]]</p><p>![[Pasted image 20250323185720.png]]</p><p>æ³¨æ„è¿™é‡Œæ˜¯å°†ç¼–ç å™¨çš„è¾“å‡ºè¾“å…¥åˆ°è§£ç å™¨ä¸­çš„æ¯ä¸€å±‚çš„Encoder-DecoderAttentionä¸­ã€‚è¿™é‡Œæ˜¯ç¥ç»ç½‘ç»œä¸­çš„<strong>ç‰¹å¾é‡ç”¨</strong>æ€æƒ³ï¼Œå¹¶ä¸”è§£ç å™¨ä¸­çš„ç½‘ç»œæ˜¯ç›´ç­’å¼çš„ï¼Œæ‰€ä»¥è¿™äº›ç‰¹å¾æ˜¯å¯ä»¥é‡ç”¨çš„ã€‚</p><h4 id="rnn-vs.-transformer">RNN vs.Â Transformer</h4><ul><li>RNNæ˜¯ä¸²è¡Œçš„ï¼ŒTransformeræ˜¯å¹¶è¡Œçš„</li><li>å¯¹äºæœ‰ä¸¥æ ¼ååºå…³ç³»çš„åºåˆ—ï¼ŒRNNå¯èƒ½æ›´é€‚åˆ</li><li>å¯¹äºé•¿åºåˆ—ï¼ŒTransformeræ›´é€‚åˆ</li><li>å¯¹äºè¾ƒå°çš„æ•°æ®é‡ï¼ŒTransformerså‚æ•°é‡è¾ƒå¤§ï¼Œè¡¨ç°å¯èƒ½ä¸å¦‚RNN</li></ul><p>![[Pasted image 20250323190623.png]]</p><p>![[Pasted image 20250323190856.png]] ### X-formers Variance withImprovements</p><p><a href="https://arxiv.org/abs/2106.04554">[2106.04554] A Survey ofTransformers</a></p><p>![[Pasted image 20250323191632.png]]</p><p>![[Pasted image 20250323191637.png]]</p><h4 id="lineariezd-attention">Lineariezd Attention</h4><h4 id="flow-attention">Flow Attention</h4><h3 id="gpt-generative-pre-trained-transformer">GPT: GenerativePre-trained Transformer</h3><h4 id="transfer-learning">Transfer Learning</h4><p>å…ˆå°†ä¸€ä¸ªæ¨¡å‹é¢„è®­ç»ƒå¥½ï¼Œç„¶ååœ¨ç‰¹å®šçš„ä»»åŠ¡ä¸Šè¿›è¡Œå¾®è°ƒã€‚ä¸€èˆ¬è€Œè¨€ï¼Œé¢„è®­ç»ƒçš„è¿‡ç¨‹æ˜¯æ— ç›‘ç£çš„ï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥ä½¿ç”¨å¤§è§„æ¨¡æ•°æ®ã€‚</p><h4 id="pre-training">Pre-Training</h4><p>![[Pasted image 20250324190821.png]]</p><ul><li>ç›´æ¥ä½¿ç”¨çš„æ˜¯Transformersä¸­çš„blockï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨12å±‚</li><li>åªä½¿ç”¨decoderæ²¡æœ‰encoderï¼Œå› ä¸ºè¿™ä¸æ˜¯ä¸€ä¸ªæœºå™¨ç¿»è¯‘çš„ä»»åŠ¡</li><li>åœ¨è®¡ç®—æŸå¤±å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨çš„ä¼¼ç„¶å‡½æ•°æ˜¯æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œåœ¨å®é™…ä¸­ä½¿ç”¨ä¸€ä¸ªå‚æ•°åŒ–çš„ç½‘ç»œæ¥è¿‘ä¼¼éœ€è¦çš„æ¦‚ç‡ã€‚</li></ul><h4 id="supervised-fine-tuning">Supervised Fine-Tuning</h4><p>å¯¹äºä¸åŒçš„ä»»åŠ¡ï¼Œéœ€è¦æ›´æ¢æ¨¡å‹çš„è¾“å‡ºå¤´ï¼Œå¹¶ä¸”è¿˜è¦ä½¿ç”¨æ–°çš„æŸå¤±å‡½æ•°ã€‚å…³æ³¨ä¸Šä¸‹æ–‡å»ºæ¨¡ã€‚![[Pasted image 20250324193704.png]]</p><p>æœ€åæ˜¯ä½¿ç”¨æ— ç›‘ç£è®­ç»ƒçš„æŸå¤±å‡½æ•°å’Œæœ‰ç›‘ç£è®­ç»ƒçš„æŸå¤±å‡½æ•°çš„åŠ æƒå’Œï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>å¤šä»»åŠ¡å­¦ä¹ </strong>ã€‚å½“å¾®è°ƒçš„æ•°æ®æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ— ç›‘ç£è®­ç»ƒçš„æŸå¤±å‡½æ•°çš„æƒé‡è¾ƒå¤§ã€‚</p><p>å¯¹äºä¸åŒçš„ä¸‹æ¸¸ä»»åŠ¡ï¼Œè¦è¿›è¡Œä»»åŠ¡é€‚é…<em>Task SpecificAdaptation</em>ã€‚å¯¹äºä¸åŒçš„ä¸‹æ¸¸ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„å¤´ã€‚ ![[Pasted image20250324194137.png]]</p><h4 id="gpt-2-gpt-3">GPT-2 &amp; GPT-3</h4><p>Zero-shotlearningï¼šåœ¨æ²¡æœ‰çœ‹åˆ°è®­ç»ƒæ•°æ®çš„æƒ…å†µä¸‹ï¼Œç›´æ¥åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œé¢„æµ‹ã€‚é€šè¿‡åœ¨é¢„è®­ç»ƒé˜¶æ®µä½¿ç”¨å¤§è§„æ¨¡çš„æ•°æ®ï¼Œå¯ä»¥ä½¿å¾—æ¨¡å‹å…·æœ‰æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›ï¼Œè¿™æ ·å¯ä»¥æé«˜åœ¨ä¸€äº›å¸¸è§é—®é¢˜ä¸Šçš„è¡¨ç°ã€‚</p><h3id="bert-bidirectional-encoder-representations-from-transformers">BERT:Bidirectional Encoder Representations from Transformers</h3><p>ä¸GPTä¸åŒçš„æ˜¯ï¼ŒBERTæ˜¯åŒå‘çš„ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ã€‚ ![[Pasted image20250324195035.png]]</p><p>BERTåœ¨encoderé˜¶æ®µå°±ä½¿ç”¨äº†maskï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒçš„æ—¶å€™ä¸ä¼šçœ‹åˆ°æœªæ¥çš„ä¿¡æ¯ã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­éšæœºåœ°maskæ‰ä¸€äº›è¯ï¼Œç„¶åé¢„æµ‹è¿™äº›è¯ã€‚å¦‚æœé®æŒ¡çš„è¯å¤ªå°‘ï¼Œé‚£ä¹ˆæ¨¡å‹å¾—åˆ°çš„è®­ç»ƒä¸å¤Ÿï¼Œå¦‚æœé®æŒ¡çš„è¯å¤ªå¤šï¼Œé‚£ä¹ˆå¾—åˆ°çš„ä¸Šä¸‹æ–‡å°±å¾ˆå°‘ã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å°±ä½¿ç”¨äº†102ç§è¯­è¨€ã€‚ç‰¹å¾å·¥ç¨‹ï¼šä½¿ç”¨äº†æ›´å¤šçš„ç‰¹å¾ï¼Œå¼•å…¥äº†æ›´å¤šçš„embeddingæ˜¯å¤šä¸ªä»»åŠ¡çš„è”åˆè®­ç»ƒï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¨¡å‹æ›´åŠ é€šç”¨ã€‚</p><h4 id="roberta-a-robustly-optimized-bert-pretraining-approach">RoBERTa:A Robustly Optimized BERT Pretraining Approach</h4><p>ç»è¿‡å……åˆ†çš„è°ƒå‚å’Œæ›´é•¿çš„è®­ç»ƒæ—¶é—´ï¼Œä½¿å¾—æ¨¡å‹çš„è¡¨ç°æ›´å¥½ã€‚è¯æ˜äº†BERTä¸­çš„ä¸‹å¥é¢„æµ‹æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå› ä¸ºåœ¨RoBERTaä¸­å»æ‰äº†è¿™ä¸ªä»»åŠ¡ã€‚maskçš„patternå¯ä»¥åŠ¨æ€è°ƒæ•´</p><h4id="albert-a-lite-bert-for-self-supervised-learning-of-language-representations">ALBERT:A Lite BERT for Self-supervised Learning of LanguageRepresentations</h4><p>ä½ç§©åˆ†è§£ï¼Œå‡å°‘å‚æ•°é‡ ![[Pasted image 20250324203227.png]]</p><p>è·¨å±‚å‚æ•°å…±äº«ï¼šå¯ä»¥è®©æ¨¡å‹æ›´åŠ ç¨³å®š</p><h4 id="t5-text-to-text-transfer-transformer">T5: Text-to-Text TransferTransformer</h4><p>è¿ç§»æ˜¯æ³›åŒ–çš„é«˜çº§å½¢å¼ï¼šå¯ä»¥å°†å¤šç§æ–‡æœ¬ä»»åŠ¡ç»Ÿä¸€ä¸ºæ–‡æœ¬åˆ°æ–‡æœ¬çš„å½¢å¼ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¨¡å‹æ›´åŠ é€šç”¨ã€‚</p><p>æ¶æ„å±‚é¢çš„åˆ›æ–°ï¼š ![[Pasted image 20250324203639.png]]</p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯prefix-LMï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ¨¡å‹æ›´åŠ é€šç”¨ã€‚</p><h3 id="vision-transformer">Vision Transformer</h3><h4 id="vit">ViT</h4><p>å°†ä¸€ä¸ªå›¾åƒå˜æˆä¸€ä¸ªpatch å¢åŠ ä¸€ä¸ªPositionEmbeddingï¼Œäºæ˜¯å¾—åˆ°å„ä¸ªpatchçš„ç‰¹å¾çš„åŠ æƒå¹³å‡ã€‚ä¸»è¦çš„è´¡çŒ®æ˜¯å°†å›¾åƒè½¬æ¢ä¸ºåºåˆ—ï¼Œä»è€Œå¯ä»¥ä½¿ç”¨transformersæ¥è¿›è¡Œå»ºæ¨¡ã€‚åœ¨è¿™ä¸ªä¹‹å‰ï¼Œæ™®éçš„è§‚ç‚¹æ˜¯transformersåªèƒ½ç”¨äºæ–‡æœ¬æ•°æ®ï¼Œè€ŒCNNç”¨äºå›¾åƒæ•°æ®ã€‚</p><h4 id="swim-transformer">Swim Transformer</h4><p>å°†CNNä¸­çš„ä¸€äº›å½’çº³åå¥½å¼•å…¥ï¼Œå¯ä»¥ä½¿ç”¨å±€éƒ¨çš„æ³¨æ„åŠ›ï¼Œä½†æ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½æ•æ‰å…¨å±€çš„ä¿¡æ¯ï¼Œé€šè¿‡ShiftedWindow Mechanismæ¥å®ç°ã€‚ å±‚æ¬¡åŒ–ç‰¹å¾ï¼š ![[Pasted image20250324205304.png]]</p><p>å¯†é›†é¢„æµ‹ä»»åŠ¡å¯¹äºå±‚æ¬¡åŒ–ç‰¹å¾éœ€æ±‚æ›´é«˜ï¼Œäºæ˜¯è¿™ä¸ªæ¨¡å‹çš„è¡¨ç°æ˜¯æ›´å¥½åœ°ã€‚</p><h4 id="detr">DETR</h4><p>![[Pasted image 20250324205845.png]]</p><p>![[Pasted image 20250324205921.png]]</p><h3 id="fundation-models">Fundation Models</h3><p><spanclass="math display"><em>e</em><sup><em>Î±</em>â€…+â€…<em>Î²</em><em>i</em></sup>â€„=â€„<em>e</em><sup><em>Î±</em></sup><em>e</em><sup><em>Î²</em><em>i</em></sup>â€„=â€„<em>e</em><sup><em>Î±</em></sup>(cosâ€†<em>Î²</em>â€…+â€…<em>i</em>sinâ€†<em>Î²</em>)</span></p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-8</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-8/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-8/</url>
    
    <content type="html"><![CDATA[<h2 id="transfer-learning">Transfer Learning</h2><p>æ¨¡å‹åœ¨è¾ƒå¤§è§„æ¨¡ä¸­çš„æ•°æ®é›†ä¸­å¾—åˆ°æˆåŠŸï¼Œåœ¨è¾ƒå°çš„æ•°æ®é›†ä¸­è¿›è¿›è¡Œå­¦ä¹ ã€‚<strong>åˆ©ç”¨å…ˆéªŒçŸ¥è¯†</strong>æ˜¯å®ç°å¼ºäººå·¥æ™ºèƒ½çš„ä¸€ä¸ªå‰ææ¡ä»¶ã€‚</p><h2 id="pre-training">Pre-Training</h2><p>é¢„è®­ç»ƒçš„ç»“æœæ˜¯ä¸€ä¸ªæ¨¡å‹ï¼Œç„¶ååœ¨å°æ•°æ®é›†ä¸Šè¿›è¡Œå¾®è°ƒã€‚é¢„è®­ç»ƒæä¾›çš„æ˜¯ä¸€ä¸ªå…ˆéªŒçŸ¥è¯†ï¼Œç„¶åå†è¿›è¡Œå¾®è°ƒã€‚è¿™å·²ç»æ˜¯æ·±åº¦å­¦ä¹ ä¸­çš„å…±è¯†ï¼Œåœ¨å°æ•°æ®é›†ä¸­åšå¾®è°ƒæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„æ–¹æ³•ã€‚</p><h3 id="supervised-pre-training">Supervised Pre-Training</h3><ul><li>BiT: Big Transfer<ul><li>åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šåšé¢„è®­ç»ƒéå¸¸é‡è¦</li></ul></li><li>DAT: Domain Adaptative Transfer<ul><li>åœ¨é¢„è®­ç»ƒçš„æ•°æ®é›†ä¸Šè¿›è¡Œç­›é€‰å¯¹äºæ¨¡å‹çš„è¡¨ç°ä¼šæ›´å¥½</li></ul></li><li>è¿ç§»æ€§å—åˆ°æ•°æ®é—´è·ç¦»çš„å½±å“</li><li>åœ¨å¾®è°ƒçš„è¿‡ç¨‹ä¸­éœ€è¦å¯¹å¾ˆå¤šå±‚è¿›è¡Œè°ƒæ•´</li><li>ä¸‹æ¸¸çš„ä»»åŠ¡å’Œé¢„è®­ç»ƒçš„ä»»åŠ¡ä¹‹é—´çš„è·ç¦»è¶Šè¿‘ï¼Œè¿ç§»çš„æ•ˆæœè¶Šå¥½</li></ul><p>å‡è®¾ç©ºé—´çš„è§£é‡Šï¼š - é¢„è®­ç»ƒçš„æ¨¡å‹èƒ½åœ¨è¾ƒå°çš„è¾ƒå¥½çš„å‡è®¾ç©ºé—´ä¸Šå¯»æ‰¾</p><h4 id="multi-task-architecture">Multi-Task Architecture</h4><ul><li>Hard Parameter Sharing<ul><li>ç›´æ¥å…±äº«å‚æ•°</li><li>å…±äº«çš„å‚æ•°æ˜¯æ‰€æœ‰ä»»åŠ¡éƒ½éœ€è¦çš„</li></ul></li><li>Soft Parameter Sharing<ul><li>æ¯ä¸ªä»»åŠ¡ä½¿ç”¨ä¸€ä¸ªæ¨¡å‹</li></ul></li><li>TASKONOMY<ul><li>é¦–å…ˆè¿›è¡Œè®­ç»ƒï¼Œä¹‹åæ„å»ºä»»åŠ¡çš„å…³ç³»å›¾ï¼Œåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­æ‰¾ä¸€äº›æ›´ç›¸è¿‘çš„ä»»åŠ¡è¿›è¡Œå…±äº«</li></ul></li></ul><p>å¤šä»»åŠ¡å­¦ä¹ çš„æŸå¤±å‡½æ•°ï¼š <span class="math display">$$\min_{\theta} \sum_{i=1}^{T} w_i \mathcal{L}_i(\theta)$$</span> å…¶ä¸­ <spanclass="math inline"><em>w</em><sub><em>i</em></sub></span>æ˜¯æ¯ä¸ªä»»åŠ¡çš„æƒé‡ - GradNormï¼šä½¿å¾—æ¯ä¸ªä»»åŠ¡çš„æ¢¯åº¦ç›¸åŒ - Taskuncertaintyï¼šæ¯ä¸ªä»»åŠ¡çš„æŸå¤±å‡½æ•°çš„æƒé‡æ˜¯ä¸åŒçš„ - Pareto optimalsolutionï¼š - Optimize for the worst task - Regularizationï¼š</p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Deep Learning Lecture-7</title>
    <link href="/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-7/"/>
    <url>/2025/06/21/Deep%20Learning/Deep%20Learning%20Lecture-7/</url>
    
    <content type="html"><![CDATA[<h2 id="generative-model">Generative Model</h2><p>æ•°æ®åˆ†å¸ƒæ˜¯ç”Ÿæˆæ¨¡å‹çš„æ ¸å¿ƒã€‚ç”Ÿæˆæ¨¡å‹çš„ç›®æ ‡æ˜¯å­¦ä¹ æ•°æ®çš„åˆ†å¸ƒï¼Œç„¶åç”Ÿæˆæ–°çš„æ•°æ®ã€‚ç›®æ ‡æ˜¯<strong>å­¦ä¹ æ•°æ®çš„åˆ†å¸ƒ</strong>ï¼Œç„¶åç”Ÿæˆæ–°çš„æ•°æ®ã€‚å¯¹ç”Ÿæˆæ¨¡å‹çš„è¯„ä»·æ˜¯é€šè¿‡ç”Ÿæˆçš„æ•°æ®çš„è´¨é‡æ¥è¯„ä»·çš„ï¼Œç”Ÿæˆçš„æ•°æ®è¶Šæ¥è¿‘çœŸå®æ•°æ®ï¼Œç”Ÿæˆæ¨¡å‹çš„è´¨é‡è¶Šå¥½ã€‚<spanclass="math display"><em>Î¸</em><sup>*</sup>â€„=â€„argâ€†max<sub><em>Î¸</em></sub>ğ”¼<sub><em>x</em>â€„âˆ¼â€„<em>p</em><sub><em>d</em><em>a</em><em>t</em><em>a</em></sub></sub>logâ€†<em>p</em><sub><em>m</em><em>o</em><em>d</em><em>e</em><em>l</em></sub>(<em>x</em>|<em>Î¸</em>)</span>![[Pasted image 20250330094251.png]]</p><p>![[Pasted image 20250330094404.png]]</p><h3 id="gan-generative-adversarial-network">GAN: Generative AdversarialNetwork</h3><p>å¯¹æŠ—æœºå™¨å­¦ä¹ çš„æ€æƒ³æ˜¯é€šè¿‡ä¸¤ä¸ªç½‘ç»œä¹‹é—´çš„å¯¹æŠ—æ¥å­¦ä¹ ã€‚ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ä¹‹é—´çš„å¯¹æŠ—æ˜¯GANçš„æ ¸å¿ƒæ€æƒ³ã€‚ä½¿ç”¨çš„åšå¼ˆé—®é¢˜çš„æ€æƒ³ï¼Œä½¿ç”¨çš„æ˜¯æœ€å°åŒ–æœ€å¤§çš„æ€æƒ³ã€‚</p><p>GANçš„æ€æƒ³ä¸ºï¼šç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ä¹‹é—´çš„å¯¹æŠ—ï¼Œç”Ÿæˆå™¨ç”Ÿæˆæ•°æ®ï¼Œåˆ¤åˆ«å™¨åˆ¤æ–­æ•°æ®çš„çœŸå®æ€§ã€‚</p><p>ç›®æ ‡å‡½æ•°ä¸ºï¼š <spanclass="math display">min<sub><em>G</em></sub>max<sub><em>D</em></sub><em>V</em>(<em>D</em>,â€†<em>G</em>)â€„=â€„ğ”¼<sub><em>x</em>â€„âˆ¼â€„<em>p</em><sub><em>d</em><em>a</em><em>t</em><em>a</em></sub>(<em>x</em>)</sub>[logâ€†<em>D</em>(<em>x</em>)]â€…+â€…ğ”¼<sub><em>z</em>â€„âˆ¼â€„<em>p</em><sub><em>z</em></sub>(<em>z</em>)</sub>[logâ€†(1â€…âˆ’â€…<em>D</em>(<em>G</em>(<em>z</em>)))]</span>- å½“ç”Ÿæˆå™¨å›ºå®šæ—¶ï¼Œåˆ¤åˆ«å™¨çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–åˆ¤åˆ«å™¨çš„å‡†ç¡®ç‡ï¼š<spanclass="math inline">max<sub><em>D</em></sub><em>V</em>(<em>D</em>,â€†<em>G</em>)</span>- å½“åˆ¤åˆ«å™¨å›ºå®šæ—¶ï¼Œç”Ÿæˆå™¨çš„ç›®æ ‡æ˜¯æœ€å°åŒ–åˆ¤åˆ«å™¨çš„å‡†ç¡®ç‡ï¼š<spanclass="math inline">min<sub><em>G</em></sub><em>V</em>(<em>D</em>,â€†<em>G</em>)</span></p><p>ç”Ÿæˆå™¨ <span class="math inline"><em>G</em></span> çš„å®è´¨æ˜¯å°†å™ªå£°åˆ†å¸ƒ<spanclass="math inline"><em>p</em><sub><em>z</em></sub>(<em>z</em>)</span>ï¼ˆå¦‚é«˜æ–¯åˆ†å¸ƒï¼‰æ˜ å°„åˆ°æ•°æ®åˆ†å¸ƒ<spanclass="math inline"><em>p</em><sub><em>g</em></sub>(<em>x</em>)</span>ã€‚æ ¹æ®æ¦‚ç‡å¯†åº¦å˜æ¢å®šç†ï¼Œè‹¥<span class="math inline"><em>G</em></span>æ˜¯å¯é€†ä¸”å…‰æ»‘çš„å‡½æ•°ï¼Œåˆ™ç”Ÿæˆæ•°æ®çš„åˆ†å¸ƒä¸ºï¼š</p><p><span class="math display">$$p_g(x) = p_z(z) \cdot \left| \det \left( \frac{\partialG^{-1}(x)}{\partial x} \right) \right|$$</span></p><p>å°½ç®¡æ·±åº¦ç¥ç»ç½‘ç»œé€šå¸¸ä¸å¯é€†ï¼Œä½†é€šè¿‡è¶³å¤Ÿå¤æ‚çš„å‡½æ•°é€¼è¿‘ï¼ˆå¦‚å¤šå±‚éçº¿æ€§å˜æ¢ï¼‰ï¼Œç”Ÿæˆå™¨å¯ä»¥éšå¼åœ°å­¦ä¹ åˆ°ä»<spanclass="math inline"><em>p</em><sub><em>z</em></sub>(<em>z</em>)</span>åˆ° <spanclass="math inline"><em>p</em><sub><em>g</em></sub>(<em>x</em>)</span>çš„æ˜ å°„ï¼Œè¦†ç›–çœŸå®åˆ†å¸ƒ <spanclass="math inline"><em>p</em><sub><em>d</em><em>a</em><em>t</em><em>a</em></sub>(<em>x</em>)</span>ã€‚</p><p><strong>å…³é”®ç‚¹</strong>ï¼š<br />- å™ªå£°è¾“å…¥çš„éšæœºæ€§ç¡®ä¿äº†ç”Ÿæˆæ•°æ®åˆ†å¸ƒçš„å¤šæ ·æ€§ã€‚<br />-ç½‘ç»œçš„éçº¿æ€§èƒ½åŠ›å…è®¸ä»ç®€å•åˆ†å¸ƒï¼ˆå¦‚é«˜æ–¯åˆ†å¸ƒï¼‰é€¼è¿‘å¤æ‚åˆ†å¸ƒï¼ˆå¦‚å›¾åƒåƒç´ åˆ†å¸ƒï¼‰ã€‚</p><p>ä½†æ˜¯GANçš„<strong>è®­ç»ƒè¿‡ç¨‹æ˜¯éå¸¸å›°éš¾</strong>çš„ï¼Œæ¢¯åº¦æ€§è´¨æ˜¯ä¸å¥½çš„ï¼Œå› ä¸ºåœ¨æ¯”è¾ƒå¥½çš„æ ·æœ¬ä¸­ï¼Œç”±äºæ¢¯åº¦æ€§è´¨çš„é—®é¢˜ä¼šè¿›è¡Œè¾ƒå¤§çš„æ›´æ–°ã€‚</p><p>![[Pasted image 20250330100434.png]]</p><p><strong>è®­ç»ƒGANçš„æŠ€å·§</strong> ![[Pasted image20250330100506.png]]</p><h4 id="dcgan-deep-convolutional-generative-adversarial-networks">DCGAN:Deep Convolutional Generative Adversarial Networks</h4><p>å¯¹äºç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ï¼Œä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæ¥è¿›è¡Œè®­ç»ƒã€‚å¯¹äºåˆ¤åˆ«å™¨ï¼Œä½¿ç”¨çš„æ˜¯è¾ƒä¸ºæ ‡å‡†çš„CNNç½‘ç»œï¼Œå¯¹äºç”Ÿæˆå™¨ï¼Œä½¿ç”¨çš„æ˜¯è½¬ç½®å·ç§¯ï¼Œå…ˆå°†ç‰¹å¾å›¾è¿›è¡Œpaddingï¼Œç„¶åè¿›è¡Œå·ç§¯æ“ä½œï¼Œè¿™æ ·å¯ä»¥è·å¾—ä¸€ä¸ªè¾ƒå¤§çš„ç‰¹å¾å›¾ã€‚</p><ul><li><strong>ç”Ÿæˆå™¨</strong>ï¼šä½¿ç”¨è½¬ç½®å·ç§¯ï¼ˆåå·ç§¯ï¼‰é€æ­¥ä¸Šé‡‡æ ·ï¼Œç”Ÿæˆé«˜åˆ†è¾¨ç‡å›¾åƒã€‚</li><li><strong>åˆ¤åˆ«å™¨</strong>ï¼šä½¿ç”¨æ ‡å‡†CNNé€æ­¥ä¸‹é‡‡æ ·ã€‚</li><li><strong>å…³é”®æŠ€å·§</strong>ï¼šæ‰¹é‡å½’ä¸€åŒ–ã€Leaky ReLUã€å…¨å·ç§¯ç»“æ„ã€‚</li></ul><p>![[Pasted image 20250330102359.png]]</p><p>è¯æ˜äº†æ³›åŒ–å®šç†ï¼šåœ¨æœ‰é™çš„è®­ç»ƒæ ·æœ¬ä¹‹ä¸‹ï¼Œå¯ä»¥é€šè¿‡è®­ç»ƒå¾—åˆ°ä¸€ä¸ªæ³›åŒ–çš„æ¨¡å‹ã€‚</p><h4 id="inception-score">Inception Score</h4><p>IS ç”¨äºè¡¡é‡ç”Ÿæˆæ¨¡å‹çš„æ€§èƒ½ï¼Œé‡ç‚¹å…³æ³¨ä¸¤ç‚¹ï¼š<br />-<strong>ç±»åˆ«æ˜ç¡®æ€§</strong>ï¼šå•ä¸ªç”Ÿæˆæ ·æœ¬åº”æ˜ç¡®å±äºæŸä¸ªç±»åˆ«ï¼ˆå¯¹åº”åˆ†ç±»æ¦‚ç‡å°–é”ï¼‰ã€‚<br />- <strong>å¤šæ ·æ€§</strong>ï¼šç”Ÿæˆæ ·æœ¬åº”è¦†ç›–å¤šä¸ªç±»åˆ«ï¼ˆç±»åˆ«åˆ†å¸ƒå‡åŒ€ï¼‰ã€‚</p><p><spanclass="math display">ISâ€„=â€„expâ€†(ğ”¼<sub><em>x</em>â€„âˆ¼â€„<em>p</em><sub><em>g</em></sub></sub>[KL(<em>p</em>(<em>y</em>|<em>x</em>)â€„âˆ¥â€„<em>p</em>(<em>y</em>))])</span></p><ul><li>Class Probability Distribution: <spanclass="math inline"><em>p</em>(<em>y</em>|<em>x</em>)</span>ï¼Œç”Ÿæˆæ ·æœ¬<span class="math inline"><em>x</em></span>å±äºå„ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œåº¦é‡çš„æ˜¯ç”Ÿæˆçš„æ•°æ®çš„ç±»åˆ«åˆ†å¸ƒå’ŒçœŸå®æ•°æ®çš„ç±»åˆ«åˆ†å¸ƒçš„ç›¸ä¼¼æ€§ã€‚</li><li>Marginal Distribution of Generated Data: <spanclass="math inline"><em>p</em>(<em>y</em>)</span>ï¼Œåº¦é‡çš„æ˜¯ç”Ÿæˆçš„æ•°æ®çš„ç±»åˆ«åˆ†å¸ƒçš„å¤šæ ·æ€§ï¼Œå¦‚æœç”Ÿæˆçš„æ•°æ®æ˜¯å•ä¸€çš„ç§°ä¸ºæ¨¡å¼åå¡Œã€‚</li></ul><h5 id="kl-divergence">KL Divergence</h5><p>ä½¿ç”¨KLæ•£åº¦æ¥åº¦é‡ä¸¤ä¸ªåˆ†å¸ƒçš„ç›¸ä¼¼æ€§ï¼š <span class="math display">$$KL(p||q) =\mathbb{E}_X \left(  \log \frac{p(x)}{q(x)} \right)=\sum_{x\in \mathcal{X}} p(x) \log \frac{p(x)}{q(x)}$$</span> éœ€è¦ä¸Šé¢çš„å€¼å°½å¯èƒ½åå¤§</p><ul><li><strong>KLæ•£åº¦çš„æ„ä¹‰</strong>ï¼š<ul><li><strong><spanclass="math inline"><em>p</em>(<em>y</em>|<em>x</em>)</span>å°–é”</strong> â†’ åˆ†ç±»æ¦‚ç‡é›†ä¸­ï¼ˆå¦‚æŸç±»æ¦‚ç‡æ¥è¿‘ 1ï¼‰ï¼Œæ­¤æ—¶ <spanclass="math inline">KL(<em>p</em>(<em>y</em>|<em>x</em>)â€„âˆ¥â€„<em>p</em>(<em>y</em>))</span>å€¼å¤§ã€‚<br /></li><li><strong><span class="math inline"><em>p</em>(<em>y</em>)</span>å‡åŒ€</strong> â†’ ç”Ÿæˆæ ·æœ¬è¦†ç›–æ‰€æœ‰ç±»åˆ«ï¼Œ<spanclass="math inline">KL</span> å€¼çš„æœŸæœ›æ›´å¤§ã€‚<br /></li></ul></li><li><strong>å–æŒ‡æ•°çš„ä½œç”¨</strong>ï¼šå°†å¯¹æ•°ç©ºé—´çš„å€¼è½¬æ¢ä¸ºæ­£æ•°ï¼Œæ”¾å¤§å·®å¼‚ä¾¿äºæ¯”è¾ƒã€‚</li></ul><h4 id="fid-frechet-inception-distance">FID: Frechet InceptionDistance</h4><p>å°†ç”Ÿæˆçš„æ•°æ®è¾“å…¥ä¸€ä¸ªç½‘ç»œæ¥æå–ç‰¹å¾ï¼Œç”¨å¾—åˆ°çš„ç‰¹å¾æ¥æ‹Ÿå’Œä¸¤ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Œç„¶åè®¡ç®—ä¸¤ä¸ªé«˜æ–¯åˆ†å¸ƒçš„<em>FrechetInception Distance</em>ã€‚è¿™æ˜¯æœ‰æ˜¾å¼è¡¨è¾¾å¼çš„ã€‚</p><p><spanclass="math display">FIDâ€„=â€„âˆ¥<em>Î¼</em><sub><em>r</em></sub>â€…âˆ’â€…<em>Î¼</em><sub><em>g</em></sub>âˆ¥<sup>2</sup>â€…+â€…Tr(<em>Î£</em><sub><em>r</em></sub>â€…+â€…<em>Î£</em><sub><em>g</em></sub>â€…âˆ’â€…2(<em>Î£</em><sub><em>r</em></sub><em>Î£</em><sub><em>g</em></sub>)<sup>1/2</sup>)</span>- <strong><spanclass="math inline"><em>Î¼</em><sub><em>r</em></sub>,â€†<em>Î¼</em><sub><em>g</em></sub></span></strong>ï¼šçœŸå®æ•°æ®å’Œç”Ÿæˆæ•°æ®ç‰¹å¾çš„å‡å€¼å‘é‡ã€‚<br />- <strong><spanclass="math inline"><em>Î£</em><sub><em>r</em></sub>,â€†<em>Î£</em><sub><em>g</em></sub></span></strong>ï¼šçœŸå®æ•°æ®å’Œç”Ÿæˆæ•°æ®ç‰¹å¾çš„åæ–¹å·®çŸ©é˜µã€‚<br />- <strong><spanclass="math inline">Tr(â‹…)</span></strong>ï¼šçŸ©é˜µçš„è¿¹ï¼ˆå¯¹è§’çº¿å…ƒç´ ä¹‹å’Œï¼‰ã€‚</p><h4 id="mode-collapse">Mode Collapse</h4><p>æŒ‡ç”Ÿæˆçš„æ•°æ®çš„å¤šæ ·æ€§ä¸å¤Ÿï¼Œç±»åˆ«åˆ†å¸ƒæ˜¯å•ä¸€çš„ï¼Œè¿™æ˜¯GANçš„ä¸€ä¸ªé—®é¢˜ã€‚</p><p>åŸå§‹GANä½¿ç”¨JSæ•£åº¦ï¼ˆ<spanclass="math inline"><em>J</em><em>S</em><em>D</em>(<em>p</em><sub><em>d</em><em>a</em><em>t</em><em>a</em></sub>â€„âˆ¥â€„<em>p</em><sub><em>g</em></sub>)</span>ï¼‰è¡¡é‡åˆ†å¸ƒè·ç¦»ï¼Œå­˜åœ¨ï¼š- <strong>æ¢¯åº¦æ¶ˆå¤±</strong>ï¼šå½“ <spanclass="math inline"><em>p</em><sub><em>g</em></sub></span> å’Œ <spanclass="math inline"><em>p</em><sub><em>d</em><em>a</em><em>t</em><em>a</em></sub></span>æ— é‡å æ—¶ï¼Œ<spanclass="math inline"><em>J</em><em>S</em><em>D</em>â€„=â€„logâ€†2</span>ï¼Œæ¢¯åº¦ä¸ºé›¶ã€‚- <strong>æ¨¡å¼åå¡Œ</strong>ï¼šç”Ÿæˆå™¨å€¾å‘äºç”Ÿæˆå°‘æ•°æ ·æœ¬ã€‚</p><h5 id="wasserstein-distance">Wasserstein Distance</h5><p><ahref="https://zh.wikipedia.org/wiki/%E6%B2%83%E7%91%9F%E6%96%AF%E5%9D%A6%E5%BA%A6%E9%87%8F">æ²ƒç‘Ÿæ–¯å¦åº¦é‡- ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦</a></p><p>æœ‰å¯èƒ½ç»Ÿè®¡è·ç¦»æ˜¯ä¸æ˜¯ä¸€ä¸ªå¥½çš„è·ç¦»åº¦é‡ã€‚Wassersteinè·ç¦»æ˜¯ä¸€ä¸ªå¥½çš„è·ç¦»åº¦é‡ï¼Œç”¨æ¨åœŸæœºè·ç¦»æ¥åº¦é‡ä¸¤ä¸ªåˆ†å¸ƒçš„è·ç¦»ã€‚</p><p><spanclass="math display"><em>c</em>(<em>x</em>,â€†<em>y</em>)â€„â†¦â€„[0,â€†âˆ),</span>è¡¨ç¤ºä»ç‚¹<span class="math inline"><em>x</em></span>è¿è¾“è´¨é‡åˆ°ç‚¹<spanclass="math inline"><em>y</em></span>çš„ä»£ä»·ã€‚ä¸€ä¸ªä»<spanclass="math inline"><em>Î¼</em></span>åˆ°<spanclass="math inline"><em>Î½</em></span>çš„è¿è¾“æ–¹æ¡ˆå¯ä»¥ç”¨å‡½æ•°<spanclass="math inline"><em>Î³</em>(<em>x</em>,â€†<em>y</em>)</span>æ¥æè¿°ï¼Œè¯¥å‡½æ•°è¡¨æ˜ä»<spanclass="math inline"><em>x</em></span>ç§»åŠ¨åˆ°<spanclass="math inline"><em>y</em></span>çš„è´¨é‡ã€‚ä¸€ä¸ªè¿è¾“æ–¹æ¡ˆ<spanclass="math inline"><em>Î³</em>(<em>x</em>,â€†<em>y</em>)</span>å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š<span class="math display">$$\begin{aligned}\int \gamma(x,y) \, \mathrm{d}y = \mu(x), \\\int \gamma(x,y) \, \mathrm{d}x = \nu(y),\end{aligned}$$</span></p><p>å‰è€…è¡¨ç¤ºä»æŸä¸€ç‚¹<spanclass="math inline"><em>x</em></span>ç§»åˆ°å…¶ä»–æ‰€æœ‰ç‚¹çš„åœŸå †æ€»è´¨é‡å¿…é¡»ç­‰äºæœ€åˆè¯¥ç‚¹<spanclass="math inline"><em>x</em></span>ä¸Šçš„åœŸå †è´¨é‡ï¼Œåè€…åˆ™è¡¨ç¤ºä»æ‰€æœ‰ç‚¹ç§»åˆ°æŸä¸€ç‚¹<spanclass="math inline"><em>y</em></span>çš„åœŸå †æ€»è´¨é‡å¿…é¡»ç­‰äºæœ€ç»ˆè¯¥ç‚¹<spanclass="math inline"><em>y</em></span>ä¸Šçš„åœŸå †è´¨é‡ã€‚ <spanclass="math display">âˆ¬<em>c</em>(<em>x</em>,â€†<em>y</em>)<em>Î³</em>(<em>x</em>,â€†<em>y</em>)â€†d<em>x</em>â€†d<em>y</em>â€„=â€„âˆ«<em>c</em>(<em>x</em>,â€†<em>y</em>)â€†d<em>Î³</em>(<em>x</em>,â€†<em>y</em>).</span></p><p>æ–¹æ¡ˆ<spanclass="math inline"><em>Î³</em></span>å¹¶ä¸æ˜¯å”¯ä¸€çš„ï¼Œæ‰€æœ‰å¯èƒ½çš„è¿è¾“æ–¹æ¡ˆä¸­ä»£ä»·æœ€ä½çš„æ–¹æ¡ˆå³ä¸ºæœ€ä¼˜è¿è¾“æ–¹æ¡ˆã€‚æœ€ä¼˜è¿è¾“æ–¹æ¡ˆçš„ä»£ä»·ä¸ºï¼š</p><p><spanclass="math display"><em>C</em>â€„=â€„inf<sub><em>Î³</em>â€„âˆˆâ€„<em>Î“</em>(<em>Î¼</em>,â€†<em>Î½</em>)</sub>âˆ«<em>c</em>(<em>x</em>,â€†<em>y</em>)â€†d<em>Î³</em>(<em>x</em>,â€†<em>y</em>).</span>##### Wasserstein GAN</p><p>![[Pasted image 20250330141642.png]]</p><p>![[Pasted image 20250330142308.png]]</p><p>å¯¹äºæ¨¡å¼åå¡Œè¿›ä¸€æ­¥çš„ç†è§£ï¼Œå¦‚æœç©ºé—´ä¸Šæœ‰ä¸€ä¸ªè¾ƒå¤§çš„åˆ©æ™®å¸ŒèŒ¨ç³»æ•°ï¼Œé‚£ä¹ˆè¯´æ˜å‘ç”Ÿäº†æ¨¡å¼åå¡Œã€‚</p><p>![[Pasted image 20250330144259.png]]</p><h5 id="spectral-normalization">Spectral Normalization</h5><p>![[Pasted image 20250330144556.png]]</p><table><thead><tr><th>æŒ‡æ ‡</th><th>JSæ•£åº¦</th><th>Wassersteinè·ç¦»</th></tr></thead><tbody><tr><td><strong>è¿ç»­æ€§</strong></td><td>ä¸è¿ç»­ï¼ˆæ¢¯åº¦æ¶ˆå¤±ï¼‰</td><td>è¿ç»­</td></tr><tr><td><strong>å¯¹ç§°æ€§</strong></td><td>å¯¹ç§°</td><td>å¯¹ç§°</td></tr><tr><td><strong>è®¡ç®—å¤æ‚åº¦</strong></td><td>ä½</td><td>é«˜ï¼ˆéœ€çº¦æŸåˆ¤åˆ«å™¨ï¼‰</td></tr></tbody></table><h4 id="conditional-gan">Conditional GAN</h4><p>ç»™å®šä¸€ä¸ªç±»æ¥è¿›è¡Œç”Ÿæˆæ•°æ®ï¼Œè¿™æ ·å¯ä»¥ç”Ÿæˆä¸åŒç±»åˆ«çš„æ•°æ®ï¼Œè¿™æ ·å¯ä»¥ç”Ÿæˆæ›´åŠ å¤šæ ·çš„æ•°æ®ã€‚å¹¶ä¸”å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…æ¨¡å¼åå¡Œã€‚é™¤äº†æ¥å—é«˜æ–¯å™ªå£°è¿˜æ¥å—ä¸€ä¸ªæ ‡ç­¾/å›¾åƒç­‰ç­‰ä½œä¸ºè¾“å…¥ã€‚</p><h4 id="acgan-auxiliary-classifier-gan">ACGAN: Auxiliary ClassifierGAN</h4><p>æ˜¯å¤šä»»åŠ¡å­¦ä¹ çš„ä¸€ç§æ–¹æ³•ï¼Œé™¤äº†ç”Ÿæˆæ•°æ®ï¼Œè¿˜å¯ä»¥è¿›è¡Œåˆ†ç±»ã€‚åœ¨ç”Ÿæˆæ•°æ®çš„è¿‡ç¨‹ä¸­è¿˜ç”Ÿæˆæ ‡ç­¾ï¼Œæ‰€ä»¥å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šé¿å…æ¨¡å¼åå¡Œã€‚</p><h4 id="cycle-gan">Cycle GAN</h4><p>![[Pasted image 20250330153629.png]]</p><p>æ— é…å¯¹æ•°æ®ä¸‹çš„å›¾åƒè½¬æ¢ï¼ˆå¦‚é©¬â†’æ–‘é©¬ï¼‰ï¼Œé€šè¿‡å¾ªç¯ä¸€è‡´æ€§æŸå¤±<spanclass="math inline"><em>C</em><em>y</em><em>c</em></span>ä¿è¯ç”Ÿæˆçš„å›¾åƒåœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šçš„è½¬æ¢æ˜¯ä¸€è‡´çš„ã€‚### Self-Attention GAN</p><p>å°†<em>Self-Attention</em>æœºåˆ¶åº”ç”¨åˆ°GANä¸­ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—ç”Ÿæˆçš„æ•°æ®æ›´åŠ çœŸå®ã€‚</p><h4 id="adaptive-instance-normalization">Adaptive InstanceNormalization</h4><p><span class="math display">$$AdaIN(u ,v) = \sigma(v) \left(\frac{u - \mu(u)}{\sigma(u)}\right) +\mu(v)$$</span>æœ¬è´¨ä¸Šä¸ºé‡æ–°ç€è‰²çš„æ“ä½œï¼Œå°†ä¸€ä¸ªå›¾åƒçš„é£æ ¼è½¬ç§»åˆ°å¦ä¸€ä¸ªå›¾åƒä¸Šã€‚</p><h4 id="stylegan">StyleGAN</h4><p>é€šè¿‡æ§åˆ¶é£æ ¼æ¥ç”Ÿæˆæ•°æ®ï¼Œè¿™æ ·å¯ä»¥ç”Ÿæˆæ›´åŠ å¤šæ ·çš„æ•°æ®ã€‚</p><h3 id="vae">VAE</h3><h4 id="encoder">Encoder</h4><ol type="1"><li><strong>æ¨æ–­æ½œåœ¨å˜é‡åˆ†å¸ƒ</strong><br />ç¼–ç å™¨å°†è¾“å…¥æ•°æ®ï¼ˆå¦‚å›¾åƒã€æ–‡æœ¬ï¼‰æ˜ å°„åˆ°æ½œåœ¨ç©ºé—´<em>latentspace</em>ï¼Œè¾“å‡ºæ½œåœ¨å˜é‡<spanclass="math inline"><em>z</em></span>çš„æ¦‚ç‡åˆ†å¸ƒå‚æ•°ï¼ˆé€šå¸¸æ˜¯é«˜æ–¯åˆ†å¸ƒçš„å‡å€¼å’Œæ–¹å·®ï¼‰ã€‚è¿™ä¸€æ­¥ç§°ä¸º<strong>å˜åˆ†æ¨æ–­</strong>ï¼Œç›®çš„æ˜¯æ‰¾åˆ°è¾“å…¥æ•°æ®åœ¨ä½ç»´æ½œåœ¨ç©ºé—´ä¸­çš„æ¦‚ç‡è¡¨ç¤ºã€‚</li><li><strong>æ•°æ®å‹ç¼©ä¸ç‰¹å¾æå–</strong><br />ç¼–ç å™¨å°†é«˜ç»´è¾“å…¥æ•°æ®å‹ç¼©åˆ°ä½ç»´æ½œåœ¨å˜é‡<spanclass="math inline"><em>z</em></span>ï¼Œæå–æ•°æ®çš„å…³é”®ç‰¹å¾ï¼ˆå¦‚å½¢çŠ¶ã€é¢œè‰²ç­‰æŠ½è±¡å±æ€§ï¼‰ï¼ŒåŒæ—¶å»é™¤å†—ä½™ä¿¡æ¯ã€‚</li><li><strong>å¼•å…¥ä¸ç¡®å®šæ€§</strong><br />ä¸åŒäºä¼ ç»Ÿè‡ªç¼–ç å™¨çš„ç¡®å®šæ€§ç¼–ç ï¼ŒVAEçš„ç¼–ç å™¨è¾“å‡ºçš„æ˜¯åˆ†å¸ƒçš„å‚æ•°ï¼Œé€šè¿‡éšæœºé‡‡æ ·ç”ŸæˆÂ zzï¼Œä½¿å¾—æ½œåœ¨ç©ºé—´å…·æœ‰è¿ç»­æ€§ï¼Œä¾¿äºç”Ÿæˆæ–°æ ·æœ¬ã€‚</li></ol><h4 id="decoder">Decoder</h4><ol type="1"><li><strong>æ•°æ®ç”Ÿæˆ</strong><br />è§£ç å™¨ä»æ½œåœ¨å˜é‡<spanclass="math inline"><em>z</em></span>å‡ºå‘ï¼Œé‡æ„è¾“å…¥æ•°æ®<spanclass="math inline"><em>x</em></span>çš„åˆ†å¸ƒï¼ˆå¦‚åƒç´ å€¼çš„ä¼¯åŠªåˆ©åˆ†å¸ƒæˆ–é«˜æ–¯åˆ†å¸ƒï¼‰ï¼Œç”Ÿæˆä¸åŸå§‹æ•°æ®ç›¸ä¼¼çš„æ–°æ ·æœ¬ã€‚</li><li><strong>æ½œåœ¨ç©ºé—´æ˜ å°„åˆ°æ•°æ®ç©ºé—´</strong><br />è§£ç å™¨å­¦ä¹ å¦‚ä½•å°†ä½ç»´æ½œåœ¨å˜é‡<spanclass="math inline"><em>z</em></span>è§£ç ä¸ºé«˜ç»´æ•°æ®ç©ºé—´ä¸­çš„æ ·æœ¬ï¼Œæ•æ‰æ•°æ®ç”Ÿæˆè¿‡ç¨‹çš„è§„å¾‹ï¼ˆå¦‚åƒç´ é—´çš„ä¾èµ–å…³ç³»ï¼‰ã€‚</li><li><strong>ç”Ÿæˆå¤šæ ·æ€§</strong><br />ç”±äºæ½œåœ¨å˜é‡<spanclass="math inline"><em>z</em></span>æ˜¯è¿ç»­ä¸”æ¦‚ç‡åŒ–çš„ï¼Œè§£ç å™¨å¯ä»¥åœ¨æ½œåœ¨ç©ºé—´ä¸­æ’å€¼æˆ–éšæœºé‡‡æ ·ï¼Œç”Ÿæˆå¤šæ ·åŒ–ä¸”åˆç†çš„æ–°æ•°æ®ã€‚</li></ol><h4 id="why-variational">Why Variational</h4><p>å…¶æ ¸å¿ƒç›®æ ‡æ˜¯é€šè¿‡å­¦ä¹ æ•°æ®åˆ†å¸ƒ<spanclass="math inline"><em>p</em>(<em>x</em>)</span>ï¼Œç”Ÿæˆä¸è®­ç»ƒæ•°æ®ç±»ä¼¼çš„æ–°æ ·æœ¬ã€‚å…·ä½“æ¥è¯´ï¼ŒVAEæ—¨åœ¨è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š- <strong>ç”Ÿæˆæ–°æ•°æ®</strong>ï¼šä¾‹å¦‚ç”Ÿæˆå›¾åƒã€æ–‡æœ¬æˆ–éŸ³é¢‘ã€‚ -<strong>å­¦ä¹ æ½œåœ¨è¡¨ç¤º</strong>ï¼šå°†é«˜ç»´æ•°æ®æ˜ å°„åˆ°ä½ç»´æ½œåœ¨ç©ºé—´ï¼ŒåŒæ—¶ä¿æŒæ•°æ®çš„è¯­ä¹‰ç‰¹å¾ã€‚- <strong>æ¦‚ç‡å»ºæ¨¡</strong>ï¼šæ˜¾å¼å®šä¹‰æ•°æ®çš„ç”Ÿæˆè¿‡ç¨‹<spanclass="math inline"><em>p</em><sub><em>Î¸</em></sub>(<em>x</em>|<em>z</em>)</span>ï¼Œå¹¶å¼•å…¥æ½œåœ¨å˜é‡<spanclass="math inline"><em>z</em></span>è¡¨ç¤ºæ•°æ®çš„éšå«å› ç´ </p><p>åœ¨VAEä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ½œåœ¨å˜é‡ <spanclass="math inline"><em>z</em></span>ï¼Œå‡è®¾æ•°æ® <spanclass="math inline"><em>x</em></span> æ˜¯ç”±æŸä¸ªå…ˆéªŒåˆ†å¸ƒ <spanclass="math inline"><em>p</em><sub><em>Î¸</em></sub>(<em>z</em>)</span>ç”Ÿæˆï¼Œç„¶åé€šè¿‡æ¡ä»¶åˆ†å¸ƒ <spanclass="math inline"><em>p</em><sub><em>Î¸</em></sub>(<em>x</em>|<em>z</em>)</span>ç”Ÿæˆå¯è§‚æµ‹æ•°æ® <span class="math inline"><em>x</em></span>ã€‚ <spanclass="math display"><em>p</em><sub><em>Î¸</em></sub>(<em>x</em>)â€„=â€„âˆ«<em>p</em><sub><em>Î¸</em></sub>(<em>x</em>|<em>z</em>)<em>p</em><sub><em>Î¸</em></sub>(<em>z</em>)â€†d<em>z</em></span><spanclass="math inline"><em>z</em></span>çš„åˆ†å¸ƒæ˜¯ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Œå¯¹äº<spanclass="math inline"><em>z</em></span>é‡‡æ ·å¾—åˆ°çš„å®ä¾‹ï¼Œé€šè¿‡ä¸€ä¸ªç½‘ç»œç”Ÿæˆ<spanclass="math inline"><em>x</em></span>ã€‚å›°éš¾åœ¨äºä¸Šé¢çš„åå¸¸ç§¯åˆ†ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜ç»´ç§¯åˆ†ï¼Œä¸å¯è¡Œã€‚å¯ä»¥ä½¿ç”¨<em>è’™ç‰¹å¡æ´›</em>ã€‚</p><p>å¯¹äºåéªŒåˆ†å¸ƒï¼š <span class="math display">$$p_\theta(z|x) = \frac{p_\theta(x|z) p_\theta(z)}{p_\theta(x)}$$</span>åœ¨ç§¯åˆ†ä¸­æ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œä½†æ˜¯è®¡ç®—æ˜¯NP-hardçš„ï¼Œå› æ­¤å¼•å…¥<strong>å˜åˆ†æ¨æ–­</strong>ï¼Œé€šè¿‡ä¼˜åŒ–ä¸‹ç•Œï¼ˆELBOï¼‰é—´æ¥é€¼è¿‘ã€‚ç›´æ¥æ±‚åéªŒå¾€å¾€æ˜¯ä¸å¯è¡Œçš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç”¨<strong>å˜åˆ†æ¨æ–­</strong>çš„æ–¹å¼ï¼Œå»å­¦ä¹ ä¸€ä¸ªè¿‘ä¼¼åéªŒåˆ†å¸ƒ<spanclass="math inline"><em>q</em><sub><em>Ï•</em></sub>(<em>z</em>â€„âˆ£â€„<em>x</em>)</span>ï¼Œå¹¶ç”¨å®ƒæ¥é€¼è¿‘çœŸæ­£çš„åéªŒåˆ†å¸ƒ<spanclass="math inline"><em>p</em><sub><em>Î¸</em></sub>(<em>z</em>â€„âˆ£â€„<em>x</em>)</span>ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªå˜åˆ†ä¸‹ç•Œã€‚</p><p>å˜åˆ†çš„æ„æ€ä¸ºå˜é‡çš„æ›¿æ¢ï¼Œåœ¨æ¦‚ç‡ä¸­ä¸ºåˆ†å¸ƒç‡çš„æ›¿æ¢ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œæ¥å®ç°ï¼Œå¯¹äºè¿™ç§æ˜¾å¼çš„åˆ†å¸ƒï¼Œéœ€è¦å‡è®¾åˆ†å¸ƒç‡ï¼Œå¯ä»¥æŒ‡å®šä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œç”¨ç½‘ç»œæ¥å­¦ä¹ å‡å€¼å’Œåæ–¹å·®ï¼Œä½œä¸º<em>EncoderNetwork</em>ã€‚ å¯¹äºæ¡ä»¶åˆ†å¸ƒ<spanclass="math inline"><em>p</em><sub><em>Î¸</em></sub>(<em>x</em>|<em>z</em>)</span>ï¼Œä¹Ÿå¯ä»¥å‡å®šä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œè¿™æ ·å¯ä»¥è®¡ç®—å‡å€¼å’Œåæ–¹å·®ï¼Œä½œä¸º<em>DecoderNetwork</em>ã€‚</p><p>![[Pasted image 20250330161028.png]]</p><p>ä½†æ˜¯VAEæ˜¯<em>Intractable</em>çš„ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯NP-hardçš„ã€‚å¯¹äºä¸Šé¢çš„æ¡ä»¶æ¦‚ç‡ï¼Œæ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚æ‰€ä»¥é‡‡ç”¨ä¸€ä¸ªè¿‘ä¼¼çš„æ–¹æ³•æ¥è¿›è¡Œæ±‚è§£ã€‚æ¯”å¦‚å‡è®¾æœä»ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Œä¹‹åè®¡ç®—è¿™ä¸ªåˆ†å¸ƒçš„å‡å€¼å’Œåæ–¹å·®çŸ©é˜µã€‚</p><h4 id="elbo-evidence-lower-bound">ELBO: Evidence Lower Bound</h4><p>è®­ç»ƒçš„ç›®çš„æ˜¯ä½¿å¾—<spanclass="math inline">logâ€†<em>p</em><sub><em>Î¸</em></sub>(<em>x</em><sub><em>i</em></sub>)</span>å°½å¯èƒ½å¤§ï¼Œä½†æ˜¯å¾ˆéš¾è®¡ç®—ï¼Œè¿™é‡Œå¼•å…¥â€œå‚è€ƒç³»â€ï¼Œä¹Ÿå°±æ˜¯å¼•å…¥ä¸€ä¸ªè¿‘ä¼¼çš„åˆ†å¸ƒ<spanclass="math inline"><em>q</em><sub><em>Ï•</em></sub>(<em>z</em>|<em>x</em><sub><em>i</em></sub>)</span>ã€‚</p><p>![[Pasted image 20250330164549.png]]</p><p>è¿™é‡Œæ˜¯å°†æœ€å¤§åŒ–ä¼¼ç„¶çš„è¿‡ç¨‹ç®€åŒ–ä¸ºæœ€å¤§åŒ–ELBOçš„è¿‡ç¨‹ã€‚ <spanclass="math display">logâ€†<em>p</em><sub><em>Î¸</em></sub>(<em>x</em><sub><em>i</em></sub>)â€„=â€„ğ”¼<sub><em>q</em><sub><em>Ï•</em></sub>(<em>z</em>|<em>x</em><sub><em>i</em></sub>)</sub>[logâ€†<em>p</em><sub><em>Î¸</em></sub>(<em>x</em><sub><em>i</em></sub>|<em>z</em>)]â€…âˆ’â€…<em>K</em><em>L</em>(<em>q</em><sub><em>Ï•</em></sub>(<em>z</em>|<em>x</em><sub><em>i</em></sub>)||<em>p</em><sub><em>Î¸</em></sub>(<em>z</em>))</span></p><h4 id="reparameterization-trick">Reparameterization Trick</h4><p>![[Pasted image 20250403144444.png]]</p><p>åœ¨VAEçš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé€šå¸¸éœ€è¦ä»æ½œåœ¨å˜é‡çš„åˆ†å¸ƒä¸­é‡‡æ ·ã€‚ç›´æ¥ä»åˆ†å¸ƒä¸­é‡‡æ ·å¯èƒ½å¯¼è‡´æ¢¯åº¦æ— æ³•ä¼ æ’­åˆ°ç¼–ç å™¨ç½‘ç»œï¼Œå› æ­¤å¼•å…¥äº†é‡å‚æ•°åŒ–æŠ€å·§ã€‚è¿™æ˜¯çš„é‡‡æ ·å˜é‡æ˜¯<spanclass="math inline"><em>Ïµ</em></span>ï¼Œè¿™æ ·çš„è¯é‡‡æ ·çš„è¿‡ç¨‹å°±åœ¨è®¡ç®—å›¾çš„æ—è·¯ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œæ¢¯åº¦çš„ä¼ æ’­ã€‚#### VAE Inference</p><p>åœ¨è®­ç»ƒçš„æ—¶å€™æ˜¯ä»<spanclass="math inline"><em>x</em></span>ä¸­é‡‡æ ·å¾—åˆ°çš„ï¼Œç„¶åç”±åéªŒåˆ†å¸ƒ<spanclass="math inline"><em>q</em><sub><em>Ï•</em></sub>(<em>z</em>|<em>x</em>)</span>æ¥è¿›è¡Œé‡‡æ ·ã€‚è€Œåœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä»æ½œåœ¨å˜é‡<spanclass="math inline"><em>z</em></span>ä¸­é‡‡æ ·å¾—åˆ°çš„ï¼Œç„¶åç”±æ¡ä»¶åˆ†å¸ƒ<spanclass="math inline"><em>p</em><sub><em>Î¸</em></sub>(<em>x</em>|<em>z</em>)</span>æ¥è¿›è¡Œè¿›è¡Œæ¨ç†ã€‚ä¸Šè¿°è¿‡ç¨‹çš„åˆç†æ€§åœ¨äºç›®æ ‡å‡½æ•°ELBOä¸­çš„ç¬¬äºŒé¡¹ï¼š<spanclass="math inline"><em>K</em><em>L</em>(<em>q</em><sub><em>Ï•</em></sub>(<em>z</em>|<em>x</em><sub><em>i</em></sub>)||<em>p</em><sub><em>Î¸</em></sub>(<em>z</em>))</span>åœ¨è®­ç»ƒä¸­è¢«æœ€å°åŒ–äº†ã€‚</p><p>![[Pasted image 20250403152841.png]]</p><h4 id="vq-vae">VQ-VAE</h4><p>VQ-VAEæ˜¯å¯¹VAEçš„ä¸€ä¸ªæ”¹è¿›ï¼Œä½¿ç”¨äº†å‘é‡é‡åŒ–çš„æ–¹æ³•æ¥è¿›è¡Œè®­ç»ƒã€‚é€šè¿‡å¯¹æ½œåœ¨å˜é‡è¿›è¡Œç¦»æ•£åŒ–æ¥è¿›è¡Œè®­ç»ƒï¼Œè¿™æ ·å¯ä»¥é¿å…æ¨¡å¼åå¡Œçš„é—®é¢˜ã€‚</p><h3 id="diffusion-probabilistic-models">Diffusion ProbabilisticModels</h3><h4 id="denoising-diffusion-probabilistic-models">Denoising DiffusionProbabilistic Models</h4><p>Diffusionæ¨¡å‹æ˜¯é€šè¿‡å¯¹æ•°æ®è¿›è¡Œé€æ­¥æ·»åŠ å™ªå£°æ¥è®­ç»ƒæ¨¡å‹çš„ã€‚é€šè¿‡å¯¹æ•°æ®è¿›è¡Œé€æ­¥æ·»åŠ å™ªå£°ï¼Œç„¶åå†é€šè¿‡ä¸€ä¸ªç½‘ç»œæ¥è¿›è¡Œå»å™ªå£°çš„æ“ä½œã€‚è¿™æ ·å¯ä»¥ç”Ÿæˆæ–°çš„æ•°æ®ã€‚</p><p>Markovian Process: é€æ­¥æ·»åŠ å™ªå£°çš„è¿‡ç¨‹ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒçš„è¿‡ç¨‹ã€‚<span class="math display">$$q(x_t | x_{t-1}) = \mathcal{N}(x_t; \sqrt{1-\beta_t}  x_{t-1}, \beta_tI)$$</span> è”åˆåˆ†å¸ƒï¼š <span class="math display">$$q(x_{1:T} | x_0) = \prod_{t=1}^{T} q(x_t | x_{t-1})$$</span></p><p>é‡å‚æ•°åŒ–è¡¨è¾¾ï¼š <span class="math display">$$x_t = \sqrt{1-\beta_t} x_{t-1} + \sqrt{\beta_t} \epsilon \quad \epsilon\sim \mathcal{N}(0, I)$$</span></p><h5 id="diffusion-kernel">Diffusion Kernel</h5><p><span class="math display">$$\begin{aligned}x_t &amp; = \sqrt{1-\beta_t} x_{t-1} + \sqrt{\beta_t} \epsilon \\&amp;= \sqrt{\alpha_t} x_{t-1} + \sqrt{1-\alpha_t} \epsilon \\&amp;= \sqrt{\alpha_t \alpha_{t-1}} x_{t-2} + \sqrt{1-\alpha_t} \epsilon+ \sqrt{\alpha_t} \sqrt{1-\alpha_{t-1}} \epsilon' \\&amp; = \sqrt{\alpha_t \alpha_{t-1}} x_{t-2} + \sqrt{1 -  \alpha_t\alpha_{t-1}} \epsilon \\&amp; \dots \\&amp; = \sqrt{\overline{\alpha_t}} x_0 + \sqrt{1 - \overline{\alpha_t}}\epsilon\end{aligned}$$</span> - å…¶ä¸­ <span class="math inline">$\overline{\alpha_t} =\prod_{s=1}^{t} \alpha_s$</span></p><h5 id="generation-by-denoising">Generation by Denoising</h5><ul><li>é¦–å…ˆå¯¹äº<spanclass="math inline"><em>x</em><sub><em>T</em></sub></span>è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒçš„æ ·æœ¬ã€‚</li><li>ç„¶ååˆ©ç”¨åéªŒåˆ†å¸ƒå¾—åˆ°<spanclass="math inline"><em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub></span>ï¼Œä½¿ç”¨Bayeså…¬å¼ï¼š<spanclass="math inline"><em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub>â€„âˆ¼â€„<em>q</em>(<em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub>|<em>x</em><sub><em>t</em></sub>)â€„âˆâ€„<em>q</em>(<em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub>)<em>q</em>(<em>x</em><sub><em>t</em></sub>|<em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub>)</span></li></ul><p>é‡‡ç”¨ä¸€ä¸ªå˜åˆ†æ–¹æ³•æ¥å®ç°ï¼š <spanclass="math display"><em>p</em><sub><em>Î¸</em></sub>(<em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub>|<em>x</em><sub><em>t</em></sub>)â€„=â€„ğ’©(<em>x</em><sub><em>t</em>â€…âˆ’â€…1</sub>;â€†<em>Î¼</em><sub><em>Î¸</em></sub>(<em>x</em><sub><em>t</em></sub>,â€†<em>t</em>),â€†<em>Ïƒ</em><sub><em>t</em></sub><sup>2</sup><strong>I</strong>)</span><span class="math display">$$p_\theta(x_{0:T}) = p_\theta (x_T)\prod_{t=1}^{T} p_\theta(x_{t-1}|x_t)$$</span></p><p>ä¸Šè¿°è¿‡ç¨‹å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç½‘ç»œæ¥å®ç°å¯¹äºå‡å€¼å’Œæ–¹å·®çš„è¾“å‡ºã€‚</p><p>![[Pasted image 20250403164408.png]]</p><p>![[Pasted image 20250403165731.png]]</p><p><ahref="https://lilianweng.github.io/posts/2021-07-11-diffusion-models/">Whatare Diffusion Models? | Lilâ€™Log</a></p><p>![[Pasted image 20250405094553.png]]</p><h5 id="diffusion-parameters">Diffusion Parameters</h5><p>![[Pasted image 20250405161801.png]]</p><h5 id="acceleration-strategies">Acceleration Strategies</h5><h5 id="re-design-forward-sampling">Re-design forward Sampling</h5><ul><li>Striding Sampling<ul><li>åœ¨æ¯ä¸ªæ—¶é—´æ­¥é•¿ä¸­è·³è¿‡å¤šä¸ªæ—¶é—´æ­¥è¿›è¡Œé‡‡æ ·ï¼Œä»è€Œå‡å°‘é‡‡æ ·æ¬¡æ•°ã€‚</li><li>é—®é¢˜åœ¨äºåœ¨ç›¸é‚»çš„æ—¶é—´æˆ³ä¸­åå‘ä¼ æ’­çš„åéªŒåˆ†å¸ƒå¯ä»¥è¿‘ä¼¼ä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œä½†æ˜¯åœ¨è¾ƒå¤§çš„æ­¥é•¿ä¸‹ä¸ä¸€å®šæ˜¯è¿™æ ·çš„ã€‚</li></ul></li><li>DDIM: Denoising Diffusion Implicit Models<ul><li>é€šè¿‡è®¾è®¡ä¸€ä¸ªæ–°çš„å‰å‘é‡‡æ ·è¿‡ç¨‹æ¥åŠ é€Ÿé‡‡æ ·ã€‚</li><li>é€šè¿‡å¼•å…¥ä¸€ä¸ªæ–°çš„å‚æ•°<spanclass="math inline"><em>Î±</em><sub><em>t</em></sub></span>æ¥æ§åˆ¶å‰å‘é‡‡æ ·çš„è¿‡ç¨‹ã€‚</li><li>é€šè¿‡è®¾è®¡ä¸€ä¸ªæ–°çš„åéªŒåˆ†å¸ƒæ¥è¿›è¡Œé‡‡æ ·ã€‚</li><li>é€šè¿‡è®¾è®¡ä¸€ä¸ªæ–°çš„æŸå¤±å‡½æ•°æ¥è¿›è¡Œè®­ç»ƒã€‚</li><li>![[Pasted image 20250405163042.png]]</li></ul></li><li>Denosing Diffusion Models<ul><li>![[Pasted image 20250405163350.png]]</li></ul></li><li>Latent Diffusion Models<ul><li>![[Pasted image 20250405163425.png]]</li></ul></li></ul><h5 id="conditonal-diffusion-models">Conditonal Diffusion Models</h5><p>![[Pasted image 20250405163914.png]]</p><p>![[Pasted image 20250405163941.png]]</p><p>![[Pasted image 20250405164110.png]]</p>]]></content>
    
    
    
    <tags>
      
      <tag>DeepLearning</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
